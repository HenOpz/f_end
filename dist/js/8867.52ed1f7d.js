"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[8867],{18867:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","data-source":t.gpiRecordList,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"column-hiding-enabled":!1,"word-wrap-enabled":!0,"column-min-width":100,"column-auto-width":!0},on:{"init-new-row":function(e){return t.SET_CURRENT_VIEW(1)}},scopedSlots:t._u([{key:"action-cell-template",fn:function(e){var i=e.data;return[a("div",{staticClass:"action-wrapper"},[a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(3,i.data)}}},[a("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/pdf-file-svg.svg"}})]),a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(2,i.data)}}},[a("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),a("div",{on:{click:function(e){return t.DELETE_RECORD(i)}}},[a("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})])])]}},{key:"masterDetailTemplate",fn:function(e){var i=e.data;return[a("div",[t._v(" GPI Number: "+t._s(i.data.gpi_number)),a("br"),t._v(" Main Component: "+t._s(i.data.main_component_free_text)),a("br"),t._v(" Damage Mechanism: "+t._s(t.GET_DAMAGE(i.data.id_damage_mechanism))),a("br"),t._v(" Type of Repair: "+t._s(t.GET_REPAIR_TYPE(i.data.id_repair))),a("br"),t._v(" Repair Description: "+t._s(i.data.repair_type_free_text)),a("br"),t._v(" Findings: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.findings}}),t._v(" Recommendation: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.recommendation}})])]}}])},[a("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!0,"use-icons":!0,mode:"popup"}}),a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxColumn",{attrs:{"data-field":"id_platform",caption:"Platform",alignment:"center",width:50}},[a("DxLookup",{attrs:{"data-source":t.platformList,"display-expr":"code_name","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"id_asset",caption:"Asset Type",alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.assetTypeList,"display-expr":"asset_type","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"tag_no",caption:"Tag Number",alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"location_deck",caption:"Location | Deck",alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"gpi_date",caption:"GPI Date","data-type":"date",format:"dd MMM yyyy",alignment:"center",width:150}}),a("DxColumn",{attrs:{"data-field":"expected_finish_date",caption:"Expected Finish Date","data-type":"date",format:"dd MMM yyyy",alignment:"center",width:150}}),a("DxColumn",{attrs:{"data-field":"id_main_workctr",caption:"Main WorkCtr",alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.mainWorkCtrList,"display-expr":"code","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"id_severity",caption:"Severity",alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.severityList,"display-expr":"status","value-expr":"id"}})],1),a("DxColumn",{attrs:{width:80,alignment:"center","cell-template":"action-cell-template"}}),a("DxMasterDetail",{attrs:{enabled:!0,template:"masterDetailTemplate"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},n=[],r=(a(5086),a(17),a(88704)),s=a(47093),o=a(10788),l=a.n(o),d=a(16164),c=a(63869);const p={name:"gpi-pending-approval",components:{DxDataGrid:c.DxDataGrid,DxSearchPanel:c.DxSearchPanel,DxPaging:c.DxPaging,DxPager:c.DxPager,DxScrolling:c.DxScrolling,DxColumn:c.DxColumn,DxExport:c.DxExport,DxEditing:c.DxEditing,DxLookup:c.DxLookup,DxFilterRow:c.DxFilterRow,DxHeaderFilter:c.DxHeaderFilter,DxMasterDetail:c.DxMasterDetail},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"PENDING APPROVAL",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_DATA("/Md/get-md-gpi-repair-type-list","repairTypeList"),this.FETCH_DATA("/Md/get-md-sap-main-work-ctr-list","mainWorkCtrList"),this.FETCH_GPI_RECORD())},data:function(){return{platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],repairTypeList:[],mainWorkCtrList:[],gpiRecordList:{},dataGridAttributes:{class:"data-grid-style"}}},computed:{},methods:{EXPORT_DATA:function(t){var e=new s.Workbook,a=e.addWorksheet("Projects");(0,d.V)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){l()(new Blob([t],{type:"application/octet-stream"}),"GPI-RECORD.xlsx")}))})),t.cancel=!0},FETCH_GPI_RECORD:function(){var t=this;this.isLoading=!0,(0,r.p)({method:"get",url:"/GpiRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.gpiRecordList=e.data,console.log(t.gpiRecordList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DELETE_RECORD:function(t){var e=this;(0,r.p)({method:"delete",url:"/GpiRecord/delete-gpi-record?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_GPI_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},onCellPrepared:function(t){console.log(t),"data"===t.rowType&&"id_final_visual_status"===t.column.dataField&&(t.cellElement.style.backgroundColor=this.GET_STATUS_COLOR(t.data.id_final_visual_status),t.cellElement.style.color="#fff",t.cellElement.style.textTransform="uppercase"),"data"===t.rowType&&"id_final_thk_status"===t.column.dataField&&(t.cellElement.style.backgroundColor=this.GET_STATUS_COLOR(t.data.id_final_thk_status),t.cellElement.style.color="#fff",t.cellElement.style.textTransform="uppercase")},GET_STATUS_COLOR:function(t){if(t){var e=this.severityList.filter((function(e){return e.id==t}));return e[0].color_code}return"#fff"},GET_DAMAGE:function(t){if(t){var e=this.damageMechanismList.filter((function(e){return e.id==t}));return e[0].code}return"-"},GET_REPAIR_TYPE:function(t){if(t){var e=this.typeOfRepairList.filter((function(e){return e.id==t}));return e[0].code}return"-"},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)},FETCH_DATA:function(t,e){var a=this;this.isLoading=!0,(0,r.p)({method:"get",url:t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&a.$set(a,e,t.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){a.isLoading=!1}))}}},m=p;var u=a(81656),g=(0,u.A)(m,i,n,!1,null,"0cbe8ea1",null);const f=g.exports}}]);
//# sourceMappingURL=8867.52ed1f7d.js.map