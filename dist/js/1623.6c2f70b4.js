"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[1623],{41623:(t,e,i)=>{i.r(e),i.d(e,{default:()=>R});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0==t.current_view?i("ViewFR",{on:{currentView:function(e,i){return t.SET_EDIT(e,i)}}}):t._e()],1)},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-container"},[i("div",{staticClass:"page-section"},[i("div",{staticClass:"table-wrapper"},[i("DxDataGrid",{staticStyle:{"font-size":"12px"},attrs:{id:"data-grid-list","key-expr":"id","data-source":t.gpiApprProcessList,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"row-inserted":t.CREATE_RECORD,"row-updated":t.UPDATE_RECORD,"row-removed":t.DELETE_RECORD}},[i("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"row"}}),i("DxFilterRow",{attrs:{visible:!0}}),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxColumn",{attrs:{"data-field":"seq",caption:"Seq.",width:100,alignment:"center","editor-options":{placeholder:"Seq."}}}),i("DxColumn",{attrs:{"data-field":"id_user",caption:"Account","min-width":120,alignment:"left","editor-options":{placeholder:"Select Account"}}},[i("DxLookup",{attrs:{"data-source":t.userList,"display-expr":"username","value-expr":"id"}})],1),i("DxColumn",{attrs:{"data-field":"authorized_name",caption:"Permission Description","min-width":120,alignment:"left","editor-options":{placeholder:"Permission Description"}}}),i("DxColumn",{attrs:{"data-field":"id_discipline",caption:"Discipline","min-width":120,alignment:"left","editor-options":{placeholder:"Select Discipline"}}},[i("DxLookup",{attrs:{"data-source":t.discList,"display-expr":"code","value-expr":"id"}})],1),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1)])])},n=[],s=(i(5086),i(88704)),c=i(47093),d=i(10788),l=i.n(d),u=i(16164),p=i(63869);const h={name:"gpi-user-permission",components:{DxDataGrid:p.DxDataGrid,DxSearchPanel:p.DxSearchPanel,DxPaging:p.DxPaging,DxPager:p.DxPager,DxScrolling:p.DxScrolling,DxColumn:p.DxColumn,DxExport:p.DxExport,DxHeaderFilter:p.DxHeaderFilter,DxEditing:p.DxEditing,DxFilterRow:p.DxFilterRow,DxLookup:p.DxLookup},created:function(){var t=this;this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"USER PERMISSION",subpageInnerName:null}),1==this.$store.state.status.server&&this.FETCH_DATA("/User/get-active-user-list",null,(function(e){t.userList=e,t.FETCH_DATA("/Md/get-md-gpi-discipline-list","discList"),t.FETCH_DATA("/GpiRecordAuth/gpi-record-auth-list","gpiApprProcessList")}))},data:function(){return{active_tab:1,gpiApprProcessList:[],userList:[],discList:[]}},computed:{},methods:{EXPORT_DATA:function(t){var e=new c.Workbook,i=e.addWorksheet("Projects");(0,u.V)({worksheet:i,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){l()(new Blob([t],{type:"application/octet-stream"}),"SHORT-TERM-ACTION.xlsx")}))})),t.cancel=!0},CREATE_RECORD:function(t){var e=this;t.data.id=0,t.data.is_active=!0,(0,s.p)({method:"post",url:"/GpiRecordAuth/add-gpi-record-auth",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&e.FETCH_DATA("/GpiRecordAuth/gpi-record-auth-list","gpiApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;(0,s.p)({method:"put",url:"/GpiRecordAuth/edit-gpi-record-auth?id="+t.data.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&e.FETCH_DATA("/GpiRecordAuth/gpi-record-auth-list","gpiApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,s.p)({method:"delete",url:"/GpiRecordAuth/delete-gpi-record-auth?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_DATA("/GpiRecordAuth/gpi-record-auth-list","gpiApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_DATA:function(t,e,i){var a=this;this.isLoading=!0,(0,s.p)({method:"get",url:t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(i&&"function"===typeof i?i(t.data):a.$set(a,e,t.data))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){a.isLoading=!1}))}}},g=h;var D=i(81656),f=(0,D.A)(g,r,n,!1,null,"18ccbf92",null);const m=f.exports,x={name:"inspection-record",components:{ViewFR:m},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:0}},computed:{},methods:{SET_EDIT:function(t,e){this.current_view=t,e&&(this.edit_row=e)}}},E=x;var A=(0,D.A)(E,a,o,!1,null,"29a63efa",null);const R=A.exports}}]);
//# sourceMappingURL=1623.6c2f70b4.js.map