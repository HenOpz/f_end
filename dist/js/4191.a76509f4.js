"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[4191],{4191:(t,e,a)=>{a.r(e),a.d(e,{default:()=>C});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.current_view?a("ViewFR",{on:{currentView:function(e){return t.current_view=e}}}):t._e()],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.inspRecordList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"row-inserted":t.CREATE_RECORD,"row-updated":t.UPDATE_RECORD,"row-removed":t.DELETE_RECORD,"init-new-row":t.ON_INIT_NEW_ROW}},[a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"row"}}),a("DxFilterRow",{attrs:{visible:!1}}),a("DxHeaderFilter",{attrs:{visible:!1}}),a("DxSelection",{attrs:{mode:"single"}}),a("DxColumn",{attrs:{"data-field":"inspection_date",caption:"Inspection Date",width:130,alignment:"center",dataType:"date",format:"dd MMM yyyy","sort-order":"desc"}}),a("DxColumn",{attrs:{"data-field":"project_no",caption:"Project No.",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"report_no",caption:"Report No.",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"remark",caption:"Note","min-width":150,alignment:"center"}}),a("DxColumn",{attrs:{caption:"Grade of Inspection"}},[a("DxColumn",{attrs:{"data-field":"is_d_type",caption:"D",width:70,alignment:"center",dataType:"boolean"}}),a("DxColumn",{attrs:{"data-field":"is_c_type",caption:"C",width:70,alignment:"center",dataType:"boolean"}}),a("DxColumn",{attrs:{"data-field":"is_v_type",caption:"V",width:70,alignment:"center",dataType:"boolean"}})],1),a("DxColumn",{attrs:{caption:"Type of Inspection"}},[a("DxColumn",{attrs:{"data-field":"is_initial",caption:"Initial",width:70,alignment:"center",dataType:"boolean"}}),a("DxColumn",{attrs:{"data-field":"is_periodic",caption:"Periodic",width:70,alignment:"center",dataType:"boolean"}}),a("DxColumn",{attrs:{"data-field":"is_sample",caption:"Sample",width:70,alignment:"center",dataType:"boolean"}})],1),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},r=[],s=(a(5086),a(88704)),d=a(49148),c=a.n(d),l=a(47093),p=a(10788),u=a.n(p),m=a(16164),_=a(63869);const D={name:"inspection-record",components:{DxDataGrid:_.DxDataGrid,DxSearchPanel:_.DxSearchPanel,DxPaging:_.DxPaging,DxPager:_.DxPager,DxScrolling:_.DxScrolling,DxColumn:_.DxColumn,DxExport:_.DxExport,DxHeaderFilter:_.DxHeaderFilter,DxSelection:_.DxSelection,DxEditing:_.DxEditing,DxFilterRow:_.DxFilterRow},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"INSPECTION RECORD",subpageInnerName:null}),1==this.$store.state.status.server&&this.FETCH_INSP_RECORD()},data:function(){return{inspRecordList:{}}},computed:{},methods:{EXPORT_DATA:function(t){var e=new l.Workbook,a=e.addWorksheet("Projects");(0,m.V)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){u()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},FETCH_INSP_RECORD:function(){var t=this,e=this.$route.params.id_tag;this.isLoading=!0,(0,s.p)({method:"get",url:"/ExInspectionRecord/get-ex-insp-record-by-id-info?id="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.inspRecordList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_RECORD:function(t){var e=this;t.data.id_info=this.$route.params.id_tag,t.data.id=0,t.data.is_active=!0,t.data.inspection_date&&(t.data.inspection_date=c()(t.data.inspection_date).format("L")),(0,s.p)({method:"post",url:"/ExInspectionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&e.FETCH_INSP_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;t.data.inspection_date&&(t.data.inspection_date=c()(t.data.inspection_date).format("L")),(0,s.p)({method:"put",url:"/ExInspectionRecord/"+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&e.FETCH_INSP_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,s.p)({method:"delete",url:"/ExInspectionRecord/delete-ex-insp-record?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_INSP_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},ON_INIT_NEW_ROW:function(t){t.data.is_d_type=!1,t.data.is_c_type=!1,t.data.is_v_type=!1,t.data.is_initial=!1,t.data.is_periodic=!1,t.data.is_sample=!1},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},h=D;var g=a(81656),f=(0,g.A)(h,o,r,!1,null,"75bed8ab",null);const x=f.exports,E={name:"inspection-record",components:{ViewFR:x},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0}},computed:{},methods:{}},R=E;var w=(0,g.A)(R,n,i,!1,null,"d06c6be0",null);const C=w.exports}}]);
//# sourceMappingURL=4191.a76509f4.js.map