"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[7807],{15422:(t,e,i)=>{i.d(e,{A:()=>c});var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"center-box"},[i("div",{staticClass:"page-content-message-wrapper"},[i("i",{staticClass:"las la-search"}),i("span",[t._v(" Select inspection record "),i("br"),t._v(" to view information")])])])])}];const o={name:"Select-Inspection-Record"},s=o;var r=i(81656),l=(0,r.A)(s,n,a,!1,null,"16557d15",null);const c=l.exports},47330:(t,e,i)=>{i.d(e,{A:()=>m});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"inspection-record-panel",class:[0==t.panelHiding?"inspection-record-panel":"inspection-record-panel-hide"]},[1==t.panelHiding?i("div",{staticClass:"insp-panel-header"},[i("span",[t._v("Inspection Record")])]):t._e(),0==t.panelHiding?i("v-ons-list",[i("v-ons-list-header",[t._v("Inspection Record")]),t._l(t.inspectionList,(function(e){return i("v-ons-list-item",{key:e.id_inspection_record,staticStyle:{cursor:"pointer"},attrs:{tappable:"",id:[e.id_inspection_record]},on:{click:function(i){return t.VIEW_ITEM(e)}}},[i("div",{staticClass:"center"},[i("span",{staticClass:"date",staticStyle:{"margin-top":"5px"}},[t._v(t._s(t.DATE_FORMAT(e.inspection_date)))])]),i("div",{staticClass:"right"},[i("v-ons-toolbar-button",[i("i",{staticClass:"las la-search"})])],1)])}))],2):t._e(),i("div",{staticClass:"fixed-panel"},[i("v-ons-toolbar-button",{staticClass:"item bottom-btn",on:{click:function(e){return t.SHOW_HIDE_PANEL()}}},[0==t.panelHiding?i("i",{staticClass:"las la-caret-square-left"}):t._e(),1==t.panelHiding?i("i",{staticClass:"las la-caret-square-right"}):t._e(),i("span",[t._v("Hide List")])])],1)],1)},a=[],o=i(41034),s=(i(59581),i(5086),i(88704)),r=i(49148),l=i.n(r);const c={name:"inspection-record-panel",data:function(){return{isLoading:!1,inspectionList:[],panelHiding:!1,current_view:{}}},created:function(){var t=this;1==this.$store.state.status.server&&this.FETCH_DATA("/ExInspectionRecord/get-ex-insp-record-by-id-info?id=".concat(this.$route.params.id_tag),null,(function(e){t.inspectionList=e.map((function(t){return(0,o.A)((0,o.A)({},t),{},{id_inspection_record:t.id})}))}))},watch:{$route:function(){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),this.current_view.id_inspection_record=""}},methods:{FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,s.p)({method:"get",url:"/ExInspectionRecord/get-ex-insp-record-by-id-info?id="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(console.log("==> SUCCESS: Inspection Record"),t.inspectionList=e.data.map((function(t){return(0,o.A)((0,o.A)({},t),{},{id_inspection_record:t.id})})),console.log(t.inspectionList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DATE_FORMAT:function(t){return l()(t).format("DD MMM yyyy")},SHOW_HIDE_PANEL:function(){1==this.panelHiding?this.panelHiding=!1:this.panelHiding=!0,this.$emit("showHidePanel")},VIEW_ITEM:function(t){this.current_view.id_inspection_record&&document.getElementById(this.current_view.id_inspection_record).classList.remove("active"),console.log("==> VIEW: Inspection Record Item"),console.log(t),this.$emit("viewItem",t),document.getElementById(t.id_inspection_record).classList.add("active"),this.current_view.id_inspection_record=t.id_inspection_record},FETCH_DATA:function(t,e,i){var n=this;this.isLoading=!0,(0,s.p)({method:"get",url:t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(i&&"function"===typeof i?i(t.data):n.$set(n,e,t.data))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){n.isLoading=!1}))}}},d=c;var p=i(81656),u=(0,p.A)(d,n,a,!1,null,"43db3339",null);const m=u.exports},67807:(t,e,i)=>{i.r(e),i.d(e,{default:()=>E});var n=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"page-container"},[n("InspectionRecordPanel",{on:{showHidePanel:e.SHOW_HIDE_PANEL,viewItem:e.VIEW_ITEM}}),""!=this.id_item?n("div",{staticClass:"list-page"},[n("div",[n("div",{staticClass:"table-wrapper"},[n("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":e.testList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!1,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"row-inserted":e.ADD_NEW_FILE,"row-removed":e.DELETE_DOC,"init-new-row":function(){t.file=[],t.isEdit=!1},"editing-start":function(e){t.file=[],t.isEdit=!0,t.dataFileTemp=e},"row-removing":function(){t.isEdit=!1},saved:e.SAVE},scopedSlots:e._u([{key:"overview-template",fn:function(t){var e=t.data;return[n("img",{staticClass:"cell-picture",attrs:{src:e.data.closeup?e.data.closeup:"/img/default_image.png",alt:"Picture"}})]}},{key:"overview-edit-template",fn:function(){return[n("div",{staticClass:"widget-container"},[n("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":e.VALUE_CHANGE}})],1)]},proxy:!0},{key:"close-up-template",fn:function(t){var e=t.data;return[n("img",{staticClass:"cell-picture",attrs:{src:e.data.closeup?e.data.closeup:"/img/default_image.png",alt:"Picture"}})]}},{key:"close-up-edit-template",fn:function(){return[n("div",{staticClass:"widget-container"},[n("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":e.VALUE_CHANGE}})],1)]},proxy:!0},{key:"insertCellTemplate",fn:function(){return[n("div",{staticClass:"widget-container"},[n("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",visible:!0},on:{"value-changed":e.VALUE_CHANGE}})],1)]},proxy:!0}],null,!1,4098839886)},[n("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"popup"}},[n("DxPopup",{attrs:{"show-title":!0,width:750,height:600,title:"Attachment"}}),n("DxForm",{attrs:{"label-location":"top"}},[n("DxItem",{attrs:{"col-count":3,"col-span":2,"row-count":1,"item-type":"group"}},[n("DxItem",{attrs:{"data-field":"id_item","col-span":1}}),n("DxItem",{attrs:{"data-field":"checklist_item","col-span":1}}),n("DxItem",{attrs:{"data-field":"finding_status","col-span":1}}),n("DxItem",{attrs:{"data-field":"overview_img","col-span":3}}),n("DxItem",{attrs:{"data-field":"close_up_img","col-span":3}}),n("DxItem",{attrs:{"data-field":"findings","col-span":3}}),n("DxItem",{attrs:{"data-field":"recommendation","col-span":3}}),n("DxItem",{attrs:{"data-field":"deenergize","col-span":1}}),n("DxItem",{attrs:{"data-field":"quick_fix","col-span":1}}),n("DxItem",{attrs:{"data-field":"interim_measure","col-span":1}}),n("DxItem",{attrs:{"data-field":"interim_measure_validity","col-span":1}}),n("DxItem",{attrs:{"data-field":"finding_compliance_status","col-span":1}})],1)],1)],1),n("DxFilterRow",{attrs:{visible:!1}}),n("DxHeaderFilter",{attrs:{visible:!1}}),n("DxSelection",{attrs:{mode:"single"}}),n("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),n("DxColumn",{attrs:{width:60,alignment:"center",caption:"Item","data-field":"id_item"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Checklist Item","data-field":"checklist_item"}}),n("DxColumn",{attrs:{width:180,alignment:"center",caption:"Overview","cell-template":"overview-template","edit-cell-template":"overview-edit-template","data-field":"overview_img"}}),n("DxColumn",{attrs:{width:180,alignment:"center",caption:"Close-up","cell-template":"close-up-template","edit-cell-template":"close-up-edit-template","data-field":"close_up_img"}}),n("DxColumn",{attrs:{width:160,alignment:"center",caption:"Findings","data-field":"findings"}}),n("DxColumn",{attrs:{width:160,alignment:"center",caption:"Recommendation","data-field":"recommendation"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Finding Status (Open/Close)","data-field":"finding_status"}},[n("DxLookup",{attrs:{"data-source":e.platform,"display-expr":"code_name","value-expr":"id"}})],1),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Deenergize","data-field":"deenergize"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Quick Fix","data-field":"quick_fix"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Interim Measure","data-field":"interim_measure"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Interim Measure Validity","data-field":"interim_measure_validity"}}),n("DxColumn",{attrs:{width:80,alignment:"center",caption:"Finding Compliance Status","data-field":"finding_compliance_status"}}),n("DxScrolling",{attrs:{mode:"standard"}}),n("DxPaging",{attrs:{"page-size":10,"page-index":0}}),n("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),n("DxExport",{attrs:{enabled:!1}})],1)],1)])]):e._e(),""==this.id_item?n("SelectInspRecord"):e._e()],1)},a=[],o=(i(5086),i(88704)),s=i(49148),r=i.n(s),l=i(47330),c=i(15422),d=i(47093),p=i(10788),u=i.n(p),m=i(16164),g=i(83954),_=i(68477),f=i(63869);const h={name:"piclog-record",components:{InspectionRecordPanel:l.A,SelectInspRecord:c.A,DxDataGrid:f.DxDataGrid,DxExport:f.DxExport,DxPager:f.DxPager,DxPaging:f.DxPaging,DxScrolling:f.DxScrolling,DxColumn:f.DxColumn,DxFilterRow:f.DxFilterRow,DxHeaderFilter:f.DxHeaderFilter,DxSelection:f.DxSelection,DxEditing:f.DxEditing,DxPopup:f.DxPopup,DxForm:f.DxForm,DxItem:g.DxItem,DxFileUploader:_.DxFileUploader,DxLookup:f.DxLookup},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"PICTURE LOG",subpageInnerName:null}),1==this.$store.state.status.server&&(this.testList=[{id:1,id_item:1,inspection_date:"20 Dec 2023",campaign:"Routine Inspection",checklist_status:"P6",picture_log_status:"P6",integrity_status:"P6",note:"Good condition"}])},data:function(){return{id_item:0,file:[],gridRefName:"grid-library",fileNameInputOptions:{placeholder:"File Name"},dataFileTemp:"",isEdit:!1,pagePanelHiding:!1}},computed:{},methods:{EXPORT_DATA:function(t){var e=new d.Workbook,i=e.addWorksheet("Projects");(0,m.V)({worksheet:i,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){u()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},VIEW_ITEM:function(t){console.log("parent triggered: "),console.log(t),this.drawingList=[],this.id_item=t.id_item},FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,o.p)({method:"get",url:"/PipingInspectionRecord/get-piping-ir-by-id-line?id_line="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){console.log("insp record:"),console.log(e),200==e.status&&e.data&&(console.log("success"),t.inspRecordList=e.data,console.log(t.inspRecordList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_RECORD:function(t){var e=this;t.data.id_line=this.$route.params.id_tag,t.data.id=0,t.data.is_active=!0,t.data.inspection_date=r()(t.data.inspection_date).format("L"),console.log(t.data),(0,o.p)({method:"post",url:"/PipingInspectionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&(console.log("create success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;t.data.inspection_date=r()(t.data.inspection_date).format("L"),console.log(t.data),(0,o.p)({method:"put",url:"/PipingInspectionRecord/"+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&(console.log("update success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,o.p)({method:"delete",url:"/PipingInspectionRecord/"+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&(console.log("delete success"),e.FETCH_INSP_RECORD())}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},SHOW_HIDE_PANEL:function(){this.pagePanelHiding=!this.pagePanelHiding}}},D=h;var x=i(81656),v=(0,x.A)(D,n,a,!1,null,"055d1b44",null);const E=v.exports}}]);
//# sourceMappingURL=7807.98c264e5.js.map