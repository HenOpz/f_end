"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[4988],{84988:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"button-container"},[a("button",{staticClass:"export-btn",on:{click:e.SAP}},[e._v(" APPROVAL ")])]),a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":e.testList,selection:e.selectionOptions,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0},on:{selectionChanged:e.onSelectionChanged}},[a("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!1,"use-icons":!0,mode:"popup"}}),a("DxFilterRow",{attrs:{visible:!1}}),a("DxHeaderFilter",{attrs:{visible:!1}}),a("DxSelection",{attrs:{mode:"multiple"}}),a("DxColumn",{attrs:{"data-field":"id_item",caption:"Item",width:70,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"temporary_number",caption:"Temporary Number",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"platform",caption:"Platform",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"asset_type",caption:"Asset Type",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"tag_number",caption:"Tag Number",width:120,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"moc_number",caption:"MOC Number",width:120,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"repair_code",caption:"Repair Code",width:120,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"due_date",caption:"Due Date",width:100,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"repair_status",caption:"Repair Status",width:100,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"severity",caption:"Severity",width:80,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"description",caption:"Description","min-width":100,alignment:"center"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},i=[],o=(a(59581),a(5086),a(88704)),r=a(49148),s=a.n(r),l=a(47093),d=a(10788),c=a.n(d),p=a(16164),u=a(63869);const m={name:"inspection-record",components:{DxDataGrid:u.DxDataGrid,DxSearchPanel:u.DxSearchPanel,DxPaging:u.DxPaging,DxPager:u.DxPager,DxScrolling:u.DxScrolling,DxColumn:u.DxColumn,DxExport:u.DxExport,DxToolbar:u.DxToolbar,DxHeaderFilter:u.DxHeaderFilter,DxSelection:u.DxSelection,DxItem:u.DxItem,DxEditing:u.DxEditing,DxFilterRow:u.DxFilterRow},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"PENDING APPROVAL",subpageInnerName:null}),1==this.$store.state.status.server&&(this.testList=[{id:1,id_item:1,temporary_number:"TEMP-23010",platform:"MDPP",asset_type:"Piping",tag_number:"2-GC-J4N-1002",moc_number:"MOC OFF_23-024",repair_code:"Welding Patch",due_date:"01 Feb 2024",repair_status:"Pending",severity:"P3",description:"-"},{id:2,id_item:2,temporary_number:"TEMP-23009",platform:"MDPP",asset_type:"Flowline",tag_number:"MDPP-03",moc_number:"MOC OFF_23-023",repair_code:"Other",due_date:"01 Jan 2024",repair_status:"Pending",severity:"P4",description:"-"},{id:3,id_item:3,temporary_number:"TEMP-23008",platform:"MDPP",asset_type:"Pressure Vessel",tag_number:"V-01111",moc_number:"MOC OFF_23-018",repair_code:"Other",due_date:"01 Dec 2023",repair_status:"Completed",severity:"P3",description:"-"},{id:4,id_item:4,temporary_number:"TEMP-23007",platform:"MDPP",asset_type:"Flare",tag_number:"-",moc_number:"MOC OFF_23-027",repair_code:"Other",due_date:"01 Jan 2025",repair_status:"Pending",severity:"P3",description:"-"}])},data:function(){return{testList:null,inspRecordList:{},campaigeList:{},statusList:[{id:1,code:"Fench"},{id:2,code:"Piping"},{id:3,code:"Pressure Vessel"},{id:4,code:"Bridge"},{id:5,code:"Lifting Cane"}],dataGridAttributes:{class:"data-grid-style"},ExpDateInputOptions:{placeholder:"Select date"},GPIDateInputOptions:{placeholder:"Select date"},GPINoInputOptions:{placeholder:"Enter GPI No."},MainWorkCtrInputOptions:{placeholder:"Enter main workCtr"},SeverityInputOptions:{placeholder:"Enter severity"},platformNoInputOptions:{placeholder:"Enter platform"},conmmentInputOptions:{placeholder:"Enter remark"},tagNoInputOptions:{placeholder:"Enter tag No."},actionInputOptions:{placeholder:"Enter action"},selected_line:[],selectedIds:[],selectionOptions:{mode:"multiple",onSelectionChanged:this.onSelectionChanged}}},computed:{},methods:{onSelectionChanged:function(e){this.selectedIds=e.selectedRowsData.map((function(e){return e.id}));var t=document.querySelector(".export-btn");0===this.selectedIds.length?t.classList.remove("selected"):t.classList.add("selected")},exportData:function(){console.log("Exporting data...")},SAP:function(){0!==this.selectedIds.length?console.log("SAP SUBMIT"):alert("Please select any row")},EXPORT_DATA:function(e){var t=new l.Workbook,a=t.addWorksheet("Projects");(0,p.V)({worksheet:a,component:e.component}).then((function(){t.xlsx.writeBuffer().then((function(e){c()(new Blob([e],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),e.cancel=!0},FETCH_INSP_RECORD:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id_tag;(0,o.p)({method:"get",url:"/PipingInspectionRecord/get-piping-ir-by-id-line?id_line="+t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("insp record:"),console.log(t),200==t.status&&t.data&&(console.log("success"),e.inspRecordList=t.data,console.log(e.inspRecordList))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},CREATE_RECORD:function(e){var t=this;e.data.id_line=this.$route.params.id_tag,e.data.id=0,e.data.is_active=!0,e.data.inspection_date=s()(e.data.inspection_date).format("L"),console.log(e.data),(0,o.p)({method:"post",url:"/PipingInspectionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.data}).then((function(e){201==e.status&&(console.log("create success"),t.FETCH_INSP_RECORD())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(e){var t=this;e.data.inspection_date=s()(e.data.inspection_date).format("L"),console.log(e.data),(0,o.p)({method:"put",url:"/PipingInspectionRecord/"+e.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.data}).then((function(e){204==e.status&&(console.log("update success"),t.FETCH_INSP_RECORD())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},DELETE_RECORD:function(e){var t=this;(0,o.p)({method:"delete",url:"/PipingInspectionRecord/"+e.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&(console.log("delete success"),t.FETCH_INSP_RECORD())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))}}},g=m;var h=a(81656),D=(0,h.A)(g,n,i,!1,null,"1e8057c7",null);const _=D.exports}}]);
//# sourceMappingURL=4988.e7a150ba.js.map