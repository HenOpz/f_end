"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[786],{10786:(t,e,a)=>{a.r(e),a.d(e,{default:()=>w});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.current_view?a("ViewFR",{on:{currentView:function(e,a){return t.SET_EDIT(e,a)}}}):t._e()],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-tabs-buttons",attrs:{fill:""}},[a("button",{class:1===t.active_tab?"active":"",on:{click:function(e){return t.UPDATE_TAB(1)}}},[t._v(" Onshore ")]),a("button",{class:2===t.active_tab?"active":"",on:{click:function(e){return t.UPDATE_TAB(2)}}},[t._v(" Offshore ")])]),a("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.failureApprProcessList,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"row-inserted":t.CREATE_RECORD,"row-updated":t.UPDATE_RECORD,"row-removed":t.DELETE_RECORD}},[a("DxEditing",{attrs:{"allow-updating":!0,"allow-deleting":!0,"allow-adding":!0,"use-icons":!0,mode:"row"}}),a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxColumn",{attrs:{"data-field":"seq",caption:"Seq.",width:100,alignment:"center","editor-options":{placeholder:"Seq."}}}),a("DxColumn",{attrs:{"data-field":"id_user",caption:"Account","min-width":120,alignment:"left","editor-options":{placeholder:"Select Account"}}},[a("DxLookup",{attrs:{"data-source":t.userList,"display-expr":"username","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"authorized_name",caption:"Permission Description","min-width":120,alignment:"left","editor-options":{placeholder:"Permission Description"}}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},n=[],s=(a(5086),a(88704)),c=a(47093),u=a(10788),l=a.n(u),d=a(16164),p=a(63869);const h={name:"failure-user-permission",components:{DxDataGrid:p.DxDataGrid,DxSearchPanel:p.DxSearchPanel,DxPaging:p.DxPaging,DxPager:p.DxPager,DxScrolling:p.DxScrolling,DxColumn:p.DxColumn,DxExport:p.DxExport,DxHeaderFilter:p.DxHeaderFilter,DxEditing:p.DxEditing,DxFilterRow:p.DxFilterRow,DxLookup:p.DxLookup},created:function(){var t=this;this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"USER PERMISSION",subpageInnerName:null}),1==this.$store.state.status.server&&this.FETCH_DATA("/User/get-active-user-list",null,(function(e){t.userList=e,t.FETCH_DATA("/FailureRecordAuth/failure-record-by-id-work-group?id_work_group=".concat(t.active_tab),"failureApprProcessList")}))},data:function(){return{active_tab:1,failureApprProcessList:[],userList:[]}},computed:{},methods:{UPDATE_TAB:function(t){this.active_tab=t,this.failureApprProcessList=[],this.FETCH_DATA("/FailureRecordAuth/failure-record-by-id-work-group?id_work_group=".concat(t),"failureApprProcessList")},EXPORT_DATA:function(t){var e=new c.Workbook,a=e.addWorksheet("Projects");(0,d.V)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){l()(new Blob([t],{type:"application/octet-stream"}),"SHORT-TERM-ACTION.xlsx")}))})),t.cancel=!0},CREATE_RECORD:function(t){var e=this;t.data.id=0,t.data.is_active=!0,t.data.id_work_group=this.active_tab,(0,s.p)({method:"post",url:"/FailureRecordAuth/add-failure-record-auth",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){201==t.status&&e.FETCH_DATA("/FailureRecordAuth/failure-record-by-id-work-group?id_work_group=".concat(e.active_tab),"failureApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(t){var e=this;(0,s.p)({method:"put",url:"/FailureRecordAuth/edit-failure-record-auth?id="+t.data.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.data}).then((function(t){204==t.status&&e.FETCH_DATA("/FailureRecordAuth/failure-record-by-id-work-group?id_work_group=".concat(e.active_tab),"failureApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(t){var e=this;(0,s.p)({method:"delete",url:"FailureRecordAuth/delete-failure-record-auth?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_DATA("/FailureRecordAuth/failure-record-by-id-work-group?id_work_group=".concat(e.active_tab),"failureApprProcessList")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_DATA:function(t,e,a){var r=this;this.isLoading=!0,(0,s.p)({method:"get",url:t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(a&&"function"===typeof a?a(t.data):r.$set(r,e,t.data))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){r.isLoading=!1}))}}},f=h;var D=a(81656),g=(0,D.A)(f,o,n,!1,null,"1463852c",null);const _=g.exports,A={name:"inspection-record",components:{ViewFR:_},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:0}},computed:{},methods:{SET_EDIT:function(t,e){this.current_view=t,e&&(this.edit_row=e)}}},E=A;var m=(0,D.A)(E,r,i,!1,null,"1021cafe",null);const w=m.exports}}]);
//# sourceMappingURL=786.998c5cd4.js.map