"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[9146],{59146:(e,t,a)=>{a.r(t),a.d(t,{default:()=>me});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[0==e.current_view?a("ViewPage",{on:{currentView:function(t,a){return e.SET_EDIT(t,a)}}}):e._e(),1==e.current_view?a("AddPage",{on:{currentView:function(t,a){return e.SET_EDIT(t,a)}}}):e._e(),2==e.current_view?a("EditPage",{attrs:{id_record:e.edit_row.id},on:{currentView:function(t){return e.current_view=t}}}):e._e(),3==e.current_view?a("ReportPage",{attrs:{data_row:e.edit_row},on:{currentView:function(t){return e.current_view=t}}}):e._e()],1)},s=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","data-source":e.gpiRecordList,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"column-hiding-enabled":!1,"word-wrap-enabled":!0,"column-min-width":100,"column-auto-width":!0},on:{"init-new-row":function(t){return e.SET_CURRENT_VIEW(1)},"cell-prepared":e.onCellPrepared},scopedSlots:e._u([{key:"action-cell-template",fn:function(t){var i=t.data;return[a("div",{staticClass:"action-wrapper"},[a("div",{on:{click:function(t){return e.SET_CURRENT_VIEW(3,i.data)}}},[a("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/pdf-file-svg.svg"}})]),a("div",{on:{click:function(t){return e.SET_CURRENT_VIEW(2,i.data)}}},[a("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),a("div",{on:{click:function(t){return e.DELETE_RECORD(i)}}},[a("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})])])]}},{key:"masterDetailTemplate",fn:function(t){var i=t.data;return[a("div",[e._v(" GPI Number: "+e._s(i.data.gpi_number)),a("br"),e._v(" Main Component: "+e._s(i.data.main_component_free_text)),a("br"),e._v(" Damage Mechanism: "+e._s(e.GET_DAMAGE(i.data.id_damage_mechanism))),a("br"),e._v(" Type of Repair: "+e._s(e.GET_REPAIR_TYPE(i.data.id_repair))),a("br"),e._v(" Repair Description: "+e._s(i.data.repair_type_free_text)),a("br"),e._v(" Findings: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.findings}}),e._v(" Recommendation: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.recommendation}})])]}}])},[a("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!0,"use-icons":!0,mode:"popup"}}),a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxColumn",{attrs:{"data-field":"id_platform",caption:"Platform",alignment:"center",width:50}},[a("DxLookup",{attrs:{"data-source":e.platformList,"display-expr":"code_name","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"asset_type",caption:"Asset Type",alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"tag_no",caption:"Tag Number",alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"location_deck",caption:"Location | Deck",alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"gpi_date",caption:"GPI Date","data-type":"date",format:"dd MMM yyyy",alignment:"center",width:150}}),a("DxColumn",{attrs:{"data-field":"expected_finish_date",caption:"Expected Finish Date","data-type":"date",format:"dd MMM yyyy",alignment:"center",width:150}}),a("DxColumn",{attrs:{"data-field":"id_main_workctr",caption:"Main WorkCtr",alignment:"center"}},[a("DxLookup",{attrs:{"data-source":e.mainWorkCtrList,"display-expr":"code","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"id_severity",caption:"Severity",alignment:"center"}},[a("DxLookup",{attrs:{"data-source":e.severityList,"display-expr":"status","value-expr":"id"}})],1),a("DxColumn",{attrs:{width:80,alignment:"center","cell-template":"action-cell-template"}}),a("DxMasterDetail",{attrs:{enabled:!0,template:"masterDetailTemplate"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[5,10,20],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},n=[],o=(a(5086),a(17),a(88704)),l=a(47093),c=a(10788),d=a.n(c),p=a(16164),u=a(63869);const _={name:"gpi-record",components:{DxDataGrid:u.DxDataGrid,DxSearchPanel:u.DxSearchPanel,DxPaging:u.DxPaging,DxPager:u.DxPager,DxScrolling:u.DxScrolling,DxColumn:u.DxColumn,DxExport:u.DxExport,DxEditing:u.DxEditing,DxLookup:u.DxLookup,DxFilterRow:u.DxFilterRow,DxHeaderFilter:u.DxHeaderFilter,DxMasterDetail:u.DxMasterDetail},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI RECORD",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_DATA("/Md/get-md-gpi-repair-type-list","repairTypeList"),this.FETCH_DATA("/Md/get-md-sap-main-work-ctr-list","mainWorkCtrList"),this.FETCH_GPI_RECORD())},data:function(){return{platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],repairTypeList:[],mainWorkCtrList:[],gpiRecordList:{},dataGridAttributes:{class:"data-grid-style"}}},computed:{},methods:{EXPORT_DATA:function(e){var t=new l.Workbook,a=t.addWorksheet("Projects");(0,p.V)({worksheet:a,component:e.component}).then((function(){t.xlsx.writeBuffer().then((function(e){d()(new Blob([e],{type:"application/octet-stream"}),"GPI-RECORD.xlsx")}))})),e.cancel=!0},FETCH_GPI_RECORD:function(){var e=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.gpiRecordList=t.data,console.log(e.gpiRecordList))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},DELETE_RECORD:function(e){var t=this;(0,o.p)({method:"delete",url:"/GpiRecord/delete-gpi-record?id="+e.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_GPI_RECORD()}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},onCellPrepared:function(e){"data"===e.rowType&&"id_severity"===e.column.dataField&&(e.cellElement.style.backgroundColor=this.GET_STATUS_COLOR(e.data.id_severity),e.cellElement.style.color="#fff",e.cellElement.style.textTransform="uppercase"),"data"===e.rowType&&"id_severity"===e.column.dataField&&(e.cellElement.style.backgroundColor=this.GET_STATUS_COLOR(e.data.id_severity),e.cellElement.style.color="#fff",e.cellElement.style.textTransform="uppercase")},GET_STATUS_COLOR:function(e){if(e){var t=this.severityList.filter((function(t){return t.id==e}));return t[0].color_code}return"#fff"},GET_DAMAGE:function(e){if(e){var t=this.damageMechanismList.filter((function(t){return t.id==e}));return t[0].code}return"-"},GET_REPAIR_TYPE:function(e){if(e){var t=this.typeOfRepairList.filter((function(t){return t.id==e}));return t[0].code}return"-"},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},FETCH_DATA:function(e,t){var a=this;this.isLoading=!0,(0,o.p)({method:"get",url:e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&a.$set(a,t,e.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){a.isLoading=!1}))}}},m=_;var g=a(81656),f=(0,g.A)(m,r,n,!1,null,"3a8542bc",null);const h=f.exports;var v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h3",{staticStyle:{"grid-column":"span 2","margin-top":"0","margin-bottom":"0"}},[e._v("New GPI Record")]),a("div",{staticClass:"input-wrapper"},[e._m(0),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.platformList,"value-expr":"id","display-expr":"code_name",placeholder:"Select Platform"},model:{value:e.gpiRecordList.id_platform,callback:function(t){e.$set(e.gpiRecordList,"id_platform",t)},expression:"gpiRecordList.id_platform"}})],1)]),a("div",{staticClass:"input-wrapper"},[e._m(1),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.assetTypeList,"value-expr":"asset_type","display-expr":"asset_type",value:e.gpiRecordList.asset_type,placeholder:"Select Asset Type","accept-custom-value":!0},on:{customItemCreating:function(t){return e.INSERT_ITEM_SELECT_BOX(t,e.assetTypeList)}},model:{value:e.gpiRecordList.asset_type,callback:function(t){e.$set(e.gpiRecordList,"asset_type",t)},expression:"gpiRecordList.asset_type"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Tag Number")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Tag Number"},model:{value:e.gpiRecordList.tag_no,callback:function(t){e.$set(e.gpiRecordList,"tag_no",t)},expression:"gpiRecordList.tag_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Location | Deck")]),a("div",{staticClass:"input"},[a("DxSelectBox",{attrs:{items:e.deckList,"value-expr":"code","display-expr":"code",value:e.gpiRecordList.location_deck,"accept-custom-value":!0,placeholder:"Select Location | Deck"},on:{customItemCreating:function(t){return e.INSERT_ITEM_SELECT_BOX(t,e.deckList)}},model:{value:e.gpiRecordList.location_deck,callback:function(t){e.$set(e.gpiRecordList,"location_deck",t)},expression:"gpiRecordList.location_deck"}})],1)]),a("div",{staticClass:"input-wrapper"},[e._m(2),a("div",{staticClass:"input"},[a("DxDateBox",{attrs:{placeholder:"Select Date","display-format":"dd MMM yyyy"},model:{value:e.gpiRecordList.gpi_date,callback:function(t){e.$set(e.gpiRecordList,"gpi_date",t)},expression:"gpiRecordList.gpi_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main Component Description")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Main Component Description"},model:{value:e.gpiRecordList.main_component_free_text,callback:function(t){e.$set(e.gpiRecordList,"main_component_free_text",t)},expression:"gpiRecordList.main_component_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Mechanism")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.damageMechanismList,"value-expr":"code","display-expr":"code",value:e.gpiRecordList.damage_mechanism_free_text,"accept-custom-value":!0,placeholder:"Select Damage Mechanism"},on:{customItemCreating:function(t){return e.INSERT_ITEM_SELECT_BOX(t,e.damageMechanismList)}},model:{value:e.gpiRecordList.damage_mechanism_free_text,callback:function(t){e.$set(e.gpiRecordList,"damage_mechanism_free_text",t)},expression:"gpiRecordList.damage_mechanism_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Severity")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.severityList,"value-expr":"id","display-expr":"status",placeholder:"Enter Severity"},model:{value:e.gpiRecordList.id_severity,callback:function(t){e.$set(e.gpiRecordList,"id_severity",t)},expression:"gpiRecordList.id_severity"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Type of Repair")]),a("div",{staticClass:"input"},[a("DxSelectBox",{attrs:{items:e.typeOfRepairList,"value-expr":"id","display-expr":"code",placeholder:"Select Type of Repair"},model:{value:e.gpiRecordList.id_repair,callback:function(t){e.$set(e.gpiRecordList,"id_repair",t)},expression:"gpiRecordList.id_repair"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Repair Description")]),a("div",{staticClass:"input"},[a("DxSelectBox",{attrs:{items:e.repairTypeList,"value-expr":"code","display-expr":"code",value:e.gpiRecordList.repair_type_free_text,"accept-custom-value":!0,placeholder:"Select Repair Type"},on:{customItemCreating:function(t){return e.INSERT_ITEM_SELECT_BOX(t,e.repairTypeList)}},model:{value:e.gpiRecordList.repair_type_free_text,callback:function(t){e.$set(e.gpiRecordList,"repair_type_free_text",t)},expression:"gpiRecordList.repair_type_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.mainWorkCtrList,"value-expr":"id","display-expr":"code",placeholder:"Select Main WorkCtr"},model:{value:e.gpiRecordList.id_main_workctr,callback:function(t){e.$set(e.gpiRecordList,"id_main_workctr",t)},expression:"gpiRecordList.id_main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Expected Finish Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{placeholder:"Select Date","display-format":"dd MMM yyyy"},model:{value:e.gpiRecordList.expected_finish_date,callback:function(t){e.$set(e.gpiRecordList,"expected_finish_date",t)},expression:"gpiRecordList.expected_finish_date"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Findings")]),a("div",{staticClass:"input"},[a("dxTextArea",{attrs:{height:80,"auto-resize-enabled":!0,placeholder:"Enter Findings"},model:{value:e.gpiRecordList.findings,callback:function(t){e.$set(e.gpiRecordList,"findings",t)},expression:"gpiRecordList.findings"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Recommendation")]),a("div",{staticClass:"input"},[a("dxTextArea",{attrs:{height:80,"auto-resize-enabled":!0,placeholder:"Enter Recommendation"},model:{value:e.gpiRecordList.recommendation,callback:function(t){e.$set(e.gpiRecordList,"recommendation",t)},expression:"gpiRecordList.recommendation"}})],1)]),a("button",{staticClass:"create",on:{click:e.CREATE_RECORD}},[e._v("Create")]),a("button",{on:{click:function(t){return e.SET_CURRENT_VIEW(0)}}},[e._v("Cancel")]),a("br")])])])},x=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("Platform")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("Asset Type")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("GPI Date")]),a("span",[e._v("*")])])}],C=a(59258),E=(a(59581),a(49148)),T=a.n(E),R=a(10100),L=a.n(R),D=a(57723),y=a.n(D),b=a(17768),S=a.n(b),A=a(14817),w=a.n(A),H=a(72499);const k=H.q,I={name:"gpi-record",components:{DxSelectBox:L(),DxTextBox:y(),DxDateBox:S(),DxTextArea:w()},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI RECORD",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_DATA("/Md/get-md-gpi-repair-type-list","repairTypeList"),this.FETCH_DATA("/Md/get-md-sap-main-work-ctr-list","mainWorkCtrList"),this.FETCH_DATA("/Md/get-md-gpi-location-deck-list","deckList"))},data:function(){return{platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],repairTypeList:[],mainWorkCtrList:[],deckList:[],gpiRecordList:{id:0,is_active:!0,id_platform:null,id_main_workctr:null,id_repair:null,id_repair_type:null,id_severity:null,tag_no:null,gpi_date:null,expected_finish_date:null,findings:null,recommendation:null}}},computed:{},methods:{CREATE_RECORD:function(){var e=this;this.gpiRecordList.gpi_date=this.gpiRecordList.gpi_date?T()(this.gpiRecordList.gpi_date).format("L"):"",this.gpiRecordList.expected_finish_date=this.gpiRecordList.expected_finish_date?T()(this.gpiRecordList.expected_finish_date).format("L"):"",(0,o.p)({method:"post",url:"/GpiRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.gpiRecordList}).then((function(t){201==t.status&&e.SET_CURRENT_VIEW(2,t.data)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},FETCH_DATA:function(e,t){var a=this;this.isLoading=!0,(0,o.p)({method:"get",url:e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&a.$set(a,t,e.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){a.isLoading=!1}))},INSERT_ITEM_SELECT_BOX:function(e,t){if(e.text){var a={id:t.length>0?Math.max.apply(Math,(0,C.A)(t.map((function(e){return e.id}))))+1:1,code:e.text,asset_type:e.text},i=new k({store:{data:t,type:"array",key:"ID"}});e.customItem=i.store().insert(a).then((function(){return i.load()})).then((function(){return a}))["catch"]((function(e){throw e}))}else e.customItem=null}}},O=I;var M=(0,g.A)(O,v,x,!1,null,"298fb831",null);const N=M.exports;var F=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"page-container"},[i("div",{staticClass:"action-bar"},[i("button",{staticClass:"back",on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[i("i",{staticClass:"fas fa-chevron-left"}),t._v(" BACK ")]),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"switch"},[i("div",[i("v-ons-switch",{staticStyle:{padding:"0 !important",border:"0"},attrs:{"input-id":"switch1"},model:{value:t.btn_state,callback:function(e){t.btn_state=e},expression:"btn_state"}})],1),i("span",[t._v("EDIT MODE")])]),i("button",{staticClass:"submit",on:{click:t.UPDATE_RECORD}},[i("i",{staticClass:"fas fa-save"}),t._v(" SUBMIT ")]),i("button",{staticClass:"delete",on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[i("i",{staticClass:"fas fa-trash-alt"}),t._v(" DELETE")])])]),i("div",{staticClass:"page-section"},[i("div",{staticClass:"table-wrapper"},[i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[t._m(0),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.platformList,"value-expr":"id","display-expr":"code_name",placeholder:"Select Platform",disabled:!t.btn_state},model:{value:t.gpiRecordList.id_platform,callback:function(e){t.$set(t.gpiRecordList,"id_platform",e)},expression:"gpiRecordList.id_platform"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[t._m(1),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.assetTypeList,"value-expr":"asset_type","display-expr":"asset_type",value:t.gpiRecordList.asset_type,placeholder:"Select Asset Type","accept-custom-value":!0,disabled:!t.btn_state},on:{customItemCreating:function(e){return t.INSERT_ITEM_SELECT_BOX(e,t.assetTypeList)}},model:{value:t.gpiRecordList.asset_type,callback:function(e){t.$set(t.gpiRecordList,"asset_type",e)},expression:"gpiRecordList.asset_type"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Tag Number")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Tag Number",disabled:!t.btn_state},model:{value:t.gpiRecordList.tag_no,callback:function(e){t.$set(t.gpiRecordList,"tag_no",e)},expression:"gpiRecordList.tag_no"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Location | Deck")]),i("div",{staticClass:"input"},[i("DxSelectBox",{attrs:{items:t.deckList,"value-expr":"code","display-expr":"code",value:t.gpiRecordList.location_deck,"accept-custom-value":!0,placeholder:"Select Location | Deck",disabled:!t.btn_state},on:{customItemCreating:function(e){return t.INSERT_ITEM_SELECT_BOX(e,t.deckList)}},model:{value:t.gpiRecordList.location_deck,callback:function(e){t.$set(t.gpiRecordList,"location_deck",e)},expression:"gpiRecordList.location_deck"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[t._m(2),i("div",{staticClass:"input"},[i("DxDateBox",{attrs:{type:"date",disabled:!t.btn_state,"display-format":"dd MMM yyyy"},model:{value:t.gpiRecordList.gpi_date,callback:function(e){t.$set(t.gpiRecordList,"gpi_date",e)},expression:"gpiRecordList.gpi_date"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Main Component Description")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Main Component Description",disabled:!t.btn_state},model:{value:t.gpiRecordList.main_component_free_text,callback:function(e){t.$set(t.gpiRecordList,"main_component_free_text",e)},expression:"gpiRecordList.main_component_free_text"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Damage Mechanism")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.damageMechanismList,"value-expr":"code","display-expr":"code",value:t.gpiRecordList.damage_mechanism_free_text,"accept-custom-value":!0,placeholder:"Select Damage Mechanism",disabled:!t.btn_state},on:{customItemCreating:function(e){return t.INSERT_ITEM_SELECT_BOX(e,t.damageMechanismList)}},model:{value:t.gpiRecordList.damage_mechanism_free_text,callback:function(e){t.$set(t.gpiRecordList,"damage_mechanism_free_text",e)},expression:"gpiRecordList.damage_mechanism_free_text"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Severity")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.severityList,"value-expr":"id","display-expr":"status",placeholder:"Select Severity",disabled:!t.btn_state},model:{value:t.gpiRecordList.id_severity,callback:function(e){t.$set(t.gpiRecordList,"id_severity",e)},expression:"gpiRecordList.id_severity"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[t._m(3),i("div",{staticClass:"input"},[i("DxSelectBox",{attrs:{items:t.typeOfRepairList,"value-expr":"id","display-expr":"code",placeholder:"Select Type of Repair",disabled:!t.btn_state},model:{value:t.gpiRecordList.id_repair,callback:function(e){t.$set(t.gpiRecordList,"id_repair",e)},expression:"gpiRecordList.id_repair"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Repair Description")]),i("div",{staticClass:"input"},[i("DxSelectBox",{attrs:{items:t.repairTypeList,"value-expr":"code","display-expr":"code",value:t.gpiRecordList.repair_type_free_text,"accept-custom-value":!0,placeholder:"Select Repair Type",disabled:!t.btn_state},on:{customItemCreating:function(e){return t.INSERT_ITEM_SELECT_BOX(e,t.repairTypeList)}},model:{value:t.gpiRecordList.repair_type_free_text,callback:function(e){t.$set(t.gpiRecordList,"repair_type_free_text",e)},expression:"gpiRecordList.repair_type_free_text"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Main WorkCtr")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.mainWorkCtrList,"value-expr":"id","display-expr":"code",placeholder:"Select Main WorkCtr",disabled:!t.btn_state},model:{value:t.gpiRecordList.id_main_workctr,callback:function(e){t.$set(t.gpiRecordList,"id_main_workctr",e)},expression:"gpiRecordList.id_main_workctr"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{"span-2":""}},[i("span",[t._v("Expected Finish Date")]),i("div",{staticClass:"select"},[i("DxDateBox",{attrs:{placeholder:"Select Date",disabled:!t.btn_state,"display-format":"dd MMM yyyy"},model:{value:t.gpiRecordList.expected_finish_date,callback:function(e){t.$set(t.gpiRecordList,"expected_finish_date",e)},expression:"gpiRecordList.expected_finish_date"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{fill:""}},[i("span",[t._v("Findings")]),i("div",{staticClass:"input"},[i("DxTextArea",{attrs:{height:120,"auto-resize-enabled":!0,disabled:!t.btn_state},model:{value:t.gpiRecordList.findings,callback:function(e){t.$set(t.gpiRecordList,"findings",e)},expression:"gpiRecordList.findings"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{fill:""}},[i("span",[t._v("Recommendation")]),i("div",{staticClass:"input"},[i("DxTextArea",{attrs:{height:120,"auto-resize-enabled":!0,disabled:!t.btn_state},model:{value:t.gpiRecordList.recommendation,callback:function(e){t.$set(t.gpiRecordList,"recommendation",e)},expression:"gpiRecordList.recommendation"}})],1)]),i("div",{attrs:{fill:""}},[t._m(4),i("DxDataGrid",{ref:t.gridRefName,attrs:{id:"data-grid-list","key-expr":"id","data-source":t.library,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"focused-row-enabled":!1,"row-alternation-enabled":!1},on:{"row-inserted":t.ADD_NEW_FILE,"row-removed":t.DELETE_DOC,"init-new-row":function(){e.file=[],e.isEdit=!1},"editing-start":function(t){e.file=[],e.isEdit=!0,e.dataFileTemp=t},"row-removing":function(){e.isEdit=!1},saved:t.SAVE},scopedSlots:t._u([{key:"picture-template",fn:function(e){var a=e.data;return[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("img",{attrs:{src:t.baseURL+a.data.file_path,width:"200",height:"200"}})])]}},{key:"dateHeader",fn:function(){return[i("div",[t._v("Uploaded"),i("br"),t._v("Date")])]},proxy:!0},{key:"insertCellTemplate",fn:function(){return[i("div",{staticClass:"widget-container"},[i("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",accept:"image/*",visible:!0},on:{"value-changed":t.VALUE_CHANGE}})],1)]},proxy:!0},{key:"pathCellTemplate",fn:function(e){var a=e.data;return[i("div",[i("button",{staticClass:"library-btn-download",on:{click:function(e){return t.DOWNLOAD(a.value,a.data.file_name)}}},[i("i",{staticClass:"fa-regular fa-circle-down"}),t._v(" DOWNLOAD")])])]}},{key:"addButton",fn:function(){return[i("DxButton",{attrs:{icon:"las la-plus",hint:"Add"},on:{click:t.ADD_ROW}})]},proxy:!0}])},[i("DxEditing",{attrs:{"allow-deleting":!0,"allow-adding":!0,"allow-updating":!0,"use-icons":!0,"show-borders":!0,mode:"popup"}},[i("DxPopup",{attrs:{"show-title":!0,width:650,height:300,title:"Attachment"}}),i("DxForm",{attrs:{"label-location":"top"}},[i("DxItem",{attrs:{"col-count":2,"col-span":2,"row-count":1,"item-type":"group"}},[i("DxItem",{attrs:{"item-type":"group"}},[i("DxItem",{attrs:{"data-field":"file","col-span":1}})],1),i("DxItem",{attrs:{"item-type":"group"}},[i("DxItem",{attrs:{"data-field":"note","col-span":1}})],1)],1)],1)],1),i("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),i("DxColumn",{attrs:{"data-field":"file_name","allow-adding":!0,"allow-editing":!0,caption:"Picture","editor-options":t.fileNameInputOptions,"sort-order":"desc","min-width":120,"cell-template":"picture-template"}}),i("DxColumn",{attrs:{"data-field":"note",caption:"Note","min-width":120,alignment:"left"}}),i("DxColumn",{attrs:{"data-field":"file_type",caption:"Extension",width:120,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"created_date",caption:"Uploaded Date",width:120,alignment:"center",format:"dd MMM yyyy","data-type":"date","header-cell-template":"dateHeader"}}),i("DxColumn",{attrs:{"data-field":"file_path","cell-template":"pathCellTemplate",caption:"Attachment",width:120,alignment:"center"}}),i("DxToolbar",[i("DxItem",{attrs:{location:"after",template:"addButton"}}),i("DxItem",{attrs:{location:"after",name:"searchPanel"}})],1),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{visible:!1,"show-page-size-selector":!0,"allowed-page-sizes":[5,10,"all"],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1),i("br"),i("div",{staticClass:"action-wrapper",attrs:{fill:""}},[i("button",{staticClass:"submit",on:{click:function(e){t.isShow=1}}},[t._v("APPROVE")]),i("button",{staticClass:"delete"},[t._v("REJECT")])])])])])},P=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("Platform")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("Asset Type")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("GPI Date")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-wrapper"},[a("span",[e._v("Type of Repair")]),a("span",[e._v("*")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[a("label",{staticClass:"hd"},[e._v("Attachment")])])}],B=(a(94009),a(98741),a(68477)),$=a(70296),G=a.n($),U=a(83954);const W={name:"gpi-record",props:{id_record:Number},components:{DxDataGrid:u.DxDataGrid,DxSearchPanel:u.DxSearchPanel,DxPaging:u.DxPaging,DxPager:u.DxPager,DxScrolling:u.DxScrolling,DxColumn:u.DxColumn,DxExport:u.DxExport,DxToolbar:u.DxToolbar,DxHeaderFilter:u.DxHeaderFilter,DxForm:u.DxForm,DxItem:U.DxItem,DxEditing:u.DxEditing,DxButton:G(),DxPopup:u.DxPopup,DxSelectBox:L(),DxTextBox:y(),DxDateBox:S(),DxTextArea:w(),DxFileUploader:B.DxFileUploader},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI NUMBER: ",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_GPI_RECORD(),this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_DATA("/Md/get-md-gpi-repair-type-list","repairTypeList"),this.FETCH_DATA("/Md/get-md-sap-main-work-ctr-list","mainWorkCtrList"),this.FETCH_DATA("/Md/get-md-gpi-location-deck-list","deckList"),this.FETCH_LIBRARY())},data:function(){return{platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],repairTypeList:[],mainWorkCtrList:[],deckList:[],gpiRecordList:{},file:[],library:[],gridRefName:"grid-library",fileNameInputOptions:{placeholder:"File Name"},dataFileTemp:"",isEdit:!1,dataGridAttributes:{class:"data-grid-style"},btn_state:!1}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_GPI_RECORD:function(){var e=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("insp record:"),console.log(t),200==t.status&&t.data&&(console.log("success"),e.gpiRecordList=t.data,console.log(e.gpiRecordList))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_RECORD:function(){var e=this;null!==this.gpiRecordList.gpi_date&&(this.gpiRecordList.gpi_date=T()(this.gpiRecordList.gpi_date).format("L")),null!==this.gpiRecordList.expected_finish_date&&(this.gpiRecordList.expected_finish_date=T()(this.gpiRecordList.expected_finish_date).format("L")),(0,o.p)({method:"put",url:"/GpiRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.gpiRecordList}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(0)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(){var e=this;(0,o.p)({method:"delete",url:"/GpiRecord/delete-gpi-record?id="+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(0)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},FETCH_DATA:function(e,t){var a=this;this.isLoading=!0,(0,o.p)({method:"get",url:e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&a.$set(a,t,e.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){a.isLoading=!1}))},FETCH_LIBRARY:function(){var e=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiFile/get-gpi-file-by-id?id="+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&(e.library=t.data,e.isLoading=!1)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},ADD_NEW_FILE:function(e){var t=this,a=new FormData;if(a.append("id_gpi_record",this.id_record),a.append("file",this.file),a.append("note",e.data.note),0==this.file.length)return this.$ons.notification.alert("Please select file").then((function(e){0==e&&t.FETCH_LIBRARY()}));(0,o.p)({method:"post",url:"/GpiFile",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){console.log(e),201==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Add New File failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))},UPDATE_DOC:function(e){var t,a=this;console.log("e.data",e.data);var i=new FormData;i.append("id",e.data.id),i.append("id_gpi_record",e.data.id_gpi_record),i.append("file",null!==(t=this.file)&&void 0!==t?t:""),i.append("note",e.data.note),(0,o.p)({method:"put",url:"/GpiFile/"+e.data.id,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:i}).then((function(e){console.log(e),204==e.status&&a.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),a.isLoading=!1,a.$ons.notification.alert(e.message,{title:"Update File failed"}).then((function(e){0==e&&a.FETCH_LIBRARY()}))}))["finally"]((function(){a.isLoading=!1}))},VALUE_CHANGE:function(e){console.log(e),console.log(e.value[0].name);var t=new FileReader;t.readAsDataURL(e.value[0]),t.onload=function(){},this.file=e.value[0]},SAVE:function(e){console.log(e),console.log(this.file),(e.changes.length>0||this.file.size>0)&&this.isEdit&&(console.log("save"),this.UPDATE_DOC(this.dataFileTemp))},DOWNLOAD:function(e,t){console.log(this.baseURL+e);var a=this.baseURL+e,i=document.createElement("a");i.href=a,i.setAttribute("download",t),i.setAttribute("target","_blank"),document.body.appendChild(i),i.click()},DELETE_DOC:function(e){var t=this,a=e.data.id;(0,o.p)({method:"delete",url:"/GpiFile/"+a,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Delete failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))},ADD_ROW:function(){var e=this.$refs[this.gridRefName].instance;e.addRow(),e.deselectAll()},INSERT_ITEM_SELECT_BOX:function(e,t){if(e.text){var a={id:t.length>0?Math.max.apply(Math,(0,C.A)(t.map((function(e){return e.id}))))+1:1,code:e.text,asset_type:e.text},i=new k({store:{data:t,type:"array",key:"ID"}});e.customItem=i.store().insert(a).then((function(){return i.load()})).then((function(){return a}))["catch"]((function(e){throw e}))}else e.customItem=null}}},z=W;var q=(0,g.A)(z,F,P,!1,null,"57eda9b8",null);const J=q.exports;var V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page-container"},[a("div",{staticClass:"action-bar"},[a("button",{staticClass:"back",on:{click:function(t){return e.SET_CURRENT_VIEW(0)}}},[a("i",{staticClass:"fas fa-chevron-left"}),e._v(" BACK ")]),a("div",{staticClass:"wrapper"},[a("button",{staticClass:"submit",on:{click:function(t){e.isShow=1}}},[e._v("APPROVE")]),a("button",{staticClass:"delete"},[e._v("REJECT")])])]),e._m(0)]),1==e.isShow?a("Sap",{attrs:{sapData:e.data_row.id},on:{popup:function(t){e.isShow=0}}}):e._e()],1)},j=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("div",{attrs:{id:"pdfPreview"}})])])}],Y=a(78676),K=a(3604),X=a(30388),Q=(a(61373),a(18772),a(87136),a(58649),a(14117),a(69858),a(54754),a(99078),a(91954),a(1772),a(53746),a(28921),a(20861),a(71905),a(85213),a(97182),a(12279),a(39302),a(70147),a(66217),a(97966),a(35186),a(35944),a(44787),a(50632),a(52278),a(14245),a(52492),a(93266),a(37192),a(37220),a(82432),a(32483),a(36696),a(58083),a(51337),a(7036),a(4517),a(21794),a(71319),a(29979),a(14602),a(30789),a(60933),a(54133)),Z=a.n(Q),ee=a(42181),te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:e.sapHeader.wo_order_no,callback:function(t){e.$set(e.sapHeader,"wo_order_no",t)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Notification Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Notification Type",disabled:!0},model:{value:e.sapHeader.notification_type,callback:function(t){e.$set(e.sapHeader,"notification_type",t)},expression:"sapHeader.notification_type"}})],1)]),a("div",{staticClass:"input-wrapper",staticStyle:{"grid-column":"span 2"}},[a("span",[e._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description (Maximum 40 characters)","max-length":"40"},model:{value:e.sapHeader.description,callback:function(t){e.$set(e.sapHeader,"description",t)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:e.sapHeader.functional_location,callback:function(t){e.$set(e.sapHeader,"functional_location",t)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},on:{"value-changed":e.ON_MAIN_WORKCTR_CHANGED},model:{value:e.sapHeader.main_workctr,callback:function(t){e.$set(e.sapHeader,"main_workctr",t)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp,callback:function(t){e.$set(e.sapHeader,"planner_grp",t)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp_planning_plant,callback:function(t){e.$set(e.sapHeader,"planner_grp_planning_plant",t)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:e.sapHeader.code_grp_object_part,callback:function(t){e.$set(e.sapHeader,"code_grp_object_part",t)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:e.sapHeader.object_part_code,callback:function(t){e.$set(e.sapHeader,"object_part_code",t)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:e.sapHeader.code_grp_damage,callback:function(t){e.$set(e.sapHeader,"code_grp_damage",t)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:e.sapHeader.damage_code,callback:function(t){e.$set(e.sapHeader,"damage_code",t)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:e.sapHeader.damage_free_text,callback:function(t){e.$set(e.sapHeader,"damage_free_text",t)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:e.sapHeader.code_grp_cause,callback:function(t){e.$set(e.sapHeader,"code_grp_cause",t)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:e.sapHeader.cause_code,callback:function(t){e.$set(e.sapHeader,"cause_code",t)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:e.sapHeader.cause_grp_free_text,callback:function(t){e.$set(e.sapHeader,"cause_grp_free_text",t)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_start_date,callback:function(t){e.$set(e.sapHeader,"required_start_date",t)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_start_time,callback:function(t){e.$set(e.sapHeader,"required_start_time",t)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_end_date,callback:function(t){e.$set(e.sapHeader,"required_end_date",t)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_end_time,callback:function(t){e.$set(e.sapHeader,"required_end_time",t)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:e.sapHeader.additional_data,callback:function(t){e.$set(e.sapHeader,"additional_data",t)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:e.sapHeader.accessibility,callback:function(t){e.$set(e.sapHeader,"accessibility",t)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:e.sapHeader.scaffolding_requirement,callback:function(t){e.$set(e.sapHeader,"scaffolding_requirement",t)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"create",on:{click:e.CREATE_RECORD}},[e._v("Submit")]),a("button",{on:{click:function(t){return e.$emit("popup",0)}}},[e._v("Cancel")])])])])])},ae=[];const ie={name:"add-short-term",props:{id_record:Number,id_platform:Number},components:{DxSelectBox:L(),DxTextBox:y(),DxDateBox:S()},created:function(){console.log("id_record:"+this.id_record),console.log("id_platform:"+this.id_platform),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI REPORT",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_PLATFORM()},data:function(){return{failureActionRecordList:{id:0,is_active:!0,id_failure:this.id_record,action_type:"short-term",id_failure_action_status:null,id_discipline:null,action_date:null,action_details:null},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{notification_type:"CM",code_grp_object_part:"MECH-PI",code_grp_damage:"MECH-PI",code_grp_cause:"MECH-PI",id_module:2,id_from_module:null,id_reference:null,is_active:!0,required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null,reported_by:"AIMS",abc_indicator:"1",user_status:"SCRN"}}},computed:{},methods:{CREATE_RECORD:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?T()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.created_by=t.id,this.failureActionRecordList.updated_by=t.id,(0,o.p)({method:"post",url:"/FailureActionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),201==a.status&&(e.sapHeader.id_from_module=a.data.id,e.sapHeader.id_reference="RR"+a.data.id,e.sapHeader.required_start_date=e.sapHeader.required_start_date?T()(e.sapHeader.required_start_date).format("YYYYMMDD"):"",e.sapHeader.required_end_date=e.sapHeader.required_end_date?T()(e.sapHeader.required_end_date).format("YYYYMMDD"):"",e.sapHeader.required_start_time=e.sapHeader.required_start_time?T()(e.sapHeader.required_start_time).format("HHmmss"):null,e.sapHeader.required_end_time=e.sapHeader.required_end_time?T()(e.sapHeader.required_end_time).format("HHmmss"):null,e.sapHeader.created_by=t.id,e.sapHeader.updated_by=t.id,(0,o.p)({method:"post",url:"/SapHeader",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.sapHeader}).then((function(t){console.log("SapHeaderRes",t),e.$emit("popup")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){})))}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_FAILURE_ACTION_STATUS:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureactionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISCIPLINE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_STATUS:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.status=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.functionalLocation=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrp=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrpPlanning=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.mainWorkCtr=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.objectpartCode=t.data;for(var a=0;a<e.formSelect.objectpartCode.length;a++)e.formSelect.objectpartCode[a].ddl=e.formSelect.objectpartCode[a].object_part_code+"-"+e.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpObjectpart=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpDamage=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.damageCode=t.data;for(var a=0;a<e.formSelect.damageCode.length;a++)e.formSelect.damageCode[a].ddl=e.formSelect.damageCode[a].damage_code+"-"+e.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpCause=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.causeCode=t.data;for(var a=0;a<e.formSelect.causeCode.length;a++)e.formSelect.causeCode[a].ddl=e.formSelect.causeCode[a].cause_code+"-"+e.formSelect.causeCode[a].cause_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.accessibility=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.scaffoldingReq=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLATFORM:function(){var e=this;(0,o.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){var a=t.data.filter((function(t){return t.id==e.id_platform}));e.sapHeader.planner_grp_planning_plant=a[0].planning_plant}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},ON_MAIN_WORKCTR_CHANGED:function(e){console.log(e);var t=this.formSelect.mainWorkCtr.filter((function(t){return t.code==e.value}));this.sapHeader.planner_grp=t[0].planner_grp}}},se=ie;var re=(0,g.A)(se,te,ae,!1,null,"3b2f0986",null);const ne=re.exports,oe={name:"gpi-report",props:{data_row:Object},components:{Sap:ne},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI NUMBER: ",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_GPI_RECORD(),Z().vfs=ee.b.vfs)},data:function(){return{gpiRecordList:{},pictureLogList:[],export_status:{active:!1,cur:0,max:0},library:[],platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],id_record:this.data_row.id,base64ImageUrl:"",isShow:0}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_GPI_RECORD:function(){var e=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.gpiRecordList=t.data,e.FETCH_PICTURE_LOG(),e.$nextTick((function(){var e=this;window.setTimeout((function(){e.generatePDF()}),500)})))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PICTURE_LOG:function(){var e=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiFile/get-gpi-file-by-id?id="+this.data_row.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.pictureLogList=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DATA:function(e,t){var a=this;this.isLoading=!0,(0,o.p)({method:"get",url:e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&a.$set(a,t,e.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){a.isLoading=!1}))},DATE_FORMAT:function(e){return T()(e).format("DD MMM yyyy")},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},convertImageToBase64:function(e){return new Promise((function(t,a){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=i.width,e.height=i.height,a.drawImage(i,0,0);var s=e.toDataURL("image/png");t(s)},i.onerror=function(e){a(e)},i.src=e}))},convert:function(e){var t=this;return(0,X.A)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.error=null,a.next=4,t.convertImageToBase64(e);case 4:t.base64ImageUrl=a.sent,a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0,console.error("Failed to convert image:",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},headerTable:function(){return{widths:[85.5,"*",37.5,48],body:[[{rowSpan:4,image:"logo",width:60,height:50,alignment:"center",margin:[0,0,0,0]},{rowSpan:4,text:"GPI REPORT",style:"headerTitle",alignment:"center",margin:[0,20,0,0]},{text:"No:",style:"cellLeft"},{text:this.data_row?this.data_row.id:"-",style:"headerCellRight"}],["","",{text:"Date:",style:"cellLeft"},{text:this.data_row?this.DATE_FORMAT(this.data_row.gpi_date):"-",style:"headerCellRight"}],["","",{text:"Discipline:",style:"cellLeft"},{text:"-",style:"headerCellRight"}],["","",{text:"Originator:",style:"cellLeft"},{text:"-",style:"headerCellRight"}]]}},subHeaderTable:function(){return void 0===this.gpiRecordList?{}:{widths:["*","*","*","*"],border:[!0,!1,!0,!0],body:[[{text:"Platform:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_PLATFORM(this.data_row.id_platform),border:[!0,!1,!0,!0]},{text:"Asset Type:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.asset_type,border:[!0,!1,!0,!0]}],[{text:"Tag Number:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.tag_no?this.data_row.tag_no:"-",border:[!0,!1,!0,!0]},{text:"Location | Deck:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.location_deck?this.data_row.location_deck:"-"}],[{text:"Main Component:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.main_component_free_text?this.data_row.main_component_free_text:"-",border:[!0,!1,!0,!0]},{text:"Damage Mechanism:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.damage_mechanism_free_text,border:[!0,!1,!0,!0]}],[{text:"Severity:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_SEVERITY(this.data_row.id_severity),border:[!0,!1,!0,!0]},{text:"Expected Finish Date:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.expected_finish_date?this.data_row.expected_finish_date:"-",border:[!0,!1,!0,!0]}],[{text:"Type of Repair:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_TYPE_OF_REPAIR(this.data_row.id_repair),border:[!0,!1,!0,!0]},{text:"Repair Description:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.repair_type_free_text?this.data_row.repair_type_free_text:"-",border:[!0,!1,!0,!0]}]]}},generatePDF:function(){var e=this;return(0,X.A)(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(){var t=(0,X.A)(regeneratorRuntime.mark((function t(){var a,i,s,r,n,o,l,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=[],r=[],n=[],o=(0,K.A)(e.pictureLogList),t.prev=4,o.s();case 6:if((l=o.n()).done){t.next=16;break}return d=l.value,t.next=10,e.convert(e.baseURL+d.file_path);case 10:r.push({image:e.base64ImageUrl,width:200,alignment:"center",border:[!0,!1,!0,!0]}),n.push({text:d.note?d.note:"-",border:[!0,!1,!0,!0]}),2===(null===(c=r)||void 0===c?void 0:c.length)&&(s.push(r),s.push(n),r=[],n=[]),e.base64ImageUrl="";case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](4),o.e(t.t0);case 21:return t.prev=21,o.f(),t.finish(21);case 24:return(null===(a=r)||void 0===a?void 0:a.length)>0&&(r.push({text:"",border:[!0,!1,!0,!0]}),n.push({text:"-",border:[!0,!1,!0,!0]}),s.push(r),s.push(n),r=[],n=[]),0===(null===(i=e.pictureLogList)||void 0===i?void 0:i.length)&&s.push([{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]}]),console.warn(s),t.abrupt("return",s);case 28:case"end":return t.stop()}}),t,null,[[4,18,21,24]])})));return function(){return t.apply(this,arguments)}}(),t.t0={title:"test"},t.t1={style:"header",table:e.headerTable(),layout:{vLineWidth:function(e){return 3===e?0:1}}},t.t2={border:[!0,!1,!0,!0],table:e.subHeaderTable(),layout:{vLineWidth:function(e){return 1===e||3===e||5===e?0:1}}},t.t3={table:{widths:["*","*"],border:[!0,!1,!0,!0],body:[[{text:"Findings",style:"cellTitle",border:[!0,!1,!0,!0]},{text:"Recommendation",style:"cellTitle",border:[!0,!1,!0,!0]}],[{text:e.gpiRecordList.findings,border:[!0,!1,!0,!0]},{text:e.gpiRecordList.recommendation,border:[!0,!1,!0,!0]}]]}},t.t4={table:{widths:"*",body:[[{text:"Picture Log",style:"cellTitle",border:[!0,!1,!0,!0]}]]}},t.t5=["*","*"],t.next=9,a();case 9:t.t6=t.sent,t.t7={widths:t.t5,body:t.t6},t.t8={table:t.t7},t.t9=[t.t1,t.t2,t.t3,t.t4,t.t8],t.t10=function(e){if(e.startPosition.top>800&&"REMEDIAL ACTION"==e.text||e.startPosition.top>700&&"REMARK"==e.text||e.startPosition.top>700&&"ACKNOWLEDGMENT"==e.text)return console.warn(e.text),e.startPosition.pageNumber=2,!0},t.t11={header:{},headerTitle:{fontSize:14,bold:!0},cellLeft:{fillColor:"#d3d3d3"},cellRight:{},cellTitle:{fontSize:10,bold:!0,fillColor:"#d3d3d3",alignment:"center"},cellSubTitle:{fontSize:8,fillColor:"#d3d3d3",alignment:"center"}},t.t12={fontSize:8},t.t13={logo:e.baseURL+"wwwroot/assets/cpoc_logo_new.png"},i={info:t.t0,content:t.t9,pageBreakBefore:t.t10,styles:t.t11,defaultStyle:t.t12,images:t.t13},s=Z().createPdf(i),s.getDataUrl((function(e){for(var t=e.split(","),a=(0,Y.A)(t,2),i=a[0],s=a[1],r=atob(s),n=new Uint8Array(r.length),o=0;o<r.length;o++)n[o]=r.charCodeAt(o);var l=i.split(":")[1].split(";")[0],c=new Blob([n],{type:l}),d=URL.createObjectURL(c);console.log(d);var p=document.createElement("embed");p.src=d,p.type="application/pdf",p.width="100%",p.height="600px",console.log(p),document.getElementById("pdfPreview").appendChild(p)}));case 20:case"end":return t.stop()}}),t)})))()},GET_PLATFORM:function(e){if(0===this.platformList.length||null===e)return"-";var t=this.platformList.filter((function(t){return t.id==e}));return 0===t.length?"-":t[0].code_name},GET_ASSET_TYPE:function(e){if(0===this.assetTypeList.length||null===e)return"-";var t=this.assetTypeList.filter((function(t){return t.id==e}));return 0===t.length?"-":t[0].asset_type},GET_MAIN_COMPONENT:function(e){if(0===this.mainComponentList.length||null===e)return"-";var t=this.mainComponentList.filter((function(t){return t.id==e}));return 0===t.length?"-":t[0].code},GET_SEVERITY:function(e){if(0===this.severityList.length||null===e)return"-";var t=this.severityList.filter((function(t){return t.id==e}));return 0===t.length?"-":t[0].status},GET_TYPE_OF_REPAIR:function(e){if(0===this.typeOfRepairList.length||null===e)return"-";var t=this.typeOfRepairList.filter((function(t){return t.id==e}));return 0===t.length?"-":t[0].code}}},le=oe;var ce=(0,g.A)(le,V,j,!1,null,"3da3c5ac",null);const de=ce.exports,pe={name:"inspection-record",components:{ViewPage:h,AddPage:N,EditPage:J,ReportPage:de},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:{}}},computed:{},methods:{SET_EDIT:function(e,t){this.current_view=e,t&&(this.edit_row=t)}}},ue=pe;var _e=(0,g.A)(ue,i,s,!1,null,"497137a0",null);const me=_e.exports},70296:function(e,t,a){
/*!
 * devextreme-vue
 * Version: 21.2.7
 * Build date: Mon Apr 11 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
a(15852),a(94009);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxButton=void 0;var s=i(a(47160)),r=a(72528),n=r.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=s["default"],this.$_hasAsyncTemplate=!0}});t.DxButton=n,t["default"]=n}}]);
//# sourceMappingURL=9146.3096818f.js.map