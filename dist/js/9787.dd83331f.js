"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[9787],{88024:(e,t,a)=>{a.d(t,{A:()=>x});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h3",{staticStyle:{"grid-column":"span 2","margin-top":"0","margin-bottom":"0"}},[e._v("New Failure Report")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Tag Number")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Tag Number"},model:{value:e.failureRecordList.tag_no,callback:function(t){e.$set(e.failureRecordList,"tag_no",t)},expression:"failureRecordList.tag_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.platform,"value-expr":"id","display-expr":"code_name",placeholder:"Select Location"},model:{value:e.failureRecordList.id_platform,callback:function(t){e.$set(e.failureRecordList,"id_platform",t)},expression:"failureRecordList.id_platform"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Equipment Type")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Equipment Type"},model:{value:e.failureRecordList.equipment_type,callback:function(t){e.$set(e.failureRecordList,"equipment_type",t)},expression:"failureRecordList.equipment_type"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Unit")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Unit"},model:{value:e.failureRecordList.unit,callback:function(t){e.$set(e.failureRecordList,"unit",t)},expression:"failureRecordList.unit"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Drawing Number")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Drawing Number"},model:{value:e.failureRecordList.drawing_no,callback:function(t){e.$set(e.failureRecordList,"drawing_no",t)},expression:"failureRecordList.drawing_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Failure Impact")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.failureImpact,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Impact"},model:{value:e.failureRecordList.id_failure_impact,callback:function(t){e.$set(e.failureRecordList,"id_failure_impact",t)},expression:"failureRecordList.id_failure_impact"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Discipline")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline"},model:{value:e.failureRecordList.id_discipline,callback:function(t){e.$set(e.failureRecordList,"id_discipline",t)},expression:"failureRecordList.id_discipline"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Findings Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Findings Date"},model:{value:e.failureRecordList.findings_date,callback:function(t){e.$set(e.failureRecordList,"findings_date",t)},expression:"failureRecordList.findings_date"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Details")]),a("div",{staticClass:"input"},[a("DxTextArea",{attrs:{height:150,"auto-resize-enabled":!0,placeholder:"Enter Details"},model:{value:e.failureRecordList.remark,callback:function(t){e.$set(e.failureRecordList,"remark",t)},expression:"failureRecordList.remark"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Findings")]),a("div",{staticClass:"input"},[a("DxTextArea",{attrs:{height:150,"auto-resize-enabled":!0,placeholder:"Enter Findings"},model:{value:e.failureRecordList.findings,callback:function(t){e.$set(e.failureRecordList,"findings",t)},expression:"failureRecordList.findings"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Mitigation")]),a("div",{staticClass:"input"},[a("DxTextArea",{attrs:{height:150,"auto-resize-enabled":!0,placeholder:"Enter Mitigation"},model:{value:e.failureRecordList.mitigation,callback:function(t){e.$set(e.failureRecordList,"mitigation",t)},expression:"failureRecordList.mitigation"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Health and Safety")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Health and Safety"},model:{value:e.failureRecordList.health_and_safety,callback:function(t){e.$set(e.failureRecordList,"health_and_safety",t)},expression:"failureRecordList.health_and_safety"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Production Loss")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Production Loss"},model:{value:e.failureRecordList.production_loss,callback:function(t){e.$set(e.failureRecordList,"production_loss",t)},expression:"failureRecordList.production_loss"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Material Cost")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Material Cost"},model:{value:e.failureRecordList.material_cost,callback:function(t){e.$set(e.failureRecordList,"material_cost",t)},expression:"failureRecordList.material_cost"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Environment Impact")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Environment Impact"},model:{value:e.failureRecordList.environment_impact,callback:function(t){e.$set(e.failureRecordList,"environment_impact",t)},expression:"failureRecordList.environment_impact"}})],1)]),a("button",{staticClass:"create",on:{click:e.CREATE_RECORD}},[e._v("Create")]),a("button",{on:{click:function(t){return e.SET_CURRENT_VIEW(0)}}},[e._v("Cancel")]),a("br")])])])},r=[],s=(a(5086),a(88704)),o=a(49148),n=a.n(o),l=a(10100),d=a.n(l),c=a(57723),p=a.n(c),u=a(17768),_=a.n(u),f=a(14817),m=a.n(f);a(63869);const g={name:"inspection-record",components:{DxSelectBox:d(),DxTextBox:p(),DxDateBox:_(),DxTextArea:m()},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null}),this.FETCH_DROPDOWN_FAILURE_IMPACT(),this.FETCH_DROPDOWN_DISCIPLINE(),this.FETCH_DROPDOWN_PLATFORM_LIST()},data:function(){return{formSelect:{platform:[],failureImpact:[],discipline:[]},failureRecordList:{id:0,is_active:!0,tag_no:null,id_platform:null,equipment_type:null,unit:null,drawing_no:null,id_failure_impact:null,id_discipline:null,findings_date:null,health_and_safety:null,production_loss:null,material_cost:null,environment_impact:null,remark:null,findings:null,mitigation:null},dataGridAttributes:{class:"data-grid-style"}}},computed:{},methods:{CREATE_RECORD:function(e){var t=this;this.failureRecordList.findings_date&&(this.failureRecordList.findings_date=n()(this.failureRecordList.findings_date).format("L")),console.log(e.data),(0,s.p)({method:"post",url:"/FailureRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureRecordList}).then((function(e){201==e.status&&t.SET_CURRENT_VIEW(2,e.data)}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},FETCH_DROPDOWN_FAILURE_IMPACT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-impact-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureImpact=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_PLATFORM_LIST:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.platform=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)}}},h=g;var v=a(81656),C=(0,v.A)(h,i,r,!1,null,"13f55af0",null);const x=C.exports},12984:(e,t,a)=>{a.d(t,{A:()=>ne});var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"page-container"},[i("div",{staticClass:"action-bar"},[i("button",{staticClass:"back",on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[i("i",{staticClass:"fas fa-chevron-left"}),t._v(" BACK ")]),i("div",{staticClass:"wrapper"},[i("div",{staticClass:"switch"},[i("div",[i("v-ons-switch",{staticStyle:{padding:"0 !important",border:"0"},attrs:{"input-id":"switch1"},model:{value:t.btn_state,callback:function(e){t.btn_state=e},expression:"btn_state"}})],1),i("span",[t._v("EDIT MODE")])]),i("button",{staticClass:"submit",on:{click:t.UPDATE_RECORD}},[i("i",{staticClass:"fas fa-save"}),t._v(" SUBMIT ")]),1===t.user.failure_seq?i("button",{staticClass:"delete",on:{click:t.DELETE_RECORD}},[i("i",{staticClass:"fas fa-trash-alt"}),t._v(" DELETE ")]):t._e()])]),i("div",{staticClass:"page-section"},[i("div",{staticClass:"table-wrapper"},[i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Tag Number")]),i("div",{staticClass:"select"},[i("DxTextBox",{attrs:{placeholder:"Enter Tag Number",disabled:!t.btn_state},model:{value:t.failureRecordList.tag_no,callback:function(e){t.$set(t.failureRecordList,"tag_no",e)},expression:"failureRecordList.tag_no"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Location")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.formSelect.platform,"value-expr":"id","display-expr":"code_name",placeholder:"Enter Location",disabled:!t.btn_state},model:{value:t.failureRecordList.id_platform,callback:function(e){t.$set(t.failureRecordList,"id_platform",e)},expression:"failureRecordList.id_platform"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Equipment Type")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Equipment Type",disabled:!t.btn_state},model:{value:t.failureRecordList.equipment_type,callback:function(e){t.$set(t.failureRecordList,"equipment_type",e)},expression:"failureRecordList.equipment_type"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Unit")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Unit",disabled:!t.btn_state},model:{value:t.failureRecordList.unit,callback:function(e){t.$set(t.failureRecordList,"unit",e)},expression:"failureRecordList.unit"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Drawing Number")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Drawing Number",disabled:!t.btn_state},model:{value:t.failureRecordList.drawing_no,callback:function(e){t.$set(t.failureRecordList,"drawing_no",e)},expression:"failureRecordList.drawing_no"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Failure Impact")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.formSelect.failureImpact,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Impact",disabled:!t.btn_state},model:{value:t.failureRecordList.id_failure_impact,callback:function(e){t.$set(t.failureRecordList,"id_failure_impact",e)},expression:"failureRecordList.id_failure_impact"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Discipline")]),i("div",{staticClass:"select"},[i("DxSelectBox",{attrs:{items:t.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline",disabled:!t.btn_state},model:{value:t.failureRecordList.id_discipline,callback:function(e){t.$set(t.failureRecordList,"id_discipline",e)},expression:"failureRecordList.id_discipline"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Findings Date")]),i("div",{staticClass:"input"},[i("DxDateBox",{attrs:{type:"date",placeholder:"Enter Production Loss",disabled:!t.btn_state,"display-format":"dd MMM yyyy"},model:{value:t.failureRecordList.findings_date,callback:function(e){t.$set(t.failureRecordList,"findings_date",e)},expression:"failureRecordList.findings_date"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Health and Safety")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Health and Safety",disabled:!t.btn_state},model:{value:t.failureRecordList.health_and_safety,callback:function(e){t.$set(t.failureRecordList,"health_and_safety",e)},expression:"failureRecordList.health_and_safety"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Production Loss")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Production Loss",disabled:!t.btn_state},model:{value:t.failureRecordList.production_loss,callback:function(e){t.$set(t.failureRecordList,"production_loss",e)},expression:"failureRecordList.production_loss"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Material Cost")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Material Cost",disabled:!t.btn_state},model:{value:t.failureRecordList.material_cost,callback:function(e){t.$set(t.failureRecordList,"material_cost",e)},expression:"failureRecordList.material_cost"}})],1)]),i("div",{staticClass:"input-wrapper"},[i("span",[t._v("Environment Impact")]),i("div",{staticClass:"input"},[i("DxTextBox",{attrs:{placeholder:"Enter Environment Impact",disabled:!t.btn_state},model:{value:t.failureRecordList.environment_impact,callback:function(e){t.$set(t.failureRecordList,"environment_impact",e)},expression:"failureRecordList.environment_impact"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{fill:""}},[i("span",[t._v("Details")]),i("div",{staticClass:"input"},[i("DxTextArea",{staticStyle:{"font-size":"12px"},attrs:{height:120,"max-length":1e3,placeholder:"Enter Details","read-only":!t.btn_state},model:{value:t.failureRecordList.details,callback:function(e){t.$set(t.failureRecordList,"details",e)},expression:"failureRecordList.details"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{fill:""}},[i("span",[t._v("Findings")]),i("div",{staticClass:"input"},[i("DxTextArea",{staticStyle:{"font-size":"12px"},attrs:{height:120,"max-length":1e3,placeholder:"Enter Findings","read-only":!t.btn_state},model:{value:t.failureRecordList.findings,callback:function(e){t.$set(t.failureRecordList,"findings",e)},expression:"failureRecordList.findings"}})],1)]),i("div",{staticClass:"input-wrapper",attrs:{fill:""}},[i("span",[t._v("Mitigation")]),i("div",{staticClass:"input"},[i("DxTextArea",{staticStyle:{"font-size":"12px"},attrs:{height:120,"max-length":1e3,placeholder:"Enter Mitigation","read-only":!t.btn_state},model:{value:t.failureRecordList.mitigation,callback:function(e){t.$set(t.failureRecordList,"mitigation",e)},expression:"failureRecordList.mitigation"}})],1)]),i("div",{attrs:{"span-2":""}}),i("div",{attrs:{fill:""}},[t._m(0),i("DxDataGrid",{ref:t.gridRefName,attrs:{id:"data-grid-list","key-expr":"id","data-source":t.library,"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"focused-row-enabled":!1,"row-alternation-enabled":!1},on:{"row-inserted":t.ADD_NEW_FILE,"row-removed":t.DELETE_DOC,"init-new-row":function(){e.file=[],e.isEdit=!1},"editing-start":function(t){e.file=[],e.isEdit=!0,e.dataFileTemp=t},"row-removing":function(){e.isEdit=!1},saved:t.SAVE},scopedSlots:t._u([{key:"picture-template",fn:function(e){var a=e.data;return[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("img",{attrs:{src:t.baseURL+a.data.file_path,width:"200",height:"200"}})])]}},{key:"dateHeader",fn:function(){return[i("div",[t._v("Uploaded"),i("br"),t._v("Date")])]},proxy:!0},{key:"insertCellTemplate",fn:function(){return[i("div",{staticClass:"widget-container"},[i("DxFileUploader",{attrs:{id:"file-uploader",multiple:!1,"upload-mode":"useForm",accept:"image/*",visible:!0},on:{"value-changed":t.VALUE_CHANGE}})],1)]},proxy:!0},{key:"pathCellTemplate",fn:function(e){var a=e.data;return[i("div",[i("button",{staticClass:"library-btn-download",on:{click:function(e){return t.DOWNLOAD(a.value,a.data.file_name)}}},[i("i",{staticClass:"fa-regular fa-circle-down"}),t._v(" DOWNLOAD")])])]}},{key:"addButton",fn:function(){return[i("DxButton",{attrs:{icon:"las la-plus",hint:"Add"},on:{click:t.ADD_ROW}})]},proxy:!0}])},[i("DxEditing",{attrs:{"allow-deleting":!0,"allow-adding":!0,"allow-updating":!0,"use-icons":!0,"show-borders":!0,mode:"popup"}},[i("DxPopup",{attrs:{"show-title":!0,width:650,height:300,title:"Attachment"}}),i("DxForm",{attrs:{"label-location":"top"}},[i("DxItem",{attrs:{"col-count":2,"col-span":2,"row-count":1,"item-type":"group"}},[i("DxItem",{attrs:{"item-type":"group"}},[i("DxItem",{attrs:{"data-field":"file","col-span":1}})],1),i("DxItem",{attrs:{"item-type":"group"}},[i("DxItem",{attrs:{"data-field":"note","col-span":1}})],1)],1)],1)],1),i("DxColumn",{attrs:{"data-field":"file",visible:!1,"edit-cell-template":"insertCellTemplate"}}),i("DxColumn",{attrs:{"data-field":"file_path",caption:"Picture","cell-template":"picture-template"}}),i("DxColumn",{attrs:{"data-field":"note",caption:"Note","min-width":120,alignment:"left"}}),i("DxColumn",{attrs:{"data-field":"file_type",caption:"Extension",width:120,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"created_date",caption:"Uploaded Date",width:120,alignment:"center",format:"dd MMM yyyy","data-type":"date","header-cell-template":"dateHeader"}}),i("DxColumn",{attrs:{"data-field":"file_path","cell-template":"pathCellTemplate",caption:"Attachment",width:120,alignment:"center"}}),i("DxToolbar",[i("DxItem",{attrs:{location:"after",template:"addButton"}}),i("DxItem",{attrs:{location:"after",name:"searchPanel"}})],1),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{visible:!1,"show-page-size-selector":!0,"allowed-page-sizes":[5,10,"all"],"show-navigation-buttons":!0,"show-info":!0,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1),i("div",{attrs:{fill:""}},[t._m(1),i("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.shortTermRecordList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"init-new-row":function(){t.$emit("popup",1)}},scopedSlots:t._u([{key:"masterShorttermDetailTemplate",fn:function(e){var t=e.data;return[i("SapSTT",{attrs:{sapData:t}})]}},{key:"action-cell-template",fn:function(e){var a=e.data;return[i("div",{staticClass:"action-wrapper"},[i("div",{on:{click:function(){t.isShow=2,t.selectedRow=a.data.id}}},[i("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),i("div",{on:{click:function(e){return t.DELETE_FAILURE_ACTION_RECORD(a)}}},[i("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})])])]}},{key:"action-add-template",fn:function(e){return[i("DxButton",{attrs:{icon:"plus"},on:{click:function(){t.isShow=1}}})]}}])},[i("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!0,"use-icons":!0,mode:"form"}}),i("DxFilterRow",{attrs:{visible:!0}}),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxSelection",{attrs:{mode:"single"}}),i("DxMasterDetail",{attrs:{enabled:!0,template:"masterShorttermDetailTemplate"}}),i("DxColumn",{attrs:{"data-field":"action_details",caption:"Short Term Action Detail","min-width":150,alignment:"left"}}),i("DxColumn",{attrs:{"data-field":"action_date",caption:"Action Date",width:120,alignment:"center",dataType:"date",format:"dd MMM yyyy"}}),i("DxColumn",{attrs:{"data-field":"id_discipline",caption:"Discipline",width:120,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.formSelect.discipline,"display-expr":"discipline","value-expr":"id"}})],1),i("DxColumn",{attrs:{"data-field":"id_failure_action_status",caption:"Status",width:120,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.formSelect.actionStatus,"display-expr":"status","value-expr":"id"}})],1),i("DxColumn",{attrs:{width:120,alignment:"center","cell-template":"action-cell-template"}}),i("DxToolbar",[i("DxItem",{attrs:{location:"before",template:"action-add-template"}}),i("DxItem",{attrs:{location:"after",name:"searchPanel"}})],1),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1),i("div",{attrs:{fill:""}},[t._m(2),i("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.longTermRecordList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"init-new-row":function(){t.$emit("popup",3)}},scopedSlots:t._u([{key:"masterLongtermDetailTemplate",fn:function(e){var t=e.data;return[i("SapLTT",{attrs:{sapData:t}})]}},{key:"action-cell-template",fn:function(e){var a=e.data;return[i("div",{staticClass:"action-wrapper"},[i("div",{on:{click:function(){t.isShow=4,t.selectedRow=a.data.id}}},[i("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),i("div",{on:{click:function(e){return t.DELETE_FAILURE_ACTION_RECORD(a)}}},[i("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})])])]}},{key:"action-add-template",fn:function(e){return[i("DxButton",{attrs:{icon:"plus"},on:{click:function(){t.isShow=3}}})]}}])},[i("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!0,"use-icons":!0,mode:"form"}}),i("DxFilterRow",{attrs:{visible:!0}}),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxSelection",{attrs:{mode:"single"}}),i("DxMasterDetail",{attrs:{enabled:!0,template:"masterLongtermDetailTemplate"}}),i("DxColumn",{attrs:{"data-field":"action_details",caption:"Long Term Action Detail","min-width":150,alignment:"left"}}),i("DxColumn",{attrs:{"data-field":"action_date",caption:"Action Date",width:120,alignment:"center",dataType:"date",format:"dd MMM yyyy"}}),i("DxColumn",{attrs:{"data-field":"id_discipline",caption:"Discipline",width:120,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.formSelect.discipline,"display-expr":"discipline","value-expr":"id"}})],1),i("DxColumn",{attrs:{"data-field":"id_failure_action_status",caption:"Status",width:120,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.formSelect.actionStatus,"display-expr":"status","value-expr":"id"}})],1),i("DxColumn",{attrs:{width:120,alignment:"center","cell-template":"action-cell-template"}}),i("DxToolbar",[i("DxItem",{attrs:{location:"before",template:"action-add-template"}}),i("DxItem",{attrs:{location:"after",name:"searchPanel"}})],1),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1),i("br"),i("div",{staticClass:"action-wrapper",attrs:{fill:""}},[i("button",{staticClass:"submit",on:{click:function(e){t.isShow=1}}},[t._v("APPROVE")]),1!==t.user.failure_seq?i("button",{staticClass:"delete",on:{click:function(e){t.rejectFailureRecord=!0}}},[t._v("REJECT")]):t._e()])])])]),t.rejectFailureRecord?i("div",{staticClass:"reject-failure-record"},[i("div",{staticClass:"popup"},[i("h2",[t._v("Confirm Rejection")]),i("DxTextBox",{attrs:{placeholder:"Enter Remark"},model:{value:t.rejectFailureRemark,callback:function(e){t.rejectFailureRemark=e},expression:"rejectFailureRemark"}}),i("div",{staticClass:"actions"},[i("button",{staticClass:"reject",on:{click:t.REJECT_FAILURE_RECORD}},[t._v("REJECT")]),i("button",{staticClass:"cancel",on:{click:function(e){t.rejectFailureRecord=!1}}},[t._v("CANCEL")])])],1)]):t._e(),1==t.isShow?i("AddSTT",{attrs:{id_record:t.id_record,id_platform:t.failureRecordList.id_platform,callback:t.APPROVE_FAILURE_RECORD},on:{popup:t.FETCH_STT_RECORD}}):t._e(),2==t.isShow?i("EditSTT",{attrs:{id_record:t.selectedRow,id_platform:t.failureRecordList.id_platform},on:{popup:t.FETCH_STT_RECORD}}):t._e(),3==t.isShow?i("AddLTT",{attrs:{id_record:t.id_record,id_platform:t.failureRecordList.id_platform},on:{popup:t.FETCH_LTT_RECORD}}):t._e(),4==t.isShow?i("EditLTT",{attrs:{id_record:t.selectedRow,id_platform:t.failureRecordList.id_platform},on:{popup:t.FETCH_LTT_RECORD}}):t._e()],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[a("label",{staticClass:"hd"},[e._v("Attachment")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[a("label",{staticClass:"hd"},[e._v("Short-Term Action")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-header-toolbar left",staticStyle:{width:"calc(100% - 231px)"}},[a("label",{staticClass:"hd"},[e._v("Long-Term Action")])])}],s=(a(5086),a(98741),a(80115),a(88704)),o=a(49148),n=a.n(o),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("New Short Term Tracking")]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Action Details")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Action Details"},model:{value:e.failureActionRecordList.action_details,callback:function(t){e.$set(e.failureActionRecordList,"action_details",t)},expression:"failureActionRecordList.action_details"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Discipline")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline","search-enabled":!0},model:{value:e.failureActionRecordList.id_discipline,callback:function(t){e.$set(e.failureActionRecordList,"id_discipline",t)},expression:"failureActionRecordList.id_discipline"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Action Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Action Date","display-format":"dd MMM yyyy"},model:{value:e.failureActionRecordList.action_date,callback:function(t){e.$set(e.failureActionRecordList,"action_date",t)},expression:"failureActionRecordList.action_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Failure Action Status")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.failureactionStatus,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Action Status","search-enabled":!0},model:{value:e.failureActionRecordList.id_failure_action_status,callback:function(t){e.$set(e.failureActionRecordList,"id_failure_action_status",t)},expression:"failureActionRecordList.id_failure_action_status"}})],1)]),a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:e.sapHeader.wo_order_no,callback:function(t){e.$set(e.sapHeader,"wo_order_no",t)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Notification Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Notification Type",disabled:!0},model:{value:e.sapHeader.notification_type,callback:function(t){e.$set(e.sapHeader,"notification_type",t)},expression:"sapHeader.notification_type"}})],1)]),a("div",{staticClass:"input-wrapper",staticStyle:{"grid-column":"span 2"}},[a("span",[e._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description (Maximum 40 characters)","max-length":"40"},model:{value:e.sapHeader.description,callback:function(t){e.$set(e.sapHeader,"description",t)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:e.sapHeader.functional_location,callback:function(t){e.$set(e.sapHeader,"functional_location",t)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},on:{"value-changed":e.ON_MAIN_WORKCTR_CHANGED},model:{value:e.sapHeader.main_workctr,callback:function(t){e.$set(e.sapHeader,"main_workctr",t)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp,callback:function(t){e.$set(e.sapHeader,"planner_grp",t)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp_planning_plant,callback:function(t){e.$set(e.sapHeader,"planner_grp_planning_plant",t)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:e.sapHeader.code_grp_object_part,callback:function(t){e.$set(e.sapHeader,"code_grp_object_part",t)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:e.sapHeader.object_part_code,callback:function(t){e.$set(e.sapHeader,"object_part_code",t)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:e.sapHeader.code_grp_damage,callback:function(t){e.$set(e.sapHeader,"code_grp_damage",t)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:e.sapHeader.damage_code,callback:function(t){e.$set(e.sapHeader,"damage_code",t)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:e.sapHeader.damage_free_text,callback:function(t){e.$set(e.sapHeader,"damage_free_text",t)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:e.sapHeader.code_grp_cause,callback:function(t){e.$set(e.sapHeader,"code_grp_cause",t)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:e.sapHeader.cause_code,callback:function(t){e.$set(e.sapHeader,"cause_code",t)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:e.sapHeader.cause_grp_free_text,callback:function(t){e.$set(e.sapHeader,"cause_grp_free_text",t)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_start_date,callback:function(t){e.$set(e.sapHeader,"required_start_date",t)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_start_time,callback:function(t){e.$set(e.sapHeader,"required_start_time",t)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_end_date,callback:function(t){e.$set(e.sapHeader,"required_end_date",t)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_end_time,callback:function(t){e.$set(e.sapHeader,"required_end_time",t)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:e.sapHeader.additional_data,callback:function(t){e.$set(e.sapHeader,"additional_data",t)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:e.sapHeader.accessibility,callback:function(t){e.$set(e.sapHeader,"accessibility",t)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:e.sapHeader.scaffolding_requirement,callback:function(t){e.$set(e.sapHeader,"scaffolding_requirement",t)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"create",on:{click:e.CREATE_RECORD}},[e._v("Create")]),a("button",{on:{click:function(t){return e.$emit("popup",0)}}},[e._v("Cancel")])])])])])},d=[],c=(a(94009),a(17),a(10100)),p=a.n(c),u=a(57723),_=a.n(u),f=a(17768),m=a.n(f);const g={name:"add-short-term",props:{id_record:Number,id_platform:Number,callback:{type:Function,required:!0}},components:{DxSelectBox:p(),DxTextBox:_(),DxDateBox:m()},created:function(){console.log("id_record:"+this.id_record),console.log("id_platform:"+this.id_platform),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_PLATFORM()},data:function(){return{failureActionRecordList:{id:0,is_active:!0,id_failure:this.id_record,action_type:"short-term",id_failure_action_status:null,id_discipline:null,action_date:null,action_details:null},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{notification_type:"CM",code_grp_object_part:"MECH-PI",code_grp_damage:"MECH-PI",code_grp_cause:"MECH-PI",id_module:2,id_from_module:null,id_reference:null,is_active:!0,required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null,reported_by:"AIMS",abc_indicator:"1",user_status:"SCRN"}}},computed:{},methods:{CREATE_RECORD:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?n()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.created_by=t.id,this.failureActionRecordList.updated_by=t.id,(0,s.p)({method:"post",url:"/FailureActionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),201==a.status&&(e.sapHeader.id_from_module=a.data.id,e.sapHeader.id_reference="RR"+a.data.id,e.sapHeader.required_start_date=e.sapHeader.required_start_date?n()(e.sapHeader.required_start_date).format("YYYYMMDD"):"",e.sapHeader.required_end_date=e.sapHeader.required_end_date?n()(e.sapHeader.required_end_date).format("YYYYMMDD"):"",e.sapHeader.required_start_time=e.sapHeader.required_start_time?n()(e.sapHeader.required_start_time).format("HHmmss"):null,e.sapHeader.required_end_time=e.sapHeader.required_end_time?n()(e.sapHeader.required_end_time).format("HHmmss"):null,e.sapHeader.created_by=t.id,e.sapHeader.updated_by=t.id,(0,s.p)({method:"post",url:"/SapHeader",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.sapHeader}).then((function(t){console.log("SapHeaderRes",t),e.callback(),e.$emit("popup")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){})))}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_FAILURE_ACTION_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureactionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.status=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.functionalLocation=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrp=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrpPlanning=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.mainWorkCtr=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.objectpartCode=t.data;for(var a=0;a<e.formSelect.objectpartCode.length;a++)e.formSelect.objectpartCode[a].ddl=e.formSelect.objectpartCode[a].object_part_code+"-"+e.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpObjectpart=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpDamage=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.damageCode=t.data;for(var a=0;a<e.formSelect.damageCode.length;a++)e.formSelect.damageCode[a].ddl=e.formSelect.damageCode[a].damage_code+"-"+e.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpCause=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.causeCode=t.data;for(var a=0;a<e.formSelect.causeCode.length;a++)e.formSelect.causeCode[a].ddl=e.formSelect.causeCode[a].cause_code+"-"+e.formSelect.causeCode[a].cause_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.accessibility=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.scaffoldingReq=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLATFORM:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){var a=t.data.filter((function(t){return t.id==e.id_platform}));e.sapHeader.planner_grp_planning_plant=a[0].planning_plant}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},ON_MAIN_WORKCTR_CHANGED:function(e){console.log(e);var t=this.formSelect.mainWorkCtr.filter((function(t){return t.code==e.value}));this.sapHeader.planner_grp=t[0].planner_grp}}},h=g;var v=a(81656),C=(0,v.A)(h,l,d,!1,null,"0b5c074a",null);const x=C.exports;var S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("Edit Short Term Tracking")]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Action Details")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Action Details"},model:{value:e.failureActionRecordList.action_details,callback:function(t){e.$set(e.failureActionRecordList,"action_details",t)},expression:"failureActionRecordList.action_details"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Discipline")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline","search-enabled":!0},model:{value:e.failureActionRecordList.id_discipline,callback:function(t){e.$set(e.failureActionRecordList,"id_discipline",t)},expression:"failureActionRecordList.id_discipline"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Action Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Action Date","display-format":"dd MMM yyyy"},model:{value:e.failureActionRecordList.action_date,callback:function(t){e.$set(e.failureActionRecordList,"action_date",t)},expression:"failureActionRecordList.action_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Failure Action Status")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.failureactionStatus,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Action Status","search-enabled":!0},model:{value:e.failureActionRecordList.id_failure_action_status,callback:function(t){e.$set(e.failureActionRecordList,"id_failure_action_status",t)},expression:"failureActionRecordList.id_failure_action_status"}})],1)]),a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:e.sapHeader.wo_order_no,callback:function(t){e.$set(e.sapHeader,"wo_order_no",t)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Notification Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Notification Type",disabled:!0},model:{value:e.sapHeader.notification_type,callback:function(t){e.$set(e.sapHeader,"notification_type",t)},expression:"sapHeader.notification_type"}})],1)]),a("div",{staticClass:"input-wrapper",staticStyle:{"grid-column":"span 2"}},[a("span",[e._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description (Maximum 40 characters)","max-length":"40"},model:{value:e.sapHeader.description,callback:function(t){e.$set(e.sapHeader,"description",t)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:e.sapHeader.functional_location,callback:function(t){e.$set(e.sapHeader,"functional_location",t)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0},model:{value:e.sapHeader.planner_grp,callback:function(t){e.$set(e.sapHeader,"planner_grp",t)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0},model:{value:e.sapHeader.planner_grp_planning_plant,callback:function(t){e.$set(e.sapHeader,"planner_grp_planning_plant",t)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},model:{value:e.sapHeader.main_workctr,callback:function(t){e.$set(e.sapHeader,"main_workctr",t)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:e.sapHeader.code_grp_object_part,callback:function(t){e.$set(e.sapHeader,"code_grp_object_part",t)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:e.sapHeader.object_part_code,callback:function(t){e.$set(e.sapHeader,"object_part_code",t)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:e.sapHeader.code_grp_damage,callback:function(t){e.$set(e.sapHeader,"code_grp_damage",t)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:e.sapHeader.damage_code,callback:function(t){e.$set(e.sapHeader,"damage_code",t)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:e.sapHeader.damage_free_text,callback:function(t){e.$set(e.sapHeader,"damage_free_text",t)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:e.sapHeader.code_grp_cause,callback:function(t){e.$set(e.sapHeader,"code_grp_cause",t)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:e.sapHeader.cause_code,callback:function(t){e.$set(e.sapHeader,"cause_code",t)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:e.sapHeader.cause_grp_free_text,callback:function(t){e.$set(e.sapHeader,"cause_grp_free_text",t)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_start_date,callback:function(t){e.$set(e.sapHeader,"required_start_date",t)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_start_time,callback:function(t){e.$set(e.sapHeader,"required_start_time",t)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_end_date,callback:function(t){e.$set(e.sapHeader,"required_end_date",t)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_end_time,callback:function(t){e.$set(e.sapHeader,"required_end_time",t)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:e.sapHeader.additional_data,callback:function(t){e.$set(e.sapHeader,"additional_data",t)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:e.sapHeader.accessibility,callback:function(t){e.$set(e.sapHeader,"accessibility",t)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:e.sapHeader.scaffolding_requirement,callback:function(t){e.$set(e.sapHeader,"scaffolding_requirement",t)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"submit",on:{click:e.UPDATE_RECORD}},[e._v("Submit")]),a("button",{on:{click:function(t){return e.$emit("popup",0)}}},[e._v("Cancel")])])])])])},b=[];a(79389);const R={name:"edit-short-term",props:{id_record:Number},components:{DxSelectBox:p(),DxTextBox:_(),DxDateBox:m()},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: ",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_FAILURE_ACTION_RECORD()},data:function(){return{failureActionRecordList:{},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null}}},computed:{},methods:{FETCH_FAILURE_ACTION_RECORD:function(){var e=this;console.log(this.id_record),this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureActionRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("FailureActionRecord",t),200==t.status&&t.data&&(e.failureActionRecordList=t.data,(0,s.p)({method:"get",url:"/SapHeader/get-sap-header-by-module-from-module?id_module=2&id_from_module="+e.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){if(console.log("SapHeader",t),e.sapHeader=t.data[0],e.sapHeader.required_end_date){var a=e.sapHeader.required_end_date.substring(0,4),i=e.sapHeader.required_end_date.substring(4,6)-1,r=e.sapHeader.required_end_date.substring(6,8);e.sapHeader.required_end_date=new Date(a,i,r)}if(e.sapHeader.required_start_date){var s=e.sapHeader.required_start_date.substring(0,4),o=e.sapHeader.required_start_date.substring(4,6)-1,l=e.sapHeader.required_start_date.substring(6,8);e.sapHeader.required_start_date=new Date(s,o,l)}e.sapHeader.required_start_time&&(e.sapHeader.required_start_time=n()(e.sapHeader.required_start_time,["HHmmss"]).format("lll"),console.log(e.sapHeader.required_start_time)),e.sapHeader.required_end_time&&(e.sapHeader.required_end_time=n()(e.sapHeader.required_end_time,["HHmmss"]).format("lll"),console.log(e.sapHeader.required_end_time))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1})))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FAILURE_ACTION_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureactionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.status=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.functionalLocation=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrp=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrpPlanning=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.mainWorkCtr=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.objectpartCode=t.data;for(var a=0;a<e.formSelect.objectpartCode.length;a++)e.formSelect.objectpartCode[a].ddl=e.formSelect.objectpartCode[a].object_part_code+"-"+e.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpObjectpart=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpDamage=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.damageCode=t.data;for(var a=0;a<e.formSelect.damageCode.length;a++)e.formSelect.damageCode[a].ddl=e.formSelect.damageCode[a].damage_code+"-"+e.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpCause=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.causeCode=t.data;for(var a=0;a<e.formSelect.causeCode.length;a++)e.formSelect.causeCode[a].ddl=e.formSelect.causeCode[a].cause_code+"-"+e.formSelect.causeCode[a].cause_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.accessibility=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.scaffoldingReq=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_RECORD:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?n()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.updated_by=t.id,(0,s.p)({method:"put",url:"/FailureActionRecord/"+this.failureActionRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),204==a.status&&(e.sapHeader.required_start_date=e.sapHeader.required_start_date?n()(e.sapHeader.required_start_date).format("YYYYMMDD"):"",e.sapHeader.required_end_date=e.sapHeader.required_end_date?n()(e.sapHeader.required_end_date).format("YYYYMMDD"):"",e.sapHeader.required_start_time=e.sapHeader.required_start_time?n()(e.sapHeader.required_start_time).format("HHmmss"):"",e.sapHeader.required_end_time=e.sapHeader.required_end_time?n()(e.sapHeader.required_end_time).format("HHmmss"):"",e.sapHeader.updated_by=t.id,(0,s.p)({method:"put",url:"/SapHeader/"+e.sapHeader.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.sapHeader}).then((function(t){console.log("SapHeaderRes",t),e.$emit("popup")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){})))}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(){var e=this;(0,s.p)({method:"delete",url:"/FailureActionRecord/delete-failure-action-record?id="+this.failureActionRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(2)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)}}},E=R;var D=(0,v.A)(E,S,b,!1,null,"a801b7ce",null);const T=D.exports;var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("New Long Term Tracking")]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Action Details")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Action Details"},model:{value:e.failureActionRecordList.action_details,callback:function(t){e.$set(e.failureActionRecordList,"action_details",t)},expression:"failureActionRecordList.action_details"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Discipline")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline","search-enabled":!0},model:{value:e.failureActionRecordList.id_discipline,callback:function(t){e.$set(e.failureActionRecordList,"id_discipline",t)},expression:"failureActionRecordList.id_discipline"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Action Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Action Date","display-format":"dd MMM yyyy"},model:{value:e.failureActionRecordList.action_date,callback:function(t){e.$set(e.failureActionRecordList,"action_date",t)},expression:"failureActionRecordList.action_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Failure Action Status")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.failureactionStatus,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Action Status","search-enabled":!0},model:{value:e.failureActionRecordList.id_failure_action_status,callback:function(t){e.$set(e.failureActionRecordList,"id_failure_action_status",t)},expression:"failureActionRecordList.id_failure_action_status"}})],1)]),a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:e.sapHeader.wo_order_no,callback:function(t){e.$set(e.sapHeader,"wo_order_no",t)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Notification Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Notification Type",disabled:!0},model:{value:e.sapHeader.notification_type,callback:function(t){e.$set(e.sapHeader,"notification_type",t)},expression:"sapHeader.notification_type"}})],1)]),a("div",{staticClass:"input-wrapper",staticStyle:{"grid-column":"span 2"}},[a("span",[e._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description (Maximum 40 characters)","max-length":"40"},model:{value:e.sapHeader.description,callback:function(t){e.$set(e.sapHeader,"description",t)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:e.sapHeader.functional_location,callback:function(t){e.$set(e.sapHeader,"functional_location",t)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},on:{"value-changed":e.ON_MAIN_WORKCTR_CHANGED},model:{value:e.sapHeader.main_workctr,callback:function(t){e.$set(e.sapHeader,"main_workctr",t)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp,callback:function(t){e.$set(e.sapHeader,"planner_grp",t)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0,disabled:!0},model:{value:e.sapHeader.planner_grp_planning_plant,callback:function(t){e.$set(e.sapHeader,"planner_grp_planning_plant",t)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:e.sapHeader.code_grp_object_part,callback:function(t){e.$set(e.sapHeader,"code_grp_object_part",t)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:e.sapHeader.object_part_code,callback:function(t){e.$set(e.sapHeader,"object_part_code",t)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:e.sapHeader.code_grp_damage,callback:function(t){e.$set(e.sapHeader,"code_grp_damage",t)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:e.sapHeader.damage_code,callback:function(t){e.$set(e.sapHeader,"damage_code",t)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:e.sapHeader.damage_free_text,callback:function(t){e.$set(e.sapHeader,"damage_free_text",t)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:e.sapHeader.code_grp_cause,callback:function(t){e.$set(e.sapHeader,"code_grp_cause",t)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:e.sapHeader.cause_code,callback:function(t){e.$set(e.sapHeader,"cause_code",t)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:e.sapHeader.cause_grp_free_text,callback:function(t){e.$set(e.sapHeader,"cause_grp_free_text",t)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_start_date,callback:function(t){e.$set(e.sapHeader,"required_start_date",t)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_start_time,callback:function(t){e.$set(e.sapHeader,"required_start_time",t)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_end_date,callback:function(t){e.$set(e.sapHeader,"required_end_date",t)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_end_time,callback:function(t){e.$set(e.sapHeader,"required_end_time",t)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:e.sapHeader.additional_data,callback:function(t){e.$set(e.sapHeader,"additional_data",t)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:e.sapHeader.accessibility,callback:function(t){e.$set(e.sapHeader,"accessibility",t)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:e.sapHeader.scaffolding_requirement,callback:function(t){e.$set(e.sapHeader,"scaffolding_requirement",t)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"create",on:{click:e.CREATE_RECORD}},[e._v("Create")]),a("button",{on:{click:function(t){return e.$emit("popup",0)}}},[e._v("Cancel")])])])])])},L=[];const A={name:"add-long-term",props:{id_record:Number,id_platform:Number},components:{DxSelectBox:p(),DxTextBox:_(),DxDateBox:m()},created:function(){console.log("id_record:"+this.id_record),console.log("id_platform:"+this.id_platform),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_PLATFORM()},data:function(){return{failureActionRecordList:{id:0,is_active:!0,id_failure:this.id_record,action_type:"long-term",id_failure_action_status:null,id_discipline:null,action_date:null,action_details:null},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{notification_type:"CM",code_grp_object_part:"MECH-PI",code_grp_damage:"MECH-PI",code_grp_cause:"MECH-PI",id_module:2,id_from_module:null,id_reference:null,is_active:!0,required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null,reported_by:"AIMS",abc_indicator:"1",user_status:"SCRN"}}},computed:{},methods:{CREATE_RECORD:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?n()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.created_by=t.id,this.failureActionRecordList.updated_by=t.id,(0,s.p)({method:"post",url:"/FailureActionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),201==a.status&&(e.sapHeader.id_from_module=a.data.id,e.sapHeader.id_reference="RR"+a.data.id,e.sapHeader.required_start_date=e.sapHeader.required_start_date?n()(e.sapHeader.required_start_date).format("YYYYMMDD"):"",e.sapHeader.required_end_date=e.sapHeader.required_end_date?n()(e.sapHeader.required_end_date).format("YYYYMMDD"):"",e.sapHeader.required_start_time=e.sapHeader.required_start_time?n()(e.sapHeader.required_start_time).format("HHmmss"):null,e.sapHeader.required_end_time=e.sapHeader.required_end_time?n()(e.sapHeader.required_end_time).format("HHmmss"):null,e.sapHeader.created_by=t.id,e.sapHeader.updated_by=t.id,(0,s.p)({method:"post",url:"/SapHeader",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.sapHeader}).then((function(t){console.log("SapHeaderRes",t),e.$emit("popup")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){})))}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_FAILURE_ACTION_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureactionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.status=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.functionalLocation=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrp=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrpPlanning=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.mainWorkCtr=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.objectpartCode=t.data;for(var a=0;a<e.formSelect.objectpartCode.length;a++)e.formSelect.objectpartCode[a].ddl=e.formSelect.objectpartCode[a].object_part_code+"-"+e.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpObjectpart=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpDamage=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.damageCode=t.data;for(var a=0;a<e.formSelect.damageCode.length;a++)e.formSelect.damageCode[a].ddl=e.formSelect.damageCode[a].damage_code+"-"+e.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpCause=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.causeCode=t.data;for(var a=0;a<e.formSelect.causeCode.length;a++)e.formSelect.causeCode[a].ddl=e.formSelect.causeCode[a].cause_code+"-"+e.formSelect.causeCode[a].cause_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.accessibility=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.scaffoldingReq=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLATFORM:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){var a=t.data.filter((function(t){return t.id==e.id_platform}));e.sapHeader.planner_grp_planning_plant=a[0].planning_plant}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},ON_MAIN_WORKCTR_CHANGED:function(e){console.log(e);var t=this.formSelect.mainWorkCtr.filter((function(t){return t.code==e.value}));this.sapHeader.planner_grp=t[0].planner_grp}}},y=A;var O=(0,v.A)(y,H,L,!1,null,"05347465",null);const w=O.exports;var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("Edit Long Term Tracking")]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[e._v("Action Details")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Action Details"},model:{value:e.failureActionRecordList.action_details,callback:function(t){e.$set(e.failureActionRecordList,"action_details",t)},expression:"failureActionRecordList.action_details"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Discipline")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.discipline,"value-expr":"id","display-expr":"discipline",placeholder:"Select Discipline","search-enabled":!0},model:{value:e.failureActionRecordList.id_discipline,callback:function(t){e.$set(e.failureActionRecordList,"id_discipline",t)},expression:"failureActionRecordList.id_discipline"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Action Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Action Date","display-format":"dd MMM yyyy"},model:{value:e.failureActionRecordList.action_date,callback:function(t){e.$set(e.failureActionRecordList,"action_date",t)},expression:"failureActionRecordList.action_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Failure Action Status")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.failureactionStatus,"value-expr":"id","display-expr":"status",placeholder:"Select Failure Action Status","search-enabled":!0},model:{value:e.failureActionRecordList.id_failure_action_status,callback:function(t){e.$set(e.failureActionRecordList,"id_failure_action_status",t)},expression:"failureActionRecordList.id_failure_action_status"}})],1)]),a("h4",{staticStyle:{"grid-column":"span 4"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:e.sapHeader.wo_order_no,callback:function(t){e.$set(e.sapHeader,"wo_order_no",t)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter WO Type",disabled:!0},model:{value:e.sapHeader.wo_type,callback:function(t){e.$set(e.sapHeader,"wo_type",t)},expression:"sapHeader.wo_type"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description",disabled:!0},model:{value:e.sapHeader.description,callback:function(t){e.$set(e.sapHeader,"description",t)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:e.sapHeader.functional_location,callback:function(t){e.$set(e.sapHeader,"functional_location",t)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0},model:{value:e.sapHeader.planner_grp,callback:function(t){e.$set(e.sapHeader,"planner_grp",t)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0},model:{value:e.sapHeader.planner_grp_planning_plant,callback:function(t){e.$set(e.sapHeader,"planner_grp_planning_plant",t)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},model:{value:e.sapHeader.main_workctr,callback:function(t){e.$set(e.sapHeader,"main_workctr",t)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:e.sapHeader.code_grp_object_part,callback:function(t){e.$set(e.sapHeader,"code_grp_object_part",t)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:e.sapHeader.object_part_code,callback:function(t){e.$set(e.sapHeader,"object_part_code",t)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:e.sapHeader.code_grp_damage,callback:function(t){e.$set(e.sapHeader,"code_grp_damage",t)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:e.sapHeader.damage_code,callback:function(t){e.$set(e.sapHeader,"damage_code",t)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:e.sapHeader.damage_free_text,callback:function(t){e.$set(e.sapHeader,"damage_free_text",t)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:e.sapHeader.code_grp_cause,callback:function(t){e.$set(e.sapHeader,"code_grp_cause",t)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:e.sapHeader.cause_code,callback:function(t){e.$set(e.sapHeader,"cause_code",t)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:e.sapHeader.cause_grp_free_text,callback:function(t){e.$set(e.sapHeader,"cause_grp_free_text",t)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_start_date,callback:function(t){e.$set(e.sapHeader,"required_start_date",t)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_start_time,callback:function(t){e.$set(e.sapHeader,"required_start_time",t)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:e.sapHeader.required_end_date,callback:function(t){e.$set(e.sapHeader,"required_end_date",t)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:e.sapHeader.required_end_time,callback:function(t){e.$set(e.sapHeader,"required_end_time",t)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:e.sapHeader.additional_data,callback:function(t){e.$set(e.sapHeader,"additional_data",t)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:e.sapHeader.accessibility,callback:function(t){e.$set(e.sapHeader,"accessibility",t)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:e.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:e.sapHeader.scaffolding_requirement,callback:function(t){e.$set(e.sapHeader,"scaffolding_requirement",t)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"submit",on:{click:e.UPDATE_RECORD}},[e._v("Submit")]),a("button",{on:{click:function(t){return e.$emit("popup",0)}}},[e._v("Cancel")])])])])])},F=[];a(63534),a(40590);const k={name:"edit-long-term",props:{id_record:Number},components:{DxSelectBox:p(),DxTextBox:_(),DxDateBox:m()},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: ",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_FAILURE_ACTION_RECORD()},data:function(){return{failureActionRecordList:{},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null}}},computed:{},methods:{FETCH_FAILURE_ACTION_RECORD:function(){var e=this;console.log(this.id_record),this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureActionRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("FailureActionRecord",t),200==t.status&&t.data&&(e.failureActionRecordList=t.data,(0,s.p)({method:"get",url:"/SapHeader/get-sap-header-by-module-from-module?id_module=2&id_from_module="+e.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){if(console.log("SapHeader",t),e.sapHeader=t.data[0],e.sapHeader.descriptionI=e.sapHeader.description,e.sapHeader.required_end_date){var a=e.sapHeader.required_end_date.substring(0,4),i=e.sapHeader.required_end_date.substring(4,6)-1,r=e.sapHeader.required_end_date.substring(6,8);e.sapHeader.required_end_date=new Date(a,i,r)}if(e.sapHeader.required_start_date){var s=e.sapHeader.required_start_date.substring(0,4),o=e.sapHeader.required_start_date.substring(4,6)-1,l=e.sapHeader.required_start_date.substring(6,8);e.sapHeader.required_start_date=new Date(s,o,l)}e.sapHeader.required_start_time&&(e.sapHeader.required_start_time=n()(e.sapHeader.required_start_time,["HHmmss"]).format("lll"),console.log(e.sapHeader.required_start_time)),e.sapHeader.required_end_time&&(e.sapHeader.required_end_time=n()(e.sapHeader.required_end_time,["HHmmss"]).format("lll"),console.log(e.sapHeader.required_end_time))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1})))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FAILURE_ACTION_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureactionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.status=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.functionalLocation=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrp=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.plannerGrpPlanning=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.mainWorkCtr=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.objectpartCode=t.data;for(var a=0;a<e.formSelect.objectpartCode.length;a++)e.formSelect.objectpartCode[a].ddl=e.formSelect.objectpartCode[a].object_part_code+"-"+e.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpObjectpart=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpDamage=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.damageCode=t.data;for(var a=0;a<e.formSelect.damageCode.length;a++)e.formSelect.damageCode[a].ddl=e.formSelect.damageCode[a].damage_code+"-"+e.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.codegrpCause=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){if(200==t.status&&t.data){e.formSelect.causeCode=t.data;for(var a=0;a<e.formSelect.causeCode.length;a++)e.formSelect.causeCode[a].ddl=e.formSelect.causeCode[a].cause_code+"-"+e.formSelect.causeCode[a].cause_text}}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.accessibility=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.scaffoldingReq=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},UPDATE_RECORD:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?n()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.updated_by=t.id,(0,s.p)({method:"put",url:"/FailureActionRecord/"+this.failureActionRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),204==a.status&&(e.sapHeader.reported_by="AIMS",e.sapHeader.description=(e.sapHeader.id_reference+"-"+e.sapHeader.equipment_no+"-"+e.failureActionRecordList.action_details).substring(0,41),e.sapHeader.required_start_date=e.sapHeader.required_start_date?n()(e.sapHeader.required_start_date).format("YYYYMMDD"):"",e.sapHeader.required_end_date=e.sapHeader.required_end_date?n()(e.sapHeader.required_end_date).format("YYYYMMDD"):"",e.sapHeader.required_start_time=e.sapHeader.required_start_time?n()(e.sapHeader.required_start_time).format("HHmmss"):"",e.sapHeader.required_end_time=e.sapHeader.required_end_time?n()(e.sapHeader.required_end_time).format("HHmmss"):"",e.sapHeader.updated_by=t.id,(0,s.p)({method:"put",url:"/SapHeader/"+e.sapHeader.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:e.sapHeader}).then((function(t){console.log("SapHeaderRes",t),e.$emit("popup")}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){})))}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(){var e=this;(0,s.p)({method:"delete",url:"/FailureActionRecord/delete-failure-action-record?id="+this.failureActionRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(2)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)}}},I=k;var B=(0,v.A)(I,N,F,!1,null,"4885e80e",null);const P=B.exports;var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-ltt-detail-master"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 5","margin-bottom":"0","margin-top":"0","font-size":"16px"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.wo_order_no))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Description")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.description))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.functional_location))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Equipment No.")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.equipment_no))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.main_workctr))])])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.object_part_code))])])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.damage_code))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.cause_code))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.required_start_date))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.required_end_date))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.additional_data))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.accessibility.code))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.scaffolding_requirement))])])]),a("div"),a("div")])])},q=[];const $={name:"edit-long-term",props:{sapData:Object},components:{},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: ",subpageInnerName:null}),this.FETCH_SAP_BY_MODULE()},data:function(){return{id_module:this.sapData.key,sapbymoduleList:{},failureActionRecordList:{},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{}}},computed:{},methods:{FETCH_SAP_BY_MODULE:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/SapHeader/get-sap-header-by-module-from-module?id_module=2&id_from_module="+this.id_module,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.sapbymoduleList=t.data[0],console.log("sap by module ",e.sapbymoduleList))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))}}},G=$;var U=(0,v.A)(G,M,q,!1,null,"adb58064",null);const j=U.exports;var J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-ltt-detail-master"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 5","margin-bottom":"0","margin-top":"0","font-size":"16px"}},[e._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("WO Order No.")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.wo_order_no))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Description")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.description))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Functional Location")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.functional_location))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Equipment No.")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.equipment_no))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.main_workctr))])])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Object Part Code")]),a("div",{staticClass:"select"},[a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.object_part_code))])])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Damage Code")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.damage_code))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Cause Code")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.cause_code))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required Start Date")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.required_start_date))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Required End Date")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.required_end_date))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Addtional Data")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.additional_data))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Accessibility")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.accessibility))])])]),a("div",{staticClass:"input-wrapper"},[a("span",[e._v("Scaffolding Requirement")]),a("ul",[a("li",[e._v(e._s(e.sapbymoduleList.scaffolding_requirement))])])]),a("div"),a("div")])])},z=[];const W={name:"edit-long-term",props:{sapData:Object},components:{},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: ",subpageInnerName:null}),this.FETCH_SAP_BY_MODULE()},data:function(){return{id_module:this.sapData.key,sapbymoduleList:{},failureActionRecordList:{},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{}}},computed:{},methods:{FETCH_SAP_BY_MODULE:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/SapHeader/get-sap-header-by-module-from-module?id_module=2&id_from_module="+this.id_module,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.sapbymoduleList=t.data[0],console.log("sap by module ",e.sapbymoduleList))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))}}},Y=W;var V=(0,v.A)(Y,J,z,!1,null,"71d73a96",null);const K=V.exports;var Q=a(14817),X=a.n(Q),Z=a(70296),ee=a.n(Z),te=a(83954),ae=a(68477),ie=a(63869);const re={name:"inspection-record",props:{data_row:Object},components:{DxDataGrid:ie.DxDataGrid,DxSearchPanel:ie.DxSearchPanel,DxPaging:ie.DxPaging,DxPager:ie.DxPager,DxScrolling:ie.DxScrolling,DxColumn:ie.DxColumn,DxExport:ie.DxExport,DxToolbar:ie.DxToolbar,DxHeaderFilter:ie.DxHeaderFilter,DxSelection:ie.DxSelection,DxForm:ie.DxForm,DxItem:te.DxItem,DxEditing:ie.DxEditing,DxFilterRow:ie.DxFilterRow,DxButton:ee(),DxLookup:ie.DxLookup,DxSelectBox:p(),DxTextBox:_(),DxDateBox:m(),DxTextArea:X(),AddSTT:x,EditSTT:T,AddLTT:w,EditLTT:P,DxPopup:ie.DxPopup,DxFileUploader:ae.DxFileUploader,DxMasterDetail:ie.DxMasterDetail,SapLTT:j,SapSTT:K},created:function(){console.log(this.data_row),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: "+this.data_row.fl_number,subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_FAILURE_RECORD(),this.FETCH_LIBRARY(),this.FETCH_DROPDOWN_FAILURE_IMPACT(),this.FETCH_DROPDOWN_DISCIPLINE(),this.FETCH_DROPDOWN_PLATFORM_LIST(),this.FETCH_DROPDOWN_ACTION_STATUS(),this.user=JSON.parse(localStorage.getItem("user")),this.user.failure_seq=2)},data:function(){return{formSelect:{platform:[],failureImpact:[],discipline:[],actionStatus:[]},failureRecordList:{},shortTermRecordList:{},longTermRecordList:{},btn_state:!1,isShow:0,selectedRow:0,library:[],file:[],gridRefName:"grid-library",fileNameInputOptions:{placeholder:"File Name"},dataFileTemp:"",isEdit:!1,id_record:this.data_row.id,user:null,rejectFailureRecord:!1,rejectFailureRemark:""}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_FAILURE_RECORD:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.failureRecordList=t.data,e.FETCH_SHORT_TERM_RECORD(),e.FETCH_LONG_TERM_RECORD())}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SHORT_TERM_RECORD:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureActionRecord/get-failure-action-record-short-term-by-id?id_failure="+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.shortTermRecordList=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_LONG_TERM_RECORD:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureActionRecord/get-failure-action-record-long-term-by-id?id_failure="+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.longTermRecordList=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},DELETE_FAILURE_ACTION_RECORD:function(e){var t=this;(0,s.p)({method:"delete",url:"/FailureActionRecord/delete-failure-action-record?id="+e.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&(t.FETCH_SHORT_TERM_RECORD(),t.FETCH_LONG_TERM_RECORD())}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},UPDATE_RECORD:function(){var e=this;this.failureRecordList.findings_date&&(this.failureRecordList.findings_date=n()(this.failureRecordList.findings_date).format("L")),(0,s.p)({method:"put",url:"/FailureRecord/"+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureRecordList}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(0)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},DELETE_RECORD:function(){var e=this;(0,s.p)({method:"delete",url:"/FailureRecord/delete-failure-record?id="+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.SET_CURRENT_VIEW(0)}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_STT_RECORD:function(){this.isShow=0,this.FETCH_SHORT_TERM_RECORD()},FETCH_LTT_RECORD:function(){this.isShow=0,this.FETCH_LONG_TERM_RECORD()},FETCH_LIBRARY:function(){var e=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureFile/get-failure-file-by-id?id="+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("fetch library",t),200==t.status&&(e.library=t.data,e.isLoading=!1)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_FAILURE_IMPACT:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-impact-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.failureImpact=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_DISCIPLINE:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.discipline=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_PLATFORM_LIST:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.platform=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DROPDOWN_ACTION_STATUS:function(){var e=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.formSelect.actionStatus=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},ADD_NEW_FILE:function(e){var t=this;console.log("e",e);var a=new FormData;if(a.append("id_failure",this.failureRecordList.id),a.append("file",this.file),a.append("note",e.data.note),0==this.file.length)return this.$ons.notification.alert("Please select file").then((function(e){0==e&&t.FETCH_LIBRARY()}));(0,s.p)({method:"post",url:"/FailureFile",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:a}).then((function(e){console.log(e),201==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Add New File failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))},UPDATE_DOC:function(e){var t,a=this,i=new FormData;i.append("id",e.data.id),i.append("id_failure",e.data.id_failure),i.append("file",null!==(t=this.file)&&void 0!==t?t:""),i.append("note",e.data.note),(0,s.p)({method:"put",url:"/FailureFile/"+e.data.id,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:i}).then((function(e){console.log(e),204==e.status&&a.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),a.isLoading=!1,a.$ons.notification.alert(e.message,{title:"Update File failed"}).then((function(e){0==e&&a.FETCH_LIBRARY()}))}))["finally"]((function(){a.isLoading=!1}))},VALUE_CHANGE:function(e){console.log(e),console.log(e.value[0].name);var t=new FileReader;t.readAsDataURL(e.value[0]),t.onload=function(){},this.file=e.value[0]},SAVE:function(e){console.log(e),console.log(this.file),(e.changes.length>0||this.file.size>0)&&this.isEdit&&(console.log("save"),this.UPDATE_DOC(this.dataFileTemp))},DOWNLOAD:function(e,t){console.log(t);var a=this.baseURL+e,i=document.createElement("a");i.href=a,i.setAttribute("download",t),i.setAttribute("target","_blank"),document.body.appendChild(i),i.click()},DELETE_DOC:function(e){var t=this,a=e.data.id;(0,s.p)({method:"delete",url:"/FailureFile/"+a,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.FETCH_LIBRARY()}))["catch"]((function(e){console.log(e),t.isLoading=!1,t.$ons.notification.alert(e.message,{title:"Delete failed"}).then((function(e){0==e&&t.FETCH_LIBRARY()}))}))["finally"]((function(){t.isLoading=!1}))},ADD_ROW:function(){var e=this.$refs[this.gridRefName].instance;e.addRow(),e.deselectAll()},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},APPROVE_FAILURE_RECORD:function(){var e=this;(0,s.p)({method:"post",url:"/FailureRecordTXN/add-submit-txn?id_user=".concat(this.user.id,"&id_failure=").concat(this.data_row.id),headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){e.status}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},REJECT_FAILURE_RECORD:function(){var e=this;(0,s.p)({method:"post",url:"/FailureRecordTXN/add-reject-txn?id_user=".concat(this.user.id,"&id_failure=").concat(this.data_row.id,"&remark=").concat(this.rejectFailureRemark),headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){e.status}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))}}},se=re;var oe=(0,v.A)(se,i,r,!1,null,"ab58010a",null);const ne=oe.exports},60229:(e,t,a)=>{a.d(t,{A:()=>v});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"action-bar"},[a("button",{staticClass:"back",on:{click:function(t){return e.SET_CURRENT_VIEW(0)}}},[a("i",{staticClass:"fas fa-chevron-left"}),e._v(" BACK ")]),e._m(0)]),e._m(1)])},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("button",{staticClass:"submit"},[e._v("APPROVE")]),a("button",{staticClass:"delete"},[e._v("REJECT")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("div",{attrs:{id:"pdfPreview"}})])])}],s=a(78676),o=a(3604),n=a(30388),l=(a(61373),a(5086),a(18772),a(58476),a(58379),a(87136),a(58649),a(14117),a(69858),a(54754),a(99078),a(91954),a(1772),a(53746),a(28921),a(20861),a(71905),a(85213),a(97182),a(12279),a(39302),a(70147),a(66217),a(97966),a(35186),a(35944),a(44787),a(50632),a(52278),a(14245),a(52492),a(93266),a(37192),a(37220),a(82432),a(32483),a(36696),a(58083),a(51337),a(7036),a(4517),a(21794),a(71319),a(29979),a(14602),a(30789),a(60933),a(17),a(88704)),d=a(49148),c=a.n(d),p=a(54133),u=a.n(p),_=a(42181);const f={name:"failure-report",props:{data_row:Object},components:{},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FR NUMBER: "+this.data_row.fl_number,subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DISC(),this.FETCH_IMPACT(),this.FETCH_PLATFORM(),this.FETCH_FAILURE_RECORD(),this.FETCH_LIBRARY(),u().vfs=_.b.vfs)},data:function(){return{failureRecordList:{},shortTermRecordList:[],longTermRecordList:[],shortTermLength:2,longTermLength:2,export_status:{active:!1,cur:0,max:0},library:[],platform:[],disc:[],impact:[],id_record:this.data_row.id,base64ImageUrl:""}},computed:{baseURL:function(){var e=this.$store.state.mode;return"dev"==e?this.$store.state.modeURL.dev:"prod"==e?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_FAILURE_RECORD:function(){var e=this;this.isLoading=!0,(0,l.p)({method:"get",url:"/FailureRecord/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.failureRecordList=t.data,e.FETCH_SHORT_TERM_RECORD(),e.FETCH_LONG_TERM_RECORD(),e.$nextTick((function(){var e=this;window.setTimeout((function(){e.generatePDF()}),500)})))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_SHORT_TERM_RECORD:function(){var e=this;this.isLoading=!0,(0,l.p)({method:"get",url:"/FailureActionRecord/get-failure-action-record-short-term-by-id?id_failure="+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.shortTermRecordList=t.data,e.shortTermLength=e.shortTermRecordList.length+1,console.log("shortTermRecordList",e.shortTermRecordList))}))["catch"]((function(t){console.log(t),"NoActionRecorded"==t.response.data.message&&(e.shortTermLength=2)}))["finally"]((function(){e.isLoading=!1}))},FETCH_LONG_TERM_RECORD:function(){var e=this;this.isLoading=!0,(0,l.p)({method:"get",url:"/FailureActionRecord/get-failure-action-record-long-term-by-id?id_failure="+this.failureRecordList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&(e.longTermRecordList=t.data,e.longTermLength=e.longTermRecordList.length+1,console.log("longTermRecordList",e.longTermRecordList))}))["catch"]((function(t){console.log(t),"NoActionRecorded"==t.response.data.message&&(e.longTermLength=2)}))["finally"]((function(){e.isLoading=!1}))},FETCH_LIBRARY:function(){var e=this;this.isLoading=!0,(0,l.p)({method:"get",url:"/FailureFile/get-failure-file-by-id?id="+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){console.log("fetch library",t),200==t.status&&(e.library=t.data,e.isLoading=!1,console.log("library",e.library))}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_PLATFORM:function(){var e=this;(0,l.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.platform=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_DISC:function(){var e=this;(0,l.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.disc=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},FETCH_IMPACT:function(){var e=this;(0,l.p)({method:"get",url:"/Md/get-md-failure-impact-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(t){200==t.status&&t.data&&(e.impact=t.data)}))["catch"]((function(e){console.log(e)}))["finally"]((function(){e.isLoading=!1}))},DATE_FORMAT:function(e){return c()(e).format("DD MMM yyyy")},SET_CURRENT_VIEW:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==t?this.$emit("currentView",e,t):this.$emit("currentView",e)},convertImageToBase64:function(e){return new Promise((function(t,a){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d");e.width=i.width,e.height=i.height,a.drawImage(i,0,0);var r=e.toDataURL("image/png");t(r)},i.onerror=function(e){a(e)},i.src=e}))},convert:function(e){var t=this;return(0,n.A)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.error=null,a.next=4,t.convertImageToBase64(e);case 4:t.base64ImageUrl=a.sent,a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),t.error=a.t0,console.error("Failed to convert image:",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},headerTable:function(){return{widths:[85.5,"*",37.5,48],body:[[{rowSpan:4,image:"logo",width:60,height:50,alignment:"center",margin:[0,0,0,0]},{rowSpan:4,text:"FAILURE REPORT",style:"headerTitle",alignment:"center",margin:[0,20,0,0]},{text:"No:",style:"cellLeft"},{text:this.failureRecordList?this.failureRecordList.fl_number:"-",style:"headerCellRight"}],["","",{text:"Date:",style:"cellLeft"},{text:this.failureRecordList?this.DATE_FORMAT(this.failureRecordList.findings_date):"-",style:"headerCellRight"}],["","",{text:"Discipline:",style:"cellLeft"},{text:this.failureRecordList?this.GET_DISC(this.failureRecordList.id_discipline):"-",style:"headerCellRight"}],["","",{text:"Originator:",style:"cellLeft"},{text:this.failureRecordList?this.failureRecordList.created_by:"-",style:"headerCellRight"}]]}},subHeaderTable:function(){var e,t,a,i,r,s,o;return void 0===this.failureRecordList?{}:{widths:[60,"*",60,"*",60,"*"],border:[!0,!1,!0,!0],body:[[{text:"Tag No:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:null===(e=this.failureRecordList)||void 0===e?void 0:e.tag_no,border:[!0,!1,!0,!0]},{text:"Location:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_PLATFORM(null===(t=this.failureRecordList)||void 0===t?void 0:t.id_platform),border:[!0,!1,!0,!0]},{text:"Failure Impact:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_IMPACT(null===(a=this.failureRecordList)||void 0===a?void 0:a.id_failure_impact),border:[!0,!1,!0,!0]}],[{text:"Drawing No:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:null===(i=this.failureRecordList)||void 0===i?void 0:i.drawing_no,border:[!0,!1,!0,!0]},{text:"Unit:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:null===(r=this.failureRecordList)||void 0===r?void 0:r.unit,border:[!0,!1,!0,!0]},{text:"Equipment Type:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:null===(s=this.failureRecordList)||void 0===s?void 0:s.equipment_type,border:[!0,!1,!0,!0]}],[{text:"Findings Date:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.DATE_FORMAT(null===(o=this.failureRecordList)||void 0===o?void 0:o.findings_date),border:[!0,!1,!0,!0]},{text:"",border:[!0,!1,!0,!0],style:"cellLeft"},{text:"",border:[!0,!1,!0,!0]},{text:"",border:[!0,!1,!0,!0],style:"cellLeft"},{text:"",border:[!0,!1,!0,!0]}]]}},generatePictures:function(){var e=this;return(0,n.A)(regeneratorRuntime.mark((function t(){var a,i,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.library.length){t.next=2;break}return t.abrupt("return");case 2:a=[],i=(0,o.A)(e.library),t.prev=4,i.s();case 6:if((r=i.n()).done){t.next=14;break}return s=r.value,t.next=10,e.convert(e.baseURL+s.file_path);case 10:a.push([{style:"header",pageBreak:"before",table:e.headerTable()},{border:[!0,!1,!0,!0],table:e.subHeaderTable()},{image:e.base64ImageUrl,width:515,alignment:"center",border:[!0,!1,!0,!0]}]),e.base64ImageUrl="";case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](4),i.e(t.t0);case 19:return t.prev=19,i.f(),t.finish(19);case 22:return t.abrupt("return",a);case 23:case"end":return t.stop()}}),t,null,[[4,16,19,22]])})))()},generatePDF:function(){var e=this;return(0,n.A)(regeneratorRuntime.mark((function t(){var a,i,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=function(){var t=[[{rowSpan:e.shortTermLength,text:"Short-Term",style:"cellSubTitle",border:[!0,!1,!0,!0],margin:[0,4.5*e.shortTermLength,0,0]},{text:"Action No",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Action Detail",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Discipline",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Action Date",style:"cellSubTitle",border:[!0,!1,!0,!0]}]];return e.shortTermRecordList.forEach((function(a){t.push(["",{text:a.fa_number,border:[!0,!1,!0,!0]},{text:a.action_details,border:[!0,!1,!0,!0]},{text:e.GET_DISC(a.id_discipline),border:[!0,!1,!0,!0],alignment:"center"},{text:e.DATE_FORMAT(a.action_date),border:[!0,!1,!0,!0],alignment:"center"}])})),0===e.shortTermRecordList.length&&t.push(["",{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]}]),t},i=function(){var t=[[{rowSpan:e.longTermLength,text:"Long-Term",style:"cellSubTitle",border:[!0,!1,!0,!0],margin:[0,4.5*e.longTermLength,0,0]},{text:"Action No",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Action Detail",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Discipline",style:"cellSubTitle",border:[!0,!1,!0,!0]},{text:"Action Date",style:"cellSubTitle",border:[!0,!1,!0,!0]}]];return e.longTermRecordList.forEach((function(a){t.push(["",{text:a.fa_number,border:[!0,!1,!0,!0]},{text:a.action_details,border:[!0,!1,!0,!0]},{text:e.GET_DISC(a.id_discipline),border:[!0,!1,!0,!0],alignment:"center"},{text:e.DATE_FORMAT(a.action_date),border:[!0,!1,!0,!0],alignment:"center"}])})),0===e.longTermRecordList.length&&t.push(["",{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]},{text:"-",border:[!0,!1,!0,!0]}]),t},t.t0={title:"test"},t.t1={style:"header",table:e.headerTable(),layout:{vLineWidth:function(e){return 3===e?0:1}}},t.t2={border:[!0,!1,!0,!0],table:e.subHeaderTable(),layout:{vLineWidth:function(e){return 1===e||3===e||5===e?0:1}}},t.t3={table:{widths:"*",body:[[{text:"FAILURE DESCRIPTION",style:"cellTitle",border:[!0,!1,!0,!0]}]]}},t.t4={table:{widths:[85.5,"*"],body:[[{text:"Details:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.details,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t5={table:{widths:[85.5,"*"],body:[[{text:"Findings:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.findings,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t6={table:{widths:[85.5,"*"],body:[[{text:"Mitigation:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.mitigation,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t7={table:{widths:[85.5,"*"],body:[[{text:"Production Loss:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.production_loss,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t8={table:{widths:[85.5,"*"],body:[[{text:"Environment Impact:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.environment_impact,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t9={table:{widths:[85.5,"*"],body:[[{text:"Material Cost:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.material_cost,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t10={table:{widths:[85.5,"*"],body:[[{text:"Health and Safety:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:e.failureRecordList.health_and_safety,border:[!0,!1,!0,!0]}]]},layout:{vLineWidth:function(e){return 1===e?0:1}}},t.t11={table:{widths:"*",body:[[{text:"REMEDIAL ACTION",style:"cellTitle",border:[!0,!1,!0,!0]}]]}},t.t12={table:{widths:[50,68,"*",50,50],body:a()}},t.t13={table:{widths:[50,68,"*",50,50],body:i()}},t.t14={table:{widths:"*",body:[[{text:"REMARK",style:"cellTitle",border:[!0,!1,!0,!0]}],[{text:e.failureRecordList.remark?e.failureRecordList.material_cost:"-",border:[!0,!1,!0,!0]}]]}},t.t15={table:{widths:["*","*","*"],body:[[{text:"ACKNOWLEDGMENT",style:"cellTitle",border:[!0,!1,!0,!0],colSpan:3},"",""],[{text:"Team Leader",border:[!0,!1,!0,!0],bold:!0,alignment:"center"},{text:"Maintenance/Operation Supervisor",border:[!0,!1,!0,!0],bold:!0,alignment:"center"},{text:"OIM",border:[!0,!1,!0,!0],bold:!0,alignment:"center"}],[{text:"-",border:[!0,!1,!0,!1]},{text:"-",border:[!0,!1,!0,!1]},{text:"-",border:[!0,!1,!0,!1]}],[{text:"Name:",border:[!0,!1,!0,!0]},{text:"Name:",border:[!0,!1,!0,!0]},{text:"Name:",border:[!0,!1,!0,!0]}],[{text:"Date:",border:[!0,!1,!0,!0]},{text:"Date:",border:[!0,!1,!0,!0]},{text:"Date:",border:[!0,!1,!0,!0]}],[{text:"CMMS Input by:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:"Date:",style:"cellLeft",border:[!0,!1,!0,!0]},{text:"",style:"cellLeft",border:[!0,!1,!0,!0]}]]}},t.next=20,e.generatePictures();case 20:t.t16=t.sent,t.t17=[t.t1,t.t2,t.t3,t.t4,t.t5,t.t6,t.t7,t.t8,t.t9,t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16],t.t18=function(e){if(e.startPosition.top>800&&"REMEDIAL ACTION"==e.text||e.startPosition.top>700&&"REMARK"==e.text||e.startPosition.top>700&&"ACKNOWLEDGMENT"==e.text)return console.warn(e.text),e.startPosition.pageNumber=2,!0},t.t19={header:{},headerTitle:{fontSize:14,bold:!0},cellLeft:{fillColor:"#d3d3d3"},cellRight:{},cellTitle:{fontSize:10,bold:!0,fillColor:"#d3d3d3",alignment:"center"},cellSubTitle:{fontSize:8,fillColor:"#d3d3d3",alignment:"center"}},t.t20={fontSize:8},t.t21={logo:e.baseURL+"wwwroot/assets/cpoc_logo_new.png"},r={info:t.t0,content:t.t17,pageBreakBefore:t.t18,styles:t.t19,defaultStyle:t.t20,images:t.t21},o=u().createPdf(r),o.getDataUrl((function(e){for(var t=e.split(","),a=(0,s.A)(t,2),i=a[0],r=a[1],o=atob(r),n=new Uint8Array(o.length),l=0;l<o.length;l++)n[l]=o.charCodeAt(l);var d=i.split(":")[1].split(";")[0],c=new Blob([n],{type:d}),p=URL.createObjectURL(c);console.log(p);var u=document.createElement("embed");u.src=p,u.type="application/pdf",u.width="100%",u.height="600px",document.getElementById("pdfPreview").appendChild(u)}));case 29:case"end":return t.stop()}}),t)})))()},GET_PLATFORM:function(e){var t=this.platform.filter((function(t){return t.id==e}));return t[0].code_name},GET_IMPACT:function(e){var t=this.impact.filter((function(t){return t.id==e}));return t[0].status},GET_DISC:function(e){var t=this.disc.filter((function(t){return t.id==e}));return t[0].discipline}}},m=f;var g=a(81656),h=(0,g.A)(m,i,r,!1,null,"7a8e2ad6",null);const v=h.exports},70296:function(e,t,a){
/*!
 * devextreme-vue
 * Version: 21.2.7
 * Build date: Mon Apr 11 2022
 *
 * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */
a(15852),a(94009);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxButton=void 0;var r=i(a(47160)),s=a(72528),o=s.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=r["default"],this.$_hasAsyncTemplate=!0}});t.DxButton=o,t["default"]=o}}]);
//# sourceMappingURL=9787.dd83331f.js.map