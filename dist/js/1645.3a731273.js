"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[1645],{51645:(t,e,a)=>{a.r(e),a.d(e,{default:()=>S});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.current_view?a("ViewFR",{on:{currentView:function(e,a){return t.SET_EDIT(e,a)}}}):t._e(),1==t.current_view?a("AddFR",{on:{currentView:function(e,a){return t.SET_EDIT(e,a)}}}):t._e(),2==t.current_view?a("EditFR",{attrs:{data_row:t.edit_row},on:{currentView:function(e,a){return t.SET_FAILURE_ACTION(e,a)},popup:function(e,a){return t.SET_POPUP(e,a)}}}):t._e(),3==t.current_view?a("Information",{attrs:{data_row:t.edit_row},on:{currentView:function(e){return t.current_view=e}}}):t._e()],1)},n=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.failureRecordList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"init-new-row":function(e){return t.SET_CURRENT_VIEW(1)}},scopedSlots:t._u([{key:"masterDetailTemplate",fn:function(e){var i=e.data;return[a("div",[t._v(" FR Number: "+t._s(i.data.fl_number)),a("br"),t._v(" Details: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.details}}),t._v(" Findings: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.findings}}),t._v(" Mitigation: "),a("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:i.data.mitigation}})])]}},{key:"action-cell-template",fn:function(e){var i=e.data;return[a("div",{staticClass:"action-wrapper"},[a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(3,i.data)}}},[a("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/pdf-file-svg.svg"}})]),a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(2,i.data)}}},[a("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),1===t.user.failure_seq?a("div",{on:{click:function(e){return t.DELETE_RECORD(i)}}},[a("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})]):t._e()])]}}])},[a("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":1===t.user.failure_seq,"use-icons":!0,mode:"popup"}}),a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxSelection",{attrs:{mode:"single"}}),a("DxColumn",{attrs:{"data-field":"fl_number",caption:"FR No.",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"findings_date",caption:"Finding Date",width:100,alignment:"center","data-type":"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"tag_no",caption:"Tag No.",width:150,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"id_platform",caption:"Platform",width:120,alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.platform,"display-expr":"code_name","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"unit",caption:"Unit","min-width":150,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"equipment_type",caption:"Equipment Type","min-width":150,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"id_discipline",caption:"Discipline",width:100,alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.disc,"display-expr":"discipline","value-expr":"id"}})],1),a("DxColumn",{attrs:{width:1===t.user.failure_seq?120:80,alignment:"center","cell-template":"action-cell-template"}}),a("DxMasterDetail",{attrs:{enabled:!0,template:"masterDetailTemplate"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1)],1)])])},o=[],s=(a(5086),a(88704)),l=a(47093),d=a(10788),c=a.n(d),u=a(16164),p=a(63869);const m={name:"inspection-record",components:{DxDataGrid:p.DxDataGrid,DxSearchPanel:p.DxSearchPanel,DxPaging:p.DxPaging,DxPager:p.DxPager,DxScrolling:p.DxScrolling,DxColumn:p.DxColumn,DxExport:p.DxExport,DxHeaderFilter:p.DxHeaderFilter,DxSelection:p.DxSelection,DxEditing:p.DxEditing,DxFilterRow:p.DxFilterRow,DxLookup:p.DxLookup,DxMasterDetail:p.DxMasterDetail},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DROPDOWN_PLATFORM(),this.FETCH_DROPDOWN_DISC(),this.FETCH_FAILURE_RECORD(),this.user=JSON.parse(localStorage.getItem("user")),this.user.failure_seq=1)},data:function(){return{failureRecordList:{},dataGridAttributes:{class:"data-grid-style"},platform:[],disc:[],user:null}},computed:{},methods:{EXPORT_DATA:function(t){var e=new l.Workbook,a=e.addWorksheet("Projects");(0,u.V)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){c()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},FETCH_FAILURE_RECORD:function(){var t=this;this.isLoading=!0,(0,s.p)({method:"get",url:"/FailureRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.failureRecordList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DELETE_RECORD:function(t){var e=this;(0,s.p)({method:"delete",url:"/FailureRecord/delete-failure-record?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_FAILURE_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_DROPDOWN_PLATFORM:function(){var t=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.platform=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DROPDOWN_DISC:function(){var t=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.disc=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},g=m;var f=a(81656),_=(0,f.A)(g,r,o,!1,null,"136ebfd0",null);const h=_.exports;var D=a(88024),x=a(12984),E=a(60229);const w={name:"inspection-record",components:{ViewFR:h,AddFR:D.A,EditFR:x.A,Information:E.A},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:0,failure_action_row:0,isShow:0}},computed:{},methods:{SET_EDIT:function(t,e){this.current_view=t,e&&(this.edit_row=e)},SET_FAILURE_ACTION:function(t,e){this.current_view=t,this.failure_action_row=e},SET_POPUP:function(t,e){this.isShow=t,this.failure_action_row=e}}},R=w;var v=(0,f.A)(R,i,n,!1,null,"2a797c1a",null);const S=v.exports}}]);
//# sourceMappingURL=1645.3a731273.js.map