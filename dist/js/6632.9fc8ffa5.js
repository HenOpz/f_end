"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[6632],{66632:(e,t,n)=>{n.r(t),n.d(t,{NestedAppAuthController:()=>_});var r=n(30388),o=n(41034),i=n(25026),a=n(69492),u=(n(61373),n(83515),n(14117),n(5086),n(66544)),c=n(16287),s=n(57464),l=n(12096),d=n(21304),p=(n(7918),n(29979),n(14602),n(84095),n(80475),n(79389),n(87136),n(58649),n(65987),n(80115),n(98741),n(63534),n(40590),n(97487)),h=n(7561),v=n(54728),A=n(7332),f=n(41454),k=n(82357),g=n(58918),m=n(54580),y=n(22367);
/*! @azure/msal-browser v3.11.1 2024-03-27 */
function E(e){return void 0!==e.status}
/*! @azure/msal-browser v3.11.1 2024-03-27 */
var w={UserInteractionRequired:"USER_INTERACTION_REQUIRED",UserCancel:"USER_CANCEL",NoNetwork:"NO_NETWORK",TransientError:"TRANSIENT_ERROR",PersistentError:"PERSISTENT_ERROR",Disabled:"DISABLED",AccountUnavailable:"ACCOUNT_UNAVAILABLE",NestedAppAuthUnavailable:"NESTED_APP_AUTH_UNAVAILABLE"},C=function(){function e(t,n,r,o){(0,i.A)(this,e),this.clientId=t,this.clientCapabilities=n,this.crypto=r,this.logger=o}return(0,a.A)(e,[{key:"toNaaTokenRequest",value:function(e){var t,n;n=void 0===e.extraQueryParameters?new Map:new Map(Object.entries(e.extraQueryParameters));var r=new p.W,o=r.addClientCapabilitiesToClaims(e.claims,this.clientCapabilities),i=e.scopes||h.aZ,a={platformBrokerId:null===(t=e.account)||void 0===t?void 0:t.homeAccountId,clientId:this.clientId,authority:e.authority,scope:i.join(" "),correlationId:void 0!==e.correlationId?e.correlationId:this.crypto.createNewGuid(),claims:v.$.isEmptyObj(o)?void 0:o,state:e.state,authenticationScheme:e.authenticationScheme||h.IO.BEARER,extraParameters:n};return a}},{key:"fromNaaTokenResponse",value:function(e,t,n){if(!t.token.id_token||!t.token.access_token)throw(0,A.SB)(f.Bh);var r=new Date(1e3*(n+(t.token.expires_in||0))),o=k.My(t.token.id_token,this.crypto.base64Decode),i=this.fromNaaAccountInfo(t.account,o),a=t.token.scope||e.scope,u={authority:t.token.authority||i.environment,uniqueId:i.localAccountId,tenantId:i.tenantId,scopes:a.split(" "),account:i,idToken:t.token.id_token,idTokenClaims:o,accessToken:t.token.access_token,fromCache:!0,expiresOn:r,tokenType:e.authenticationScheme||h.IO.BEARER,correlationId:e.correlationId,extExpiresOn:r,state:e.state};return u}},{key:"fromNaaAccountInfo",value:function(e,t){var n=t||e.idTokenClaims,r=e.localAccountId||(null===n||void 0===n?void 0:n.oid)||(null===n||void 0===n?void 0:n.sub)||"",o=e.tenantId||(null===n||void 0===n?void 0:n.tid)||"",i=e.homeAccountId||"".concat(r,".").concat(o),a=e.username||(null===n||void 0===n?void 0:n.preferred_username)||"",u=e.name||(null===n||void 0===n?void 0:n.name),c={homeAccountId:i,environment:e.environment,tenantId:o,username:a,localAccountId:r,name:u,idToken:e.idToken,idTokenClaims:n};return c}},{key:"fromBridgeError",value:function(e){if(!E(e))return new y.lR("unknown_error","An unknown error occurred");switch(e.status){case w.UserCancel:return new A.eB(f.fn);case w.NoNetwork:return new A.eB(f.l7);case w.AccountUnavailable:return new A.eB(f.rk);case w.Disabled:return new A.eB(f.CN);case w.NestedAppAuthUnavailable:return new A.eB(e.code||f.CN,e.description);case w.TransientError:case w.PersistentError:return new g.g(e.code,e.description);case w.UserInteractionRequired:return new m.CB(e.code,e.description);default:return new y.lR(e.code,e.description)}}}]),e}(),R=n(63732),I=n(28578),T=n(84852),N=(n(4632),{unsupportedMethod:{code:"unsupported_method",desc:"The PKCE code challenge and verifier could not be generated."}}),U=function(e){(0,I.A)(n,e);var t=(0,T.A)(n);function n(e,r){var o;return(0,i.A)(this,n),o=t.call(this,e,r),Object.setPrototypeOf((0,R.A)(o),n.prototype),o.name="NestedAppAuthError",o}return(0,a.A)(n,null,[{key:"createUnsupportedError",value:function(){return new n(N.unsupportedMethod.code,N.unsupportedMethod.desc)}}]),n}(y.lR),b=n(18102),S=n(8658),_=function(){function e(t){(0,i.A)(this,e),this.operatingContext=t;var n=this.operatingContext.getBridgeProxy();if(void 0===n)throw new Error("unexpected: bridgeProxy is undefined");this.bridgeProxy=n,this.config=t.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=t.isBrowserEnvironment()?new d.M(this.logger,this.performanceClient):u.j,this.eventHandler=new b.J(this.logger,this.browserCrypto),this.nestedAppAuthAdapter=new C(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger)}return(0,a.A)(e,[{key:"getBrowserStorage",value:function(){throw U.createUnsupportedError()}},{key:"getEventHandler",value:function(){return this.eventHandler}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"ensureValidRequest",value:function(e){return null!==e&&void 0!==e&&e.correlationId?e:(0,o.A)((0,o.A)({},e),{},{correlationId:this.browserCrypto.createNewGuid()})}},{key:"acquireTokenInteractive",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.ensureValidRequest(t),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_START,l.X8.Popup,n),r=this.performanceClient.startMeasurement(c.MX.AcquireTokenPopup,n.correlationId),null===r||void 0===r||r.add({nestedAppAuthRequest:!0}),e.prev=4,o=this.nestedAppAuthAdapter.toNaaTokenRequest(n),i=s._C(),e.next=9,this.bridgeProxy.getTokenInteractive(o);case 9:return a=e.sent,u=this.nestedAppAuthAdapter.fromNaaTokenResponse(o,a,i),this.operatingContext.setActiveAccount(u.account),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_SUCCESS,l.X8.Popup,u),r.add({accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),r.end({success:!0,requestId:u.requestId}),e.abrupt("return",u);case 18:throw e.prev=18,e.t0=e["catch"](4),d=this.nestedAppAuthAdapter.fromBridgeError(e.t0),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_FAILURE,l.X8.Popup,null,e.t0),r.end({success:!1},e.t0),d;case 24:case"end":return e.stop()}}),e,this,[[4,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acquireTokenSilentInternal",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.ensureValidRequest(t),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_START,l.X8.Silent,n),r=this.performanceClient.startMeasurement(c.MX.SsoSilent,n.correlationId),null===r||void 0===r||r.increment({visibilityChangeCount:0}),null===r||void 0===r||r.add({nestedAppAuthRequest:!0}),e.prev=5,o=this.nestedAppAuthAdapter.toNaaTokenRequest(n),i=s._C(),e.next=10,this.bridgeProxy.getTokenSilent(o);case 10:return a=e.sent,u=this.nestedAppAuthAdapter.fromNaaTokenResponse(o,a,i),this.operatingContext.setActiveAccount(u.account),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_SUCCESS,l.X8.Silent,u),null===r||void 0===r||r.add({accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),null===r||void 0===r||r.end({success:!0,requestId:u.requestId}),e.abrupt("return",u);case 19:throw e.prev=19,e.t0=e["catch"](5),d=this.nestedAppAuthAdapter.fromBridgeError(e.t0),this.eventHandler.emitEvent(S.B.ACQUIRE_TOKEN_FAILURE,l.X8.Silent,null,e.t0),null===r||void 0===r||r.end({success:!1},e.t0),d;case 25:case"end":return e.stop()}}),e,this,[[5,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acquireTokenPopup",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.acquireTokenInteractive(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acquireTokenRedirect",value:function(e){throw U.createUnsupportedError()}},{key:"acquireTokenSilent",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.acquireTokenSilentInternal(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"acquireTokenByCode",value:function(e){throw U.createUnsupportedError()}},{key:"acquireTokenNative",value:function(e,t,n){throw U.createUnsupportedError()}},{key:"acquireTokenByRefreshToken",value:function(e,t){throw U.createUnsupportedError()}},{key:"addEventCallback",value:function(e){return this.eventHandler.addEventCallback(e)}},{key:"removeEventCallback",value:function(e){this.eventHandler.removeEventCallback(e)}},{key:"addPerformanceCallback",value:function(e){throw U.createUnsupportedError()}},{key:"removePerformanceCallback",value:function(e){throw U.createUnsupportedError()}},{key:"enableAccountStorageEvents",value:function(){throw U.createUnsupportedError()}},{key:"disableAccountStorageEvents",value:function(){throw U.createUnsupportedError()}},{key:"getAccount",value:function(e){throw U.createUnsupportedError()}},{key:"getAccountByHomeId",value:function(e){var t=this.operatingContext.getActiveAccount();return void 0!==t&&t.homeAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}},{key:"getAccountByLocalId",value:function(e){var t=this.operatingContext.getActiveAccount();return void 0!==t&&t.localAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}},{key:"getAccountByUsername",value:function(e){var t=this.operatingContext.getActiveAccount();return void 0!==t&&t.username===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}},{key:"getAllAccounts",value:function(){var e=this.operatingContext.getActiveAccount();return void 0!==e?[this.nestedAppAuthAdapter.fromNaaAccountInfo(e)]:[]}},{key:"handleRedirectPromise",value:function(e){return Promise.resolve(null)}},{key:"loginPopup",value:function(e){if(void 0!==e)return this.acquireTokenInteractive(e);throw U.createUnsupportedError()}},{key:"loginRedirect",value:function(e){throw U.createUnsupportedError()}},{key:"logout",value:function(e){throw U.createUnsupportedError()}},{key:"logoutRedirect",value:function(e){throw U.createUnsupportedError()}},{key:"logoutPopup",value:function(e){throw U.createUnsupportedError()}},{key:"ssoSilent",value:function(e){return this.acquireTokenSilentInternal(e)}},{key:"getTokenCache",value:function(){throw U.createUnsupportedError()}},{key:"getLogger",value:function(){return this.logger}},{key:"setLogger",value:function(e){this.logger=e}},{key:"setActiveAccount",value:function(e){this.logger.warning("nestedAppAuth does not support setActiveAccount")}},{key:"getActiveAccount",value:function(){var e=this.operatingContext.getActiveAccount();return void 0!==e?this.nestedAppAuthAdapter.fromNaaAccountInfo(e):null}},{key:"initializeWrapperLibrary",value:function(e,t){}},{key:"setNavigationClient",value:function(e){this.logger.warning("setNavigationClient is not supported in nested app auth")}},{key:"getConfiguration",value:function(){return this.config}},{key:"isBrowserEnv",value:function(){return this.operatingContext.isBrowserEnvironment()}},{key:"getBrowserCrypto",value:function(){return this.browserCrypto}},{key:"getPerformanceClient",value:function(){throw U.createUnsupportedError()}},{key:"getRedirectResponse",value:function(){throw U.createUnsupportedError()}},{key:"clearCache",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw U.createUnsupportedError();case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hydrateCache",value:function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw U.createUnsupportedError();case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"createController",value:function(){var t=(0,r.A)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new e(n),t.abrupt("return",Promise.resolve(r));case 2:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}]),e}()}}]);
//# sourceMappingURL=6632.9fc8ffa5.js.map