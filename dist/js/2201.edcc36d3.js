"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[2201],{2201:(t,e,i)=>{i.r(e),i.d(e,{default:()=>S});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[0==t.current_view?i("ViewFR",{on:{currentView:function(e,i){return t.SET_EDIT(e,i)}}}):t._e(),1==t.current_view?i("AddFR",{on:{currentView:function(e,i){return t.SET_EDIT(e,i)}}}):t._e(),2==t.current_view?i("EditFR",{attrs:{data_row:t.edit_row},on:{currentView:function(e,i){return t.SET_FAILURE_ACTION(e,i)},popup:function(e,i){return t.SET_POPUP(e,i)}}}):t._e(),3==t.current_view?i("Information",{attrs:{data_row:t.edit_row},on:{currentView:function(e){return t.current_view=e}}}):t._e()],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-container"},[i("div",{staticClass:"page-section"},[i("div",{staticClass:"table-wrapper"},[i("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.failureRecordList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"init-new-row":function(e){return t.SET_CURRENT_VIEW(1)}},scopedSlots:t._u([{key:"masterDetailTemplate",fn:function(e){var a=e.data;return[i("div",[t._v(" FR Number: "+t._s(a.data.fl_number)),i("br"),t._v(" Details: "),i("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:a.data.details}}),t._v(" Findings: "),i("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:a.data.findings}}),t._v(" Mitigation: "),i("textarea",{staticStyle:{width:"100%","min-height":"100px",border:"none","font-size":"10px",padding:"5px","margin-top":"5px"},attrs:{readonly:""},domProps:{value:a.data.mitigation}})])]}},{key:"action-cell-template",fn:function(e){var a=e.data;return[i("div",{staticClass:"action-wrapper"},[i("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(3,a.data)}}},[i("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/pdf-file-svg.svg"}})]),i("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(2,a.data)}}},[i("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})])])]}}])},[i("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!1,"use-icons":!0,mode:"popup"}}),i("DxFilterRow",{attrs:{visible:!0}}),i("DxHeaderFilter",{attrs:{visible:!0}}),i("DxSelection",{attrs:{mode:"single"}}),i("DxColumn",{attrs:{"data-field":"fl_number",caption:"FR No.",width:90,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"findings_date",caption:"Finding Date",width:100,alignment:"center","data-type":"date",format:"dd MMM yyyy"}}),i("DxColumn",{attrs:{"data-field":"tag_no",caption:"Tag No.",width:150,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"id_platform",caption:"Platform",width:120,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.platform,"display-expr":"code_name","value-expr":"id"}})],1),i("DxColumn",{attrs:{"data-field":"unit",caption:"Unit","min-width":150,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"equipment_type",caption:"Equipment Type","min-width":150,alignment:"center"}}),i("DxColumn",{attrs:{"data-field":"id_discipline",caption:"Discipline",width:100,alignment:"center"}},[i("DxLookup",{attrs:{"data-source":t.disc,"display-expr":"discipline","value-expr":"id"}})],1),i("DxColumn",{attrs:{width:80,alignment:"center","cell-template":"action-cell-template"}}),i("DxMasterDetail",{attrs:{enabled:!0,template:"masterDetailTemplate"}}),i("DxScrolling",{attrs:{mode:"standard"}}),i("DxSearchPanel",{attrs:{visible:!0}}),i("DxPaging",{attrs:{"page-size":10,"page-index":0}}),i("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),i("DxExport",{attrs:{enabled:!1}})],1)],1)])])},o=[],s=(i(5086),i(88704)),l=i(47093),d=i(10788),c=i.n(d),u=i(16164),p=i(63869);const m={name:"inspection-record",components:{DxDataGrid:p.DxDataGrid,DxSearchPanel:p.DxSearchPanel,DxPaging:p.DxPaging,DxPager:p.DxPager,DxScrolling:p.DxScrolling,DxColumn:p.DxColumn,DxExport:p.DxExport,DxHeaderFilter:p.DxHeaderFilter,DxSelection:p.DxSelection,DxEditing:p.DxEditing,DxFilterRow:p.DxFilterRow,DxLookup:p.DxLookup,DxMasterDetail:p.DxMasterDetail},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null}),1==this.$store.state.status.server&&(this.user=JSON.parse(localStorage.getItem("user")),this.user.failure_seq=3,this.FETCH_DROPDOWN_PLATFORM(),this.FETCH_DROPDOWN_DISC(),this.FETCH_FAILURE_RECORD())},data:function(){return{failureRecordList:{},dataGridAttributes:{class:"data-grid-style"},platform:[],disc:[],user:null}},computed:{FAILURE_API:function(){return 1===this.user.failure_seq?"/FailureRecord/get-failure-record-is-draft-by-id-user?id_user=".concat(this.user.id):2===this.user.failure_seq?"/FailureRecord/get-failure-record-is-pending-by-id-user?id_user=".concat(this.user.id):3===this.user.failure_seq?"/FailureRecord/get-failure-record-approved-by-id-user?id_user=".concat(this.user.id):""}},methods:{EXPORT_DATA:function(t){var e=new l.Workbook,i=e.addWorksheet("Projects");(0,u.V)({worksheet:i,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){c()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},FETCH_FAILURE_RECORD:function(){var t=this;this.isLoading=!0,(0,s.p)({method:"get",url:this.FAILURE_API,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.failureRecordList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DELETE_RECORD:function(t){var e=this;(0,s.p)({method:"delete",url:"/FailureRecord/delete-failure-record?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_FAILURE_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_DROPDOWN_PLATFORM:function(){var t=this;(0,s.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.platform=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DROPDOWN_DISC:function(){var t=this;(0,s.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.disc=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},g=m;var f=i(81656),_=(0,f.A)(g,r,o,!1,null,"2377d1cc",null);const h=_.exports;var D=i(88024),x=i(12984),E=i(60229);const w={name:"inspection-record",components:{ViewFR:h,AddFR:D.A,EditFR:x.A,Information:E.A},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:0,failure_action_row:0,isShow:0}},computed:{},methods:{SET_EDIT:function(t,e){this.current_view=t,e&&(this.edit_row=e)},SET_FAILURE_ACTION:function(t,e){this.current_view=t,this.failure_action_row=e},SET_POPUP:function(t,e){this.isShow=t,this.failure_action_row=e}}},R=w;var v=(0,f.A)(R,a,n,!1,null,"254614a0",null);const S=v.exports}}]);
//# sourceMappingURL=2201.edcc36d3.js.map