"use strict";(self["webpackChunkSPRC_NDERMS"]=self["webpackChunkSPRC_NDERMS"]||[]).push([[6329],{26329:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ot});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0==t.current_view?a("ViewFR",{on:{currentView:function(e,a){return t.SET_EDIT(e,a)}}}):t._e(),1==t.current_view?a("AddFR",{on:{currentView:function(e){return t.current_view=e}}}):t._e(),2==t.current_view?a("EditFR",{attrs:{id_record:t.edit_row.id},on:{currentView:function(e){return t.current_view=e}}}):t._e(),3==t.current_view?a("ReportPage",{attrs:{data_row:t.edit_row},on:{currentView:function(e){return t.current_view=e}}}):t._e()],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("DxDataGrid",{attrs:{id:"data-grid-list","key-expr":"id","data-source":t.highlightActivitiesList,selection:{mode:"single"},"hover-state-enabled":!0,"allow-column-reordering":!0,"show-borders":!0,"show-row-lines":!0,"row-alternation-enabled":!1,"word-wrap-enabled":!0,"column-auto-width":!0},on:{"init-new-row":function(e){return t.SET_CURRENT_VIEW(1)}},scopedSlots:t._u([{key:"action-cell-template",fn:function(e){var i=e.data;return[a("div",{staticClass:"action-wrapper"},[a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(3,i.data)}}},[a("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/pdf-file-svg.svg"}})]),a("div",{on:{click:function(){return[t.toggleHtmlPreview=!0,t.htmlPreview=i.data.details]}}},[a("img",{staticClass:"pdfSvg",attrs:{src:"/img/svg/file-contract-svg.svg"}})]),a("div",{on:{click:function(e){return t.SET_CURRENT_VIEW(2,i.data)}}},[a("img",{staticClass:"penSvg",attrs:{src:"/img/svg/pen-svg.svg"}})]),a("div",{on:{click:function(e){return t.DELETE_RECORD(i)}}},[a("img",{staticClass:"trashSvg",attrs:{src:"/img/svg/trash-svg.svg"}})])])]}}])},[a("DxEditing",{attrs:{"allow-updating":!1,"allow-deleting":!1,"allow-adding":!0,"use-icons":!0,mode:"popup"}}),a("DxFilterRow",{attrs:{visible:!0}}),a("DxHeaderFilter",{attrs:{visible:!0}}),a("DxSelection",{attrs:{mode:"single"}}),a("DxColumn",{attrs:{"data-field":"ha_number",caption:"HA Number",width:90,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"report_date",caption:"Report Date",width:90,alignment:"center",dataType:"date",format:"dd MMM yyyy"}}),a("DxColumn",{attrs:{"data-field":"id_platform",caption:"Platform",width:90,alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.platform,"display-expr":"code_name","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"id_asset",caption:"Asset Type",width:100,alignment:"center"}},[a("DxLookup",{attrs:{"data-source":t.asset,"display-expr":"asset_type","value-expr":"id"}})],1),a("DxColumn",{attrs:{"data-field":"tag_number",caption:"Tag Number",width:150,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"contractor",caption:"Contractor",width:120,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"person_in_charge",caption:"PIC",width:100,alignment:"center"}}),a("DxColumn",{attrs:{"data-field":"activities",caption:"Activites","min-width":250,alignment:"left"}}),a("DxColumn",{attrs:{width:160,alignment:"center","cell-template":"action-cell-template"}}),a("DxScrolling",{attrs:{mode:"standard"}}),a("DxSearchPanel",{attrs:{visible:!0}}),a("DxPaging",{attrs:{"page-size":10,"page-index":0}}),a("DxPager",{attrs:{"show-page-size-selector":!0,"allowed-page-sizes":[10,20,30],"show-navigation-buttons":!0,"show-info":!1,"info-text":"Page {0} of {1} ({2} items)"}}),a("DxExport",{attrs:{enabled:!1}})],1),t.toggleHtmlPreview?a("div",{staticClass:"html-preview-container"},[a("div",{staticClass:"html-preview"},[a("div",{staticClass:"svg-container"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"24",width:"18",viewBox:"0 0 384 512"},on:{click:function(e){t.toggleHtmlPreview=!1}}},[a("path",{attrs:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}})])]),a("div",{domProps:{innerHTML:t._s(t.htmlPreview)}})])]):t._e()],1)])])},n=[],o=(a(5086),a(88704)),l=a(47093),c=a(10788),d=a.n(c),p=a(16164),u=a(63869);const h={name:"inspection-record",components:{DxDataGrid:u.DxDataGrid,DxSearchPanel:u.DxSearchPanel,DxPaging:u.DxPaging,DxPager:u.DxPager,DxScrolling:u.DxScrolling,DxColumn:u.DxColumn,DxExport:u.DxExport,DxHeaderFilter:u.DxHeaderFilter,DxSelection:u.DxSelection,DxEditing:u.DxEditing,DxFilterRow:u.DxFilterRow,DxLookup:u.DxLookup},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"HIGHLIGHT ACTIVITIES",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DROPDOWN_ASSET(),this.FETCH_DROPDOWN_PLATFORM(),this.FETCH_HIGHLIGHT_RECORD())},data:function(){return{highlightActivitiesList:{},platform:[],asset:[],htmlPreview:null,toggleHtmlPreview:!1}},computed:{},methods:{EXPORT_DATA:function(t){var e=new l.Workbook,a=e.addWorksheet("Projects");(0,p.V)({worksheet:a,component:t.component}).then((function(){e.xlsx.writeBuffer().then((function(t){d()(new Blob([t],{type:"application/octet-stream"}),"inspection_record.xlsx")}))})),t.cancel=!0},FETCH_HIGHLIGHT_RECORD:function(){var t=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/HighlightActivities",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.highlightActivitiesList=e.data,console.log("highlightActivitiesList",t.highlightActivitiesList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},DELETE_RECORD:function(t){var e=this;(0,o.p)({method:"delete",url:"/HighlightActivities/delete-highlight-activities?id="+t.key,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){204==t.status&&e.FETCH_HIGHLIGHT_RECORD()}))["catch"]((function(t){e.$ons.notification.alert(t.code+" "+t.response.status+" "+t.message)}))["finally"]((function(){}))},FETCH_DROPDOWN_ASSET:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-asset-type-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.asset=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DROPDOWN_PLATFORM:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.platform=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!1),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},g=h;var m=a(81656),_=(0,m.A)(g,r,n,!1,null,"509344d2",null);const f=_.exports;var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h3",{staticStyle:{"grid-column":"span 2","margin-bottom":"0","margin-top":"0"}},[t._v("New Highlight Activity")]),a("div",{staticClass:"input-wrapper"},[t._m(0),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Report Date","display-format":"dd MMM yyyy"},model:{value:t.highlightActivitiesList.report_date,callback:function(e){t.$set(t.highlightActivitiesList,"report_date",e)},expression:"highlightActivitiesList.report_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[t._m(1),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.platform,"value-expr":"id","display-expr":"code_name",placeholder:"Select Platform"},model:{value:t.highlightActivitiesList.id_platform,callback:function(e){t.$set(t.highlightActivitiesList,"id_platform",e)},expression:"highlightActivitiesList.id_platform"}})],1)]),a("div",{staticClass:"input-wrapper"},[t._m(2),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.asset,"value-expr":"id","display-expr":"asset_type",placeholder:"Select Asset Type"},model:{value:t.highlightActivitiesList.id_asset,callback:function(e){t.$set(t.highlightActivitiesList,"id_asset",e)},expression:"highlightActivitiesList.id_asset"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Tag Number")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Tag Number"},model:{value:t.highlightActivitiesList.tag_number,callback:function(e){t.$set(t.highlightActivitiesList,"tag_number",e)},expression:"highlightActivitiesList.tag_number"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Contractor")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Contractor"},model:{value:t.highlightActivitiesList.contractor,callback:function(e){t.$set(t.highlightActivitiesList,"contractor",e)},expression:"highlightActivitiesList.contractor"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("PIC")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter PIC"},model:{value:t.highlightActivitiesList.person_in_charge,callback:function(e){t.$set(t.highlightActivitiesList,"person_in_charge",e)},expression:"highlightActivitiesList.person_in_charge"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[t._v("Activities")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Activities"},model:{value:t.highlightActivitiesList.activities,callback:function(e){t.$set(t.highlightActivitiesList,"activities",e)},expression:"highlightActivitiesList.activities"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{fill:""}},[a("span",[t._v("Details")]),a("div",{staticClass:"html-editor",attrs:{fill:""}},[a("DxHtmlEditor",{attrs:{height:"600"},model:{value:t.highlightActivitiesList.details,callback:function(e){t.$set(t.highlightActivitiesList,"details",e)},expression:"highlightActivitiesList.details"}},[a("DxMediaResizing",{attrs:{enabled:!0}}),a("DxToolbar",{attrs:{multiline:!0}},[a("DxItem",{attrs:{name:"undo"}}),a("DxItem",{attrs:{name:"redo"}}),a("DxItem",{attrs:{name:"header","accepted-values":t.headerValues,options:t.headerOptions}}),a("DxItem",{attrs:{name:"bold"}}),a("DxItem",{attrs:{name:"italic"}}),a("DxItem",{attrs:{name:"underline"}}),a("DxItem",{attrs:{name:"strike"}}),a("DxItem",{attrs:{name:"bulletList"}}),a("DxItem",{attrs:{name:"orderedList"}}),a("DxItem",{attrs:{name:"image"}}),a("DxItem",{attrs:{name:"alignLeft"}}),a("DxItem",{attrs:{name:"alignCenter"}}),a("DxItem",{attrs:{name:"alignRight"}}),a("DxItem",{attrs:{name:"alignJustify"}}),a("DxItem",{attrs:{name:"insertTable"}}),a("DxItem",{attrs:{name:"deleteTable"}}),a("DxItem",{attrs:{name:"insertRowAbove"}}),a("DxItem",{attrs:{name:"insertRowBelow"}}),a("DxItem",{attrs:{name:"deleteRow"}}),a("DxItem",{attrs:{name:"insertColumnLeft"}}),a("DxItem",{attrs:{name:"insertColumnRight"}}),a("DxItem",{attrs:{name:"deleteColumn"}})],1)],1)],1)]),a("button",{staticClass:"create",on:{click:t.CREATE_RECORD}},[t._v("Create")]),a("button",{on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[t._v("Cancel")]),a("br")])])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Report Date")]),a("span",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Platform")]),a("span",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Asset Type")]),a("span",[t._v("*")])])}],x=a(49148),E=a.n(x),D=a(10100),A=a.n(D),T=a(57723),S=a.n(T),b=a(17768),L=a.n(b),R=a(57707);const H={name:"inspection-record",components:{DxSelectBox:A(),DxTextBox:S(),DxDateBox:L(),DxHtmlEditor:R.DxHtmlEditor,DxToolbar:R.DxToolbar,DxMediaResizing:R.DxMediaResizing,DxItem:R.DxItem},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"HIGHLIGHT ACTIVITY",subpageInnerName:null}),this.FETCH_DROPDOWN_ASSET(),this.FETCH_DROPDOWN_PLATFORM()},data:function(){return{highlightActivitiesList:{activities:null,details:null,id:0,id_asset:null,id_platform:null,id_tag:1,report_date:null,is_active:!0,tag_number:null},editorValue:null,formSelect:{asset:[],platform:[]},headerValues:[!1,1,2,3,4,5],headerOptions:{inputAttr:{"aria-label":"Header"}}}},computed:{},methods:{FETCH_INSP_RECORD:function(){var t=this;this.isLoading=!0;var e=this.$route.params.id_tag;(0,o.p)({method:"get",url:"/PipingInspectionRecord/get-piping-ir-by-id-line?id_line="+e,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){console.log("insp record:"),console.log(e),200==e.status&&e.data&&(console.log("success"),t.inspRecordList=e.data,console.log(t.inspRecordList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},CREATE_RECORD:function(){var t=this;null!==this.highlightActivitiesList.id_platform&&null!==this.highlightActivitiesList.id_asset&&null!==this.highlightActivitiesList.id_tag&&null!==this.highlightActivitiesList.report_date&&(this.highlightActivitiesList.report_date=E()(this.highlightActivitiesList.report_date).format("L"),(0,o.p)({method:"post",url:"/HighlightActivities",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.highlightActivitiesList}).then((function(e){201==e.status&&t.SET_CURRENT_VIEW(0)}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){})))},FETCH_DROPDOWN_ASSET:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-asset-type-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.asset=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DROPDOWN_PLATFORM:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.platform=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},w=H;var y=(0,m.A)(w,v,C,!1,null,"e45a7e58",null);const I=y.exports;var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"action-bar"},[a("button",{staticClass:"back",on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[a("i",{staticClass:"fas fa-chevron-left"}),t._v("BACK ")]),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"switch"},[a("div",[a("v-ons-switch",{staticStyle:{padding:"0 !important",border:"0"},attrs:{"input-id":"switch1"},model:{value:t.btn_state,callback:function(e){t.btn_state=e},expression:"btn_state"}})],1),a("span",[t._v("EDIT MODE")])]),a("button",{staticClass:"submit",on:{click:t.UPDATE_RECORD}},[a("i",{staticClass:"fas fa-save"}),t._v(" SUBMIT ")]),a("button",{staticClass:"delete",on:{click:t.DELETE_RECORD}},[a("i",{staticClass:"fas fa-trash-alt"}),t._v(" DELETE ")])])]),a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[t._m(0),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",disabled:!t.btn_state,"display-format":"dd MMM yyyy"},model:{value:t.highlightActivitiesList.report_date,callback:function(e){t.$set(t.highlightActivitiesList,"report_date",e)},expression:"highlightActivitiesList.report_date"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[t._m(1),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.platform,"value-expr":"id","display-expr":"code_name",placeholder:"Select Platform",disabled:!t.btn_state},model:{value:t.highlightActivitiesList.id_platform,callback:function(e){t.$set(t.highlightActivitiesList,"id_platform",e)},expression:"highlightActivitiesList.id_platform"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[t._m(2),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.asset,"value-expr":"id","display-expr":"asset_type",placeholder:"Asset Type",disabled:!t.btn_state},model:{value:t.highlightActivitiesList.id_asset,callback:function(e){t.$set(t.highlightActivitiesList,"id_asset",e)},expression:"highlightActivitiesList.id_asset"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[a("span",[t._v("Tag Number")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Tag Number",disabled:!t.btn_state},model:{value:t.highlightActivitiesList.tag_number,callback:function(e){t.$set(t.highlightActivitiesList,"tag_number",e)},expression:"highlightActivitiesList.tag_number"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[a("span",[t._v("Contractor")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter Contractor",disabled:!t.btn_state},model:{value:t.highlightActivitiesList.contractor,callback:function(e){t.$set(t.highlightActivitiesList,"contractor",e)},expression:"highlightActivitiesList.contractor"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-3":""}},[a("span",[t._v("PIC")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{placeholder:"Enter PIC",disabled:!t.btn_state},model:{value:t.highlightActivitiesList.person_in_charge,callback:function(e){t.$set(t.highlightActivitiesList,"person_in_charge",e)},expression:"highlightActivitiesList.person_in_charge"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-6":""}},[a("span",[t._v("Activities")]),a("div",{staticClass:"input"},[a("DxTextBox",{attrs:{disabled:!t.btn_state},model:{value:t.highlightActivitiesList.activities,callback:function(e){t.$set(t.highlightActivitiesList,"activities",e)},expression:"highlightActivitiesList.activities"}})],1)]),a("div",{staticClass:"input-wrapper",attrs:{"span-6":""}},[a("span",[t._v("Details")]),a("div",{staticClass:"html-editor",attrs:{fill:""}},[a("DxHtmlEditor",{attrs:{height:"600","read-only":!t.btn_state},model:{value:t.highlightActivitiesList.details,callback:function(e){t.$set(t.highlightActivitiesList,"details",e)},expression:"highlightActivitiesList.details"}},[a("DxMediaResizing",{attrs:{enabled:!0}}),a("DxToolbar",{attrs:{multiline:!0}},[a("DxItem",{attrs:{name:"undo"}}),a("DxItem",{attrs:{name:"redo"}}),a("DxItem",{attrs:{name:"header","accepted-values":t.headerValues,options:t.headerOptions}}),a("DxItem",{attrs:{name:"size","accepted-values":t.sizeValues,options:t.fontSizeOptions}}),a("DxItem",{attrs:{name:"bold"}}),a("DxItem",{attrs:{name:"italic"}}),a("DxItem",{attrs:{name:"underline"}}),a("DxItem",{attrs:{name:"strike"}}),a("DxItem",{attrs:{name:"bulletList"}}),a("DxItem",{attrs:{name:"orderedList"}}),a("DxItem",{attrs:{name:"image"}}),a("DxItem",{attrs:{name:"alignLeft"}}),a("DxItem",{attrs:{name:"alignCenter"}}),a("DxItem",{attrs:{name:"alignRight"}}),a("DxItem",{attrs:{name:"alignJustify"}}),a("DxItem",{attrs:{name:"insertTable"}}),a("DxItem",{attrs:{name:"deleteTable"}}),a("DxItem",{attrs:{name:"insertRowAbove"}}),a("DxItem",{attrs:{name:"insertRowBelow"}}),a("DxItem",{attrs:{name:"deleteRow"}}),a("DxItem",{attrs:{name:"insertColumnLeft"}}),a("DxItem",{attrs:{name:"insertColumnRight"}}),a("DxItem",{attrs:{name:"deleteColumn"}})],1)],1)],1)]),a("br")])])])},N=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Report Date")]),a("span",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Platform")]),a("span",[t._v("*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-wrapper"},[a("span",[t._v("Asset Type")]),a("span",[t._v("*")])])}];a(94009);const P={name:"inspection-record",props:{id_record:Number},components:{DxSelectBox:A(),DxTextBox:S(),DxDateBox:L(),DxHtmlEditor:R.DxHtmlEditor,DxToolbar:R.DxToolbar,DxMediaResizing:R.DxMediaResizing,DxItem:R.DxItem},created:function(){1==this.$store.state.status.server&&(this.FETCH_DROPDOWN_ASSET(),this.FETCH_DROPDOWN_PLATFORM(),this.FETCH_HIGHLIGHT_RECORD())},data:function(){return{highlightActivitiesList:{},btn_state:!1,editorValue:'<p>Detect sign of sand erosion on flowline of MDA-05. Nominal thickness: 8.56 mm.</p><ul><li>Reading thickness: 4.79 mm (Accepted)</li><li>Minimum required thickness: 3.53 mm @ design pressure 131 barg</li><li>Recommend to shut-in the well (3.5 mmscfd) and replace with Target Tee to prevent sand erosion.</li></ul><p><br></p><p style="text-align: center;"><img src="/img/banner.png" width="393.953" height="196"></p>',formSelect:{asset:[],platform:[]},headerValues:[!1,1,2,3,4,5],headerOptions:{inputAttr:{"aria-label":"Header"}},fontSizeOptions:{inputAttr:{"aria-label":"Font size"}},sizeValues:["8pt","10pt","12pt","14pt","18pt","24pt","36pt"]}},computed:{},methods:{FETCH_HIGHLIGHT_RECORD:function(){var t=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/HighlightActivities/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.highlightActivitiesList=e.data,t.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"HA NUMBER : "+t.highlightActivitiesList.ha_number,subpageInnerName:null}),console.log("highlightActivitiesList",t.highlightActivitiesList))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},UPDATE_RECORD:function(){var t=this;null!==this.highlightActivitiesList.id_platform&&null!==this.highlightActivitiesList.id_asset&&null!==this.highlightActivitiesList.id_tag&&null!==this.highlightActivitiesList.report_date&&(this.highlightActivitiesList.report_date=E()(this.highlightActivitiesList.report_date).format("L"),(0,o.p)({method:"put",url:"/HighlightActivities/"+this.highlightActivitiesList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.highlightActivitiesList}).then((function(e){204==e.status&&t.SET_CURRENT_VIEW(0)}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){})))},DELETE_RECORD:function(){var t=this;(0,o.p)({method:"delete",url:"/HighlightActivities/delete-highlight-activities?id="+this.highlightActivitiesList.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){204==e.status&&t.SET_CURRENT_VIEW(0)}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},FETCH_DROPDOWN_ASSET:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-asset-type-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.asset=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DROPDOWN_PLATFORM:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.platform=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)}}},k=P;var F=(0,m.A)(k,O,N,!1,null,"5269fe2a",null);const M=F.exports;var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-container"},[a("div",{staticClass:"action-bar"},[a("button",{staticClass:"back",on:{click:function(e){return t.SET_CURRENT_VIEW(0)}}},[a("i",{staticClass:"fas fa-chevron-left"}),t._v(" BACK ")]),a("div",{staticClass:"wrapper"},[a("button",{staticClass:"submit",on:{click:function(e){t.isShow=1}}},[t._v("APPROVE")]),a("button",{staticClass:"delete"},[t._v("REJECT")])])]),t._m(0)]),1==t.isShow?a("Sap",{attrs:{sapData:t.data_row.id},on:{popup:function(e){t.isShow=0}}}):t._e()],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("div",{attrs:{id:"pdfPreview"}})])])}],G=a(30388),U=a(41034),z=(a(61373),a(18772),a(87136),a(40173),a(17),a(54133)),W=a.n(z),q=a(42181),V=a(71282),J=a.n(V),j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("div",{staticClass:"page-section"},[a("div",{staticClass:"table-wrapper"},[a("h4",{staticStyle:{"grid-column":"span 4"}},[t._v("SAP Notification Header")]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("WO Order No.")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Generate by SAP",disabled:!0},model:{value:t.sapHeader.wo_order_no,callback:function(e){t.$set(t.sapHeader,"wo_order_no",e)},expression:"sapHeader.wo_order_no"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Notification Type")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Notification Type",disabled:!0},model:{value:t.sapHeader.notification_type,callback:function(e){t.$set(t.sapHeader,"notification_type",e)},expression:"sapHeader.notification_type"}})],1)]),a("div",{staticClass:"input-wrapper",staticStyle:{"grid-column":"span 2"}},[a("span",[t._v("Description")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Description (Maximum 40 characters)","max-length":"40"},model:{value:t.sapHeader.description,callback:function(e){t.$set(t.sapHeader,"description",e)},expression:"sapHeader.description"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Functional Location")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.functionalLocation,"value-expr":"functional_location","display-expr":"functional_location",placeholder:"Select Functional Location","search-enabled":!0},model:{value:t.sapHeader.functional_location,callback:function(e){t.$set(t.sapHeader,"functional_location",e)},expression:"sapHeader.functional_location"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Main WorkCtr")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.mainWorkCtr,"value-expr":"code","display-expr":"code",placeholder:"Select Main WorkCtr","search-enabled":!0},on:{"value-changed":t.ON_MAIN_WORKCTR_CHANGED},model:{value:t.sapHeader.main_workctr,callback:function(e){t.$set(t.sapHeader,"main_workctr",e)},expression:"sapHeader.main_workctr"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Planner Grp")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.plannerGrp,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp","search-enabled":!0,disabled:!0},model:{value:t.sapHeader.planner_grp,callback:function(e){t.$set(t.sapHeader,"planner_grp",e)},expression:"sapHeader.planner_grp"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Planner Grp Planning Plant")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.plannerGrpPlanning,"value-expr":"code","display-expr":"code",placeholder:"Select Planner Grp Planning Plant","search-enabled":!0,disabled:!0},model:{value:t.sapHeader.planner_grp_planning_plant,callback:function(e){t.$set(t.sapHeader,"planner_grp_planning_plant",e)},expression:"sapHeader.planner_grp_planning_plant"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Code Grp Object Part")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.codegrpObjectpart,"value-expr":"object_part_code","display-expr":"object_part_code",placeholder:"Select Code Grp Object Part","search-enabled":!0},model:{value:t.sapHeader.code_grp_object_part,callback:function(e){t.$set(t.sapHeader,"code_grp_object_part",e)},expression:"sapHeader.code_grp_object_part"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Object Part Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.objectpartCode,"value-expr":"object_part_code","display-expr":"ddl",placeholder:"Select Object Part Code","search-enabled":!0},model:{value:t.sapHeader.object_part_code,callback:function(e){t.$set(t.sapHeader,"object_part_code",e)},expression:"sapHeader.object_part_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Code Grp Damage")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.codegrpDamage,"value-expr":"code","display-expr":"code",placeholder:"Select Code Grp Damage","search-enabled":!0},model:{value:t.sapHeader.code_grp_damage,callback:function(e){t.$set(t.sapHeader,"code_grp_damage",e)},expression:"sapHeader.code_grp_damage"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Damage Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.damageCode,"value-expr":"damage_code","display-expr":"ddl",placeholder:"Select Damage Code","search-enabled":!0},model:{value:t.sapHeader.damage_code,callback:function(e){t.$set(t.sapHeader,"damage_code",e)},expression:"sapHeader.damage_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Damage Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Damage Free text"},model:{value:t.sapHeader.damage_free_text,callback:function(e){t.$set(t.sapHeader,"damage_free_text",e)},expression:"sapHeader.damage_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Code Grp Cause")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.codegrpCause,"value-expr":"cause_code","display-expr":"cause_code",placeholder:"Select Code Grp Cause","search-enabled":!0},model:{value:t.sapHeader.code_grp_cause,callback:function(e){t.$set(t.sapHeader,"code_grp_cause",e)},expression:"sapHeader.code_grp_cause"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Cause Code")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.causeCode,"value-expr":"cause_code","display-expr":"ddl",placeholder:"Select Cause Code","search-enabled":!0},model:{value:t.sapHeader.cause_code,callback:function(e){t.$set(t.sapHeader,"cause_code",e)},expression:"sapHeader.cause_code"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Cause Grp Free Text")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Cause Grp Free Text"},model:{value:t.sapHeader.cause_grp_free_text,callback:function(e){t.$set(t.sapHeader,"cause_grp_free_text",e)},expression:"sapHeader.cause_grp_free_text"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Required Start Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required Start Date","display-format":"dd MMM yyyy"},model:{value:t.sapHeader.required_start_date,callback:function(e){t.$set(t.sapHeader,"required_start_date",e)},expression:"sapHeader.required_start_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Required Start Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required Start Time","display-format":"HH:mm"},model:{value:t.sapHeader.required_start_time,callback:function(e){t.$set(t.sapHeader,"required_start_time",e)},expression:"sapHeader.required_start_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Required End Date")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"date",placeholder:"Select Required End date","display-format":"dd MMM yyyy"},model:{value:t.sapHeader.required_end_date,callback:function(e){t.$set(t.sapHeader,"required_end_date",e)},expression:"sapHeader.required_end_date"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Required End Time")]),a("div",{staticClass:"select"},[a("DxDateBox",{attrs:{type:"time",placeholder:"Select Required End Time","display-format":"HH:mm"},model:{value:t.sapHeader.required_end_time,callback:function(e){t.$set(t.sapHeader,"required_end_time",e)},expression:"sapHeader.required_end_time"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Addtional Data")]),a("div",{staticClass:"select"},[a("DxTextBox",{attrs:{placeholder:"Enter Addtional Data"},model:{value:t.sapHeader.additional_data,callback:function(e){t.$set(t.sapHeader,"additional_data",e)},expression:"sapHeader.additional_data"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Accessibility")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.accessibility,"value-expr":"code","display-expr":"description",placeholder:"Select Accessibility","search-enabled":!0},model:{value:t.sapHeader.accessibility,callback:function(e){t.$set(t.sapHeader,"accessibility",e)},expression:"sapHeader.accessibility"}})],1)]),a("div",{staticClass:"input-wrapper"},[a("span",[t._v("Scaffolding Requirement")]),a("div",{staticClass:"select"},[a("DxSelectBox",{attrs:{items:t.formSelect.scaffoldingReq,"value-expr":"code","display-expr":"code",placeholder:"Select Scaffolding Requirement","search-enabled":!0},model:{value:t.sapHeader.scaffolding_requirement,callback:function(e){t.$set(t.sapHeader,"scaffolding_requirement",e)},expression:"sapHeader.scaffolding_requirement"}})],1)]),a("div"),a("div"),a("div",{staticClass:"action-container",staticStyle:{"grid-column":"span 4"}},[a("button",{staticClass:"create",on:{click:t.CREATE_RECORD}},[t._v("Submit")]),a("button",{on:{click:function(e){return t.$emit("popup",0)}}},[t._v("Cancel")])])])])])},Y=[];const K={name:"add-short-term",props:{id_record:Number,id_platform:Number},components:{DxSelectBox:A(),DxTextBox:S(),DxDateBox:L()},created:function(){console.log("id_record:"+this.id_record),console.log("id_platform:"+this.id_platform),this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI REPORT",subpageInnerName:null}),this.FETCH_FAILURE_ACTION_STATUS(),this.FETCH_DISCIPLINE(),this.FETCH_STATUS(),this.FETCH_FUNC_LOCATION(),this.FETCH_PLANNER_GRP(),this.FETCH_PLANNER_GRP_PLANNING_PLANT(),this.FETCH_MAIN_WORK_CTR(),this.FETCH_CODE_GROUP_OBJECT_PART(),this.FETCH_OBJECT_PART_CODE(),this.FETCH_CODE_GRP_DAMAGE(),this.FETCH_DAMAGE_CODE(),this.FETCH_CODE_GRP_CAUSE(),this.FETCH_CAUSE_CODE(),this.FETCH_ACCESSIBILITY(),this.FETCH_SCAFFOLDING_REQ(),this.FETCH_PLATFORM()},data:function(){return{failureActionRecordList:{id:0,is_active:!0,id_failure:this.id_record,action_type:"short-term",id_failure_action_status:null,id_discipline:null,action_date:null,action_details:null},formSelect:{failureactionStatus:[],discipline:[],status:[],functionalLocation:[],plannerGrp:[],plannerGrpPlanning:[],mainWorkCtr:[],codegrpObjectpart:[],objectpartCode:[],codegrpDamage:[],damageCode:[],codegrpCause:[],causeCode:[],causeGrp:[],accessibility:[],scaffoldingReq:[]},sapHeader:{notification_type:"CM",code_grp_object_part:"MECH-PI",code_grp_damage:"MECH-PI",code_grp_cause:"MECH-PI",id_module:2,id_from_module:null,id_reference:null,is_active:!0,required_start_date:"",required_start_time:null,required_end_date:"",required_end_time:null,reported_by:"AIMS",abc_indicator:"1",user_status:"SCRN"}}},computed:{},methods:{CREATE_RECORD:function(){var t=this,e=JSON.parse(localStorage.getItem("user"));console.log("failureActionRecordList",this.failureActionRecordList),console.log("sapHeader",this.sapHeader),this.failureActionRecordList.action_date=this.failureActionRecordList.action_date?E()(this.failureActionRecordList.action_date).format("L"):"",this.failureActionRecordList.created_by=e.id,this.failureActionRecordList.updated_by=e.id,(0,o.p)({method:"post",url:"/FailureActionRecord",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:this.failureActionRecordList}).then((function(a){console.log("FailureActionRecordRes",a),201==a.status&&(t.sapHeader.id_from_module=a.data.id,t.sapHeader.id_reference="RR"+a.data.id,t.sapHeader.required_start_date=t.sapHeader.required_start_date?E()(t.sapHeader.required_start_date).format("YYYYMMDD"):"",t.sapHeader.required_end_date=t.sapHeader.required_end_date?E()(t.sapHeader.required_end_date).format("YYYYMMDD"):"",t.sapHeader.required_start_time=t.sapHeader.required_start_time?E()(t.sapHeader.required_start_time).format("HHmmss"):null,t.sapHeader.required_end_time=t.sapHeader.required_end_time?E()(t.sapHeader.required_end_time).format("HHmmss"):null,t.sapHeader.created_by=e.id,t.sapHeader.updated_by=e.id,(0,o.p)({method:"post",url:"/SapHeader",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:t.sapHeader}).then((function(e){console.log("SapHeaderRes",e),t.$emit("popup")}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){})))}))["catch"]((function(e){t.$ons.notification.alert(e.code+" "+e.response.status+" "+e.message)}))["finally"]((function(){}))},FETCH_FAILURE_ACTION_STATUS:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.failureactionStatus=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DISCIPLINE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-discipline-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.discipline=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_STATUS:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-failure-action-status-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.status=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_FUNC_LOCATION:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-functional-location-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.functionalLocation=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_PLANNER_GRP:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-planner-grp-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.plannerGrp=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_PLANNER_GRP_PLANNING_PLANT:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-planner-grp-planning-plant-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.plannerGrpPlanning=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_MAIN_WORK_CTR:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-main-work-ctr-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.mainWorkCtr=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_OBJECT_PART_CODE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-object-part-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){if(200==e.status&&e.data){t.formSelect.objectpartCode=e.data;for(var a=0;a<t.formSelect.objectpartCode.length;a++)t.formSelect.objectpartCode[a].ddl=t.formSelect.objectpartCode[a].object_part_code+"-"+t.formSelect.objectpartCode[a].object_part_text}}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_CODE_GROUP_OBJECT_PART:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-object-part-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.codegrpObjectpart=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_CODE_GRP_DAMAGE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-damage-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.codegrpDamage=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DAMAGE_CODE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-damage-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){if(200==e.status&&e.data){t.formSelect.damageCode=e.data;for(var a=0;a<t.formSelect.damageCode.length;a++)t.formSelect.damageCode[a].ddl=t.formSelect.damageCode[a].damage_code+"-"+t.formSelect.damageCode[a].damage_code_text}}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_CODE_GRP_CAUSE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-code-grp-cause-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.codegrpCause=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_CAUSE_CODE:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-cause-code-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){if(200==e.status&&e.data){t.formSelect.causeCode=e.data;for(var a=0;a<t.formSelect.causeCode.length;a++)t.formSelect.causeCode[a].ddl=t.formSelect.causeCode[a].cause_code+"-"+t.formSelect.causeCode[a].cause_text}}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_ACCESSIBILITY:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-accessibility-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.accessibility=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_SCAFFOLDING_REQ:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-sap-scaffolding-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){200==e.status&&e.data&&(t.formSelect.scaffoldingReq=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_PLATFORM:function(){var t=this;(0,o.p)({method:"get",url:"/Md/get-md-platform-list",headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))},data:{}}).then((function(e){if(200==e.status&&e.data){var a=e.data.filter((function(e){return e.id==t.id_platform}));t.sapHeader.planner_grp_planning_plant=a[0].planning_plant}}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)},ON_MAIN_WORKCTR_CHANGED:function(t){console.log(t);var e=this.formSelect.mainWorkCtr.filter((function(e){return e.code==t.value}));this.sapHeader.planner_grp=e[0].planner_grp}}},Q=K;var X=(0,m.A)(Q,j,Y,!1,null,"4023a543",null);const Z=X.exports,tt={name:"gpi-report",props:{data_row:Object},components:{Sap:Z},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"GPI NUMBER: ",subpageInnerName:null}),1==this.$store.state.status.server&&(this.FETCH_DATA("/Md/get-md-platform-list","platformList"),this.FETCH_DATA("/Md/get-md-asset-type-list","assetTypeList"),this.FETCH_DATA("/Md/get-md-gpi-main-component-list","mainComponentList"),this.FETCH_DATA("/Md/get-md-gpi-damage-mechanism-list","damageMechanismList"),this.FETCH_DATA("/Md/get-md-gpi-severity-list","severityList"),this.FETCH_DATA("/Md/get-md-gpi-repair-list","typeOfRepairList"),this.FETCH_FAILURE_RECORD(),W().vfs=(0,U.A)({},q.b.vfs))},data:function(){return{failureRecordList:{},pictureLogList:[],export_status:{active:!1,cur:0,max:0},library:[],platformList:[],assetTypeList:[],mainComponentList:[],damageMechanismList:[],severityList:[],typeOfRepairList:[],id_record:this.data_row.id,localURL:"http://localhost:8081",base64ImageUrl:"",isShow:0}},computed:{baseURL:function(){var t=this.$store.state.mode;return"dev"==t?this.$store.state.modeURL.dev:"prod"==t?this.$store.state.modeURL.prod:console.log("develpment mode set up incorrect.")}},methods:{FETCH_FAILURE_RECORD:function(){var t=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/HighlightActivities/"+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.failureRecordList=e.data,t.$nextTick((function(){var t=this;window.setTimeout((function(){t.generatePDF()}),500)})))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_PICTURE_LOG:function(){var t=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/GpiFile/get-gpi-file-by-id?id="+this.data_row.id,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){200==e.status&&e.data&&(t.pictureLogList=e.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_LIBRARY:function(){var t=this;this.isLoading=!0,(0,o.p)({method:"get",url:"/FailureFile/get-failure-file-by-id?id="+this.id_record,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(e){console.log("fetch library",e),200==e.status&&(t.library=e.data,t.isLoading=!1,console.log("library",t.library))}))["catch"]((function(t){console.log(t)}))["finally"]((function(){t.isLoading=!1}))},FETCH_DATA:function(t,e){var a=this;this.isLoading=!0,(0,o.p)({method:"get",url:t,headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("token"))}}).then((function(t){200==t.status&&t.data&&a.$set(a,e,t.data)}))["catch"]((function(t){console.log(t)}))["finally"]((function(){a.isLoading=!1}))},DATE_FORMAT:function(t){return E()(t).format("DD MMM yyyy")},SET_CURRENT_VIEW:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$store.commit("SET_SHOW_BACK_BUTTON",!0),null!==e?this.$emit("currentView",t,e):this.$emit("currentView",t)},convertImageToBase64:function(t){return new Promise((function(e,a){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var t=document.createElement("canvas"),a=t.getContext("2d");t.width=i.width,t.height=i.height,a.drawImage(i,0,0);var s=t.toDataURL("image/png");e(s)},i.onerror=function(t){a(t)},i.src=t}))},convert:function(t){var e=this;return(0,G.A)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.error=null,a.next=4,e.convertImageToBase64(t);case 4:e.base64ImageUrl=a.sent,a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),e.error=a.t0,console.error("Failed to convert image:",a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},replaceFontFamily:function(t,e){var a=/font-family\s*:\s*(['"]?)(.*?)\1\s*;/gi;return t.replace(a,"font-family: ".concat(e,";"))},headerTable:function(){return{widths:[85.5,"*",37.5,48],body:[[{rowSpan:4,image:"logo",width:60,height:50,alignment:"center",margin:[0,0,0,0]},{rowSpan:4,text:"HIGHLIGHT ACTIVITIES REPORT",style:"headerTitle",alignment:"center",margin:[0,20,0,0]},{text:"No:",style:"cellLeft"},{text:this.data_row?this.data_row.id:"-",style:"headerCellRight"}],["","",{text:"Date:",style:"cellLeft"},{text:this.data_row?this.DATE_FORMAT(this.data_row.gpi_date):"-",style:"headerCellRight"}],["","",{text:"Discipline:",style:"cellLeft"},{text:"-",style:"headerCellRight"}],["","",{text:"Originator:",style:"cellLeft"},{text:"-",style:"headerCellRight"}]]}},subHeaderTable:function(){return void 0===this.failureRecordList?{}:{widths:["*","*","*","*"],border:[!0,!1,!0,!0],body:[[{text:"Platform:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_PLATFORM(this.data_row.id_platform),border:[!0,!1,!0,!0]},{text:"Asset Type:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.GET_ASSET_TYPE(this.data_row.id_asset),border:[!0,!1,!0,!0]}],[{text:"Tag Number:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.tag_number?this.data_row.tag_number:"-",border:[!0,!1,!0,!0]},{text:"Contractor:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.contractor?this.data_row.contractor:"-"}],[{text:"PIC:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.person_in_charge?this.data_row.person_in_charge:"-",border:[!0,!1,!0,!0]},{text:"",border:[!0,!1,!0,!0],style:"cellLeft"},{text:"-",border:[!0,!1,!0,!0]}],[{text:"Activities:",border:[!0,!1,!0,!0],style:"cellLeft"},{text:this.data_row.activities?this.data_row.activities:"-",border:[!0,!1,!0,!0],colSpan:3}]]}},generatePDF:function(){var t=this;return(0,G.A)(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={info:{title:"test"},content:[{style:"header",table:t.headerTable(),layout:{vLineWidth:function(t){return 3===t?0:1}}},{border:[!0,!1,!0,!0],table:t.subHeaderTable(),layout:{vLineWidth:function(t){return 1===t||3===t||5===t?0:1}}},{table:{widths:"*",body:[[{text:"Details",style:"cellTitle",border:[!0,!1,!0,!0]}]]}},t.HTML_TO_PDF_MAKE(t.replaceFontFamily(t.data_row.details,"Roboto"))],pageBreakBefore:function(t){if(t.startPosition.top>800&&"REMEDIAL ACTION"==t.text||t.startPosition.top>700&&"REMARK"==t.text||t.startPosition.top>700&&"ACKNOWLEDGMENT"==t.text)return console.warn(t.text),t.startPosition.pageNumber=2,!0},styles:{header:{},headerTitle:{fontSize:14,bold:!0},cellLeft:{fillColor:"#d3d3d3"},cellRight:{},cellTitle:{fontSize:10,bold:!0,fillColor:"#d3d3d3",alignment:"center"},cellSubTitle:{fontSize:8,fillColor:"#d3d3d3",alignment:"center"}},defaultStyle:{fontSize:8},images:{logo:t.baseURL+"wwwroot/assets/cpoc_logo_new.png"}},i=W().createPdf(a),i.getDataUrl((function(t){var e=document.createElement("embed");e.src=t,e.type="application/pdf",e.width="100%",e.height="600px",document.getElementById("pdfPreview").appendChild(e)}));case 3:case"end":return e.stop()}}),e)})))()},GET_PLATFORM:function(t){if(0===this.platformList.length||null===t)return"-";var e=this.platformList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].code_name},GET_ASSET_TYPE:function(t){if(0===this.assetTypeList.length||null===t)return"-";var e=this.assetTypeList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].asset_type},GET_MAIN_COMPONENT:function(t){if(0===this.mainComponentList.length||null===t)return"-";var e=this.mainComponentList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].code},GET_DAMAGE_MECHANISM:function(t){if(0===this.damageMechanismList.length||null===t)return"-";var e=this.damageMechanismList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].code},GET_SEVERITY:function(t){if(0===this.severityList.length||null===t)return"-";var e=this.severityList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].code},GET_TYPE_OF_REPAIR:function(t){if(0===this.typeOfRepairList.length||null===t)return"-";var e=this.typeOfRepairList.filter((function(e){return e.id==t}));return 0===e.length?"-":e[0].code},HTML_TO_PDF_MAKE:function(t){if(null===t)return"-";var e=J()(t);return e[0].border=[!0,!0,!0,!0],e[0].borderColor=["windowtext","windowtext","windowtext","windowtext"],console.log(e),e}}},et=tt;var at=(0,m.A)(et,B,$,!1,null,"620cb3f0",null);const it=at.exports,st={name:"inspection-record",components:{ViewFR:f,AddFR:I,EditFR:M,ReportPage:it},created:function(){this.$store.commit("UPDATE_CURRENT_PAGENAME",{subpageName:"FAILURE REPORT",subpageInnerName:null})},data:function(){return{current_view:0,edit_row:{}}},computed:{},methods:{SET_EDIT:function(t,e){this.current_view=t,this.edit_row=e}}},rt=st;var nt=(0,m.A)(rt,i,s,!1,null,"2b2c4b00",null);const ot=nt.exports}}]);
//# sourceMappingURL=6329.cba398d3.js.map